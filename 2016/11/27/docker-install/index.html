<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>docker_install | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="�����������룺����yumԴcat &amp;gt;/etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-EOF[dockerrepo]name=Docker Repositorybaseurl=https://yum.dockerproject.org/repo/main/centos/6enabled=1gpgcheck=1gpgkey=https://yum.doc">
<meta property="og:type" content="article">
<meta property="og:title" content="docker_install">
<meta property="og:url" content="http://yoursite.com/2016/11/27/docker-install/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="�����������룺����yumԴcat &amp;gt;/etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-EOF[dockerrepo]name=Docker Repositorybaseurl=https://yum.dockerproject.org/repo/main/centos/6enabled=1gpgcheck=1gpgkey=https://yum.doc">
<meta property="og:updated_time" content="2016-11-27T13:36:06.845Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="docker_install">
<meta name="twitter:description" content="�����������룺����yumԴcat &amp;gt;/etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-EOF[dockerrepo]name=Docker Repositorybaseurl=https://yum.dockerproject.org/repo/main/centos/6enabled=1gpgcheck=1gpgkey=https://yum.doc">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/dey/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/dey/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/dey/">Home</a>
        
          <a class="main-nav-link" href="/dey/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-docker-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/dey/2016/11/27/docker-install/" class="article-date">
  <time datetime="2016-11-27T13:33:03.000Z" itemprop="datePublished">2016-11-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      docker_install
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>�����������룺<br>����yumԴ<br>cat &gt;/etc/yum.repos.d/docker.repo &lt;&lt;-EOF<br>[dockerrepo]<br>name=Docker Repository<br>baseurl=<a href="https://yum.dockerproject.org/repo/main/centos/6" target="_blank" rel="external">https://yum.dockerproject.org/repo/main/centos/6</a><br>enabled=1<br>gpgcheck=1<br>gpgkey=<a href="https://yum.dockerproject.org/gpg" target="_blank" rel="external">https://yum.dockerproject.org/gpg</a><br>EOF<br>ͨ��yum����docker<br>yum install docker-engine</p>
<p>����selinux</p>
<p>1.�鿴selinux״̬</p>
<p>[root@localhost ~]# cat /etc/selinux/config</p>
<h1 id="This-file-controls-the-state-of-SELinux-on-the-system"><a href="#This-file-controls-the-state-of-SELinux-on-the-system" class="headerlink" title="This file controls the state of SELinux on the system."></a>This file controls the state of SELinux on the system.</h1><h1 id="SELINUX-can-take-one-of-these-three-values"><a href="#SELINUX-can-take-one-of-these-three-values" class="headerlink" title="SELINUX= can take one of these three values:"></a>SELINUX= can take one of these three values:</h1><h1 id="enforcing-SELinux-security-policy-is-enforced"><a href="#enforcing-SELinux-security-policy-is-enforced" class="headerlink" title="enforcing - SELinux security policy is enforced."></a>enforcing - SELinux security policy is enforced.</h1><h1 id="permissive-SELinux-prints-warnings-instead-of-enforcing"><a href="#permissive-SELinux-prints-warnings-instead-of-enforcing" class="headerlink" title="permissive - SELinux prints warnings instead of enforcing."></a>permissive - SELinux prints warnings instead of enforcing.</h1><h1 id="disabled-No-SELinux-policy-is-loaded"><a href="#disabled-No-SELinux-policy-is-loaded" class="headerlink" title="disabled - No SELinux policy is loaded."></a>disabled - No SELinux policy is loaded.</h1><p>SELINUX=enforcing</p>
<h1 id="SELINUXTYPE-can-take-one-of-these-two-values"><a href="#SELINUXTYPE-can-take-one-of-these-two-values" class="headerlink" title="SELINUXTYPE= can take one of these two values:"></a>SELINUXTYPE= can take one of these two values:</h1><h1 id="targeted-Targeted-processes-are-protected"><a href="#targeted-Targeted-processes-are-protected" class="headerlink" title="targeted - Targeted processes are protected,"></a>targeted - Targeted processes are protected,</h1><h1 id="mls-Multi-Level-Security-protection"><a href="#mls-Multi-Level-Security-protection" class="headerlink" title="mls - Multi Level Security protection."></a>mls - Multi Level Security protection.</h1><p>SELINUXTYPE=targeted</p>
<p>2.�޸ĸ������ļ��н�enforcing�滻Ϊdisabled</p>
<p>[root@localhost ~]# cat /etc/selinux/config</p>
<h1 id="This-file-controls-the-state-of-SELinux-on-the-system-1"><a href="#This-file-controls-the-state-of-SELinux-on-the-system-1" class="headerlink" title="This file controls the state of SELinux on the system."></a>This file controls the state of SELinux on the system.</h1><h1 id="SELINUX-can-take-one-of-these-three-values-1"><a href="#SELINUX-can-take-one-of-these-three-values-1" class="headerlink" title="SELINUX= can take one of these three values:"></a>SELINUX= can take one of these three values:</h1><h1 id="enforcing-SELinux-security-policy-is-enforced-1"><a href="#enforcing-SELinux-security-policy-is-enforced-1" class="headerlink" title="enforcing - SELinux security policy is enforced."></a>enforcing - SELinux security policy is enforced.</h1><h1 id="permissive-SELinux-prints-warnings-instead-of-enforcing-1"><a href="#permissive-SELinux-prints-warnings-instead-of-enforcing-1" class="headerlink" title="permissive - SELinux prints warnings instead of enforcing."></a>permissive - SELinux prints warnings instead of enforcing.</h1><h1 id="disabled-No-SELinux-policy-is-loaded-1"><a href="#disabled-No-SELinux-policy-is-loaded-1" class="headerlink" title="disabled - No SELinux policy is loaded."></a>disabled - No SELinux policy is loaded.</h1><p>SELINUX=disabled</p>
<h1 id="SELINUXTYPE-can-take-one-of-these-two-values-1"><a href="#SELINUXTYPE-can-take-one-of-these-two-values-1" class="headerlink" title="SELINUXTYPE= can take one of these two values:"></a>SELINUXTYPE= can take one of these two values:</h1><h1 id="targeted-Targeted-processes-are-protected-1"><a href="#targeted-Targeted-processes-are-protected-1" class="headerlink" title="targeted - Targeted processes are protected,"></a>targeted - Targeted processes are protected,</h1><h1 id="mls-Multi-Level-Security-protection-1"><a href="#mls-Multi-Level-Security-protection-1" class="headerlink" title="mls - Multi Level Security protection."></a>mls - Multi Level Security protection.</h1><p>SELINUXTYPE=targeted</p>
<p>Dockerʹ�÷�root�û�<br>����ǰ�û�����docker��<br>sudo gpasswd -a ${USER} docker</p>
<p>Ȼ������<br>restart</p>
<p>����docker<br>/etc/init.d/docker start</p>
<p>[hadoop@www.hadoop02.com ~]$ps -ef | grep docker<br>root       2398      1  0 19:26 ?        00:00:00 /usr/bin/docker -d<br>hadoop     2817   2761  0 19:27 pts/0    00:00:00 grep docker</p>
<p>[hadoop@www.hadoop02.com ~]$docker version<br>Client version: 1.7.1<br>Client API version: 1.19<br>Go version (client): go1.4.2<br>Git commit (client): 786b29d<br>OS/Arch (client): linux/amd64<br>Get <a href="http:///var/run/docker.sock/v1.19/version" target="_blank" rel="external">http:///var/run/docker.sock/v1.19/version</a>: dial unix /var/run/docker.sock: permission denied. Are you trying to connect to a TLS-enabled daemon without TLS?</p>
<p>[hadoop@www.hadoop02.com ~]$docker -d<br>FATA[0000] Error starting daemon: open /var/run/docker.pid: permission denied </p>
<p>����hadoop�û���docker��<br>[hadoop@www.hadoop02.com run]$sudo gpasswd -a hadoop docker<br>Adding user hadoop to group docker</p>
<p>�鿴docker��Ϣ<br>[hadoop@www.hadoop02.com ~]$docker info<br>Containers: 0<br>Images: 0<br>Storage Driver: devicemapper<br> Pool Name: docker-253:0-798129-pool<br> Pool Blocksize: 65.54 kB<br> Backing Filesystem: extfs<br> Data file: /dev/loop0<br> Metadata file: /dev/loop1<br> Data Space Used: 305.7 MB<br> Data Space Total: 107.4 GB<br> Data Space Available: 3.967 GB<br> Metadata Space Used: 729.1 kB<br> Metadata Space Total: 2.147 GB<br> Metadata Space Available: 2.147 GB<br> Udev Sync Supported: true<br> Deferred Removal Enabled: false<br> Data loop file: /var/lib/docker/devicemapper/devicemapper/data<br> Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata<br> Library Version: 1.02.95-RHEL6 (2015-04-15)<br>Execution Driver: native-0.2<br>Logging Driver: json-file<br>Kernel Version: 2.6.32-573.el6.x86_64<br>Operating System: <unknown><br>CPUs: 1<br>Total Memory: 1.82 GiB<br>Name: www.hadoop02.com<br>ID: XL2K:2DEZ:GF27:JL4P:AHWJ:HEGF:QNQ7:HVT3:3SLS:75GJ:LRQM:E7OJ</unknown></p>
<p>������ip addr��docker0����<br>������һ��˽������<br> docker0: <broadcast,multicast,up,lower_up> mtu 1500 qdisc noqueue state UNKNOWN<br>    link/ether 26:75:34:2e:06:26 brd ff:ff:ff:ff:ff:ff<br>    inet 172.17.42.1/16 scope global docker0<br>    inet6 fe80::2475:34ff:fe2e:626/64 scope link<br>       valid_lft forever preferred_lft forever</broadcast,multicast,up,lower_up></p>
<p>�ϴ�docker�ļ�<br>build�ļ���ע�������и���<br>docker build -t hadoop/zookeeper:3.4.6 -f zookeeper.Dockerfile .<br>���ֱ�����ԭ����û�а�װREPL</p>
<p>wget <a href="http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm" target="_blank" rel="external">http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm</a></p>
<p>rpm -ivh epel-release-6-8.noarch.rpm<br>yum repolist<br>yum makecache  ��ִ�д˾�Ҳ��</p>
<p>ִ��docker search centos���Կ�����Ϣ<br>docker search centos<br>NAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED<br>centos                          The official build of CentOS.                   2757      [OK]<br>jdeathe/centos-ssh              CentOS-6 6.8 x86_64 / CentOS-7 7.2.1511 x8…   42                   [OK]<br>jdeathe/centos-ssh-apache-php   CentOS-6 6.8 x86_64 / Apache / PHP / PHP M…   21                   [OK]<br>nimmis/java-centos              This is docker images of CentOS 7 with dif…   16                   [OK]<br>gluster/gluster-centos          Official GlusterFS Image [ CentOS7 +  Glus…   12                   [OK]<br>million12/centos-supervisor     Base CentOS-7 with supervisord launcher, h…   12                   [OK]<br>torusware/speedus-centos        Always updated official CentOS docker imag…   8                    [OK]<br>nickistre/centos-lamp           LAMP on centos setup                            7                    [OK]<br>kinogmt/centos-ssh              CentOS with SSH                                 6                    [OK]<br>nathonfowlie/centos-jre         Latest CentOS image with the JRE pre-insta…   4                    [OK]<br>centos/mariadb55-centos7                                                        3                    [OK]<br>consol/sakuli-centos-xfce       Sakuli JavaScript based end-2-end testing …   2                    [OK]<br>timhughes/centos                Centos with systemd installed and running       1                    [OK]<br>blacklabelops/centos            CentOS Base Image! Built and Updates Daily!     1                    [OK]<br>darksheer/centos                Base Centos Image – Updated hourly             1                    [OK]<br>harisekhon/centos-scala         Scala + CentOS (OpenJDK tags 2.10-jre7 - 2…   1                    [OK]<br>harisekhon/centos-java          Java on CentOS (OpenJDK, tags jre/jdk7-8)       1                    [OK]<br>repositoryjp/centos             Docker Image for CentOS.                        0                    [OK]<br>labengine/centos                Centos image base                               0                    [OK]<br>smartentry/centos               centos with smartentry                          0                    [OK]<br>januswel/centos                 yum update-ed CentOS image                      0                    [OK]<br>vcatechnology/centos            A CentOS Image which is updated daily           0                    [OK]<br>grayzone/centos                 auto build for centos.                          0                    [OK]<br>ustclug/centos                   USTC centos                                    0                    [OK]<br>kz8s/centos                     Official CentOS plus epel-release               0                    [OK]</p>
<p>����ִ��docker build</p>
<p>[hadoop@www.hadoop02.com ~]$docker run -itd –name zookeeper -h zookeeper -p 2181:2181 jason/zookeeper:3.4.6 bash<br>b023a24424772462cc8d63e79dc3c3fe9e06dd0825ad617c65006e1ef331656d<br>[hadoop@www.hadoop02.com ~]$docker ps<br>CONTAINER ID        IMAGE                   COMMAND                CREATED             STATUS              PORTS                    NAMES<br>b023a2442477        jason/zookeeper:3.4.6   “sh /opt/zookeeper/s   11 seconds ago      Up 8 seconds        0.0.0.0:2181-&gt;2181/tcp   zookeeper      </p>
<p>docker build -t hadoop/kafka:0.8.2.2 -f zookeeper.Dockerfile .</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/dey/2016/11/27/docker-install/" data-id="ciw0ovv6q00002ghleput99bc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/dey/2016/11/25/kafka_high_level_api/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Kafka_high_level_api测试</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/dey/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/dey/archives/2015/11/">November 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/dey/2016/11/27/docker-install/">docker_install</a>
          </li>
        
          <li>
            <a href="/dey/2016/11/25/kafka_high_level_api/">Kafka_high_level_api测试</a>
          </li>
        
          <li>
            <a href="/dey/2015/11/25/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 jiatianyao<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/dey/" class="mobile-nav-link">Home</a>
  
    <a href="/dey/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/dey/fancybox/jquery.fancybox.css">
  <script src="/dey/fancybox/jquery.fancybox.pack.js"></script>


<script src="/dey/js/script.js"></script>

  </div>
</body>
</html>