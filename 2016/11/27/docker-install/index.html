<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>docker_install | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.����yumԴ�����������룺12345678cat &amp;gt;/etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-EOF[dockerrepo]name=Docker Repositorybaseurl=https://yum.dockerproject.org/repo/main/centos/6enabled=1gpgcheck=1gpgkey=https">
<meta property="og:type" content="article">
<meta property="og:title" content="docker_install">
<meta property="og:url" content="http://yoursite.com/2016/11/27/docker-install/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1.����yumԴ�����������룺12345678cat &amp;gt;/etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-EOF[dockerrepo]name=Docker Repositorybaseurl=https://yum.dockerproject.org/repo/main/centos/6enabled=1gpgcheck=1gpgkey=https">
<meta property="og:updated_time" content="2016-11-29T14:38:15.264Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="docker_install">
<meta name="twitter:description" content="1.����yumԴ�����������룺12345678cat &amp;gt;/etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-EOF[dockerrepo]name=Docker Repositorybaseurl=https://yum.dockerproject.org/repo/main/centos/6enabled=1gpgcheck=1gpgkey=https">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/dey/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/dey/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/dey/">Home</a>
        
          <a class="main-nav-link" href="/dey/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-docker-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/dey/2016/11/27/docker-install/" class="article-date">
  <time datetime="2016-11-27T13:33:03.000Z" itemprop="datePublished">2016-11-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      docker_install
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-����yumԴ"><a href="#1-����yumԴ" class="headerlink" title="1.����yumԴ"></a>1.����yumԴ</h4><p>�����������룺<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">cat &gt;<span class="regexp">/etc/yum</span>.repos.d/docker.repo &lt;&lt;-EOF</div><div class="line">[dockerrepo]</div><div class="line">name=Docker Repository</div><div class="line">baseurl=https:<span class="comment">//yum.dockerproject.org/repo/main/centos/6</span></div><div class="line">enabled=<span class="number">1</span></div><div class="line">gpgcheck=<span class="number">1</span></div><div class="line">gpgkey=https:<span class="comment">//yum.dockerproject.org/gpg</span></div><div class="line">EOF</div></pre></td></tr></table></figure></p>
<p>ͨ��yum����docker<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install docker-engine</div></pre></td></tr></table></figure></p>
<h4 id="2-����selinux"><a href="#2-����selinux" class="headerlink" title="2.����selinux"></a>2.����selinux</h4><p>#####2.1.�鿴selinux״̬</p>
<p>[root@localhost ~]# cat /etc/selinux/config<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"># This file controls the state of SELinux on the system.</div><div class="line"># SELINUX= can take one of these three values:</div><div class="line">#     enforcing - SELinux security policy is enforced.</div><div class="line">#     permissive - SELinux prints warnings instead of enforcing.</div><div class="line">#     disabled - No SELinux policy is loaded.</div><div class="line">SELINUX=enforcing</div><div class="line"># SELINUXTYPE= can take one of these two values:</div><div class="line">#     targeted - Targeted processes are protected,</div><div class="line">#     mls - Multi Level Security protection.</div><div class="line">SELINUXTYPE=targeted</div><div class="line">``` </div><div class="line">2.2.�޸ĸ������ļ��н�enforcing�滻Ϊdisabled</div><div class="line"> </div><div class="line">[root@localhost ~]# cat /etc/selinux/config</div><div class="line">```js</div><div class="line"># This file controls the state of SELinux on the system.</div><div class="line"># SELINUX= can take one of these three values:</div><div class="line">#     enforcing - SELinux security policy is enforced.</div><div class="line">#     permissive - SELinux prints warnings instead of enforcing.</div><div class="line">#     disabled - No SELinux policy is loaded.</div><div class="line">SELINUX=disabled</div><div class="line"># SELINUXTYPE= can take one of these two values:</div><div class="line">#     targeted - Targeted processes are protected,</div><div class="line">#     mls - Multi Level Security protection.</div><div class="line">SELINUXTYPE=targeted</div></pre></td></tr></table></figure></p>
<p>2.3.Dockerʹ�÷�root�û�<br>����ǰ�û�����docker��<br>sudo gpasswd -a ${USER} docker</p>
<p>2.4.Ȼ������<br>restart</p>
<a id="more"></a> 
<h4 id="3-����docker"><a href="#3-����docker" class="headerlink" title="3.����docker"></a>3.����docker</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/docker start</div><div class="line"></div><div class="line">[hadoop@www.hadoop02.com ~]$ps -ef | grep docker </div><div class="line">root       <span class="number">2398</span>      <span class="number">1</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">26</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> /usr/bin/docker -d</div><div class="line">hadoop     <span class="number">2817</span>   <span class="number">2761</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">27</span> pts/<span class="number">0</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep docker</div><div class="line"></div><div class="line"></div><div class="line">[hadoop@www.hadoop02.com ~]$docker version</div><div class="line">Client version: <span class="number">1.7</span><span class="number">.1</span></div><div class="line">Client API version: <span class="number">1.19</span></div><div class="line">Go version (client): go1<span class="number">.4</span><span class="number">.2</span></div><div class="line">Git commit (client): <span class="number">786</span>b29d</div><div class="line">OS/Arch (client): linux/amd64</div><div class="line">Get http:<span class="comment">///var/run/docker.sock/v1.19/version: dial unix /var/run/docker.sock: permission denied. Are you trying to connect to a TLS-enabled daemon without TLS?</span></div><div class="line"></div><div class="line"></div><div class="line">[hadoop@www.hadoop02.com ~]$docker -d </div><div class="line">FATA[<span class="number">0000</span>] <span class="built_in">Error</span> starting daemon: open /<span class="keyword">var</span>/run/docker.pid: permission denied</div></pre></td></tr></table></figure>
<p>����hadoop�û���docker��<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[hadoop@www.hadoop02.com run]$sudo gpasswd -a hadoop docker</div><div class="line">Adding user hadoop to group docker</div></pre></td></tr></table></figure></p>
<p>�鿴docker��Ϣ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">[hadoop@www.hadoop02.com ~]$docker info</div><div class="line">Containers: <span class="number">0</span></div><div class="line">Images: <span class="number">0</span></div><div class="line">Storage Driver: devicemapper</div><div class="line"> Pool Name: docker<span class="number">-253</span>:<span class="number">0</span><span class="number">-798129</span>-pool</div><div class="line"> Pool Blocksize: <span class="number">65.54</span> kB</div><div class="line"> Backing Filesystem: extfs</div><div class="line"> Data file: <span class="regexp">/dev/</span>loop0</div><div class="line"> Metadata file: <span class="regexp">/dev/</span>loop1</div><div class="line"> Data Space Used: <span class="number">305.7</span> MB</div><div class="line"> Data Space Total: <span class="number">107.4</span> GB</div><div class="line"> Data Space Available: <span class="number">3.967</span> GB</div><div class="line"> Metadata Space Used: <span class="number">729.1</span> kB</div><div class="line"> Metadata Space Total: <span class="number">2.147</span> GB</div><div class="line"> Metadata Space Available: <span class="number">2.147</span> GB</div><div class="line"> Udev Sync Supported: <span class="literal">true</span></div><div class="line"> Deferred Removal Enabled: <span class="literal">false</span></div><div class="line"> Data loop file: <span class="regexp">/var/</span>lib/docker/devicemapper/devicemapper/data</div><div class="line"> Metadata loop file: <span class="regexp">/var/</span>lib/docker/devicemapper/devicemapper/metadata</div><div class="line"> Library Version: <span class="number">1.02</span><span class="number">.95</span>-RHEL6 (<span class="number">2015</span><span class="number">-04</span><span class="number">-15</span>)</div><div class="line">Execution Driver: native<span class="number">-0.2</span></div><div class="line">Logging Driver: json-file</div><div class="line">Kernel Version: <span class="number">2.6</span><span class="number">.32</span><span class="number">-573.</span>el6.x86_64</div><div class="line">Operating System: &lt;unknown&gt;</div><div class="line">CPUs: 1</div><div class="line">Total Memory: 1.82 GiB</div><div class="line">Name: www.hadoop02.com</div><div class="line">ID: XL2K:2DEZ:GF27:JL4P:AHWJ:HEGF:QNQ7:HVT3:3SLS:75GJ:LRQM:E7OJ</div></pre></td></tr></table></figure></p>
<p>������ip addr��docker0����<br>������һ��˽������<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UNKNOWN </div><div class="line">   link/ether 26:75:34:2e:06:26 brd ff:ff:ff:ff:ff:ff</div><div class="line">   inet 172.17.42.1/16 scope global docker0</div><div class="line">   inet6 fe80::2475:34ff:fe2e:626/64 scope link </div><div class="line">      valid_lft forever preferred_lft forever</div></pre></td></tr></table></figure></p>
<p>�ϴ�docker�ļ�<br>build�ļ���ע�������и���<br>docker build -t hadoop/zookeeper:3.4.6 -f zookeeper.Dockerfile .<br>���ֱ�����ԭ����û�а�װREPL</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget http:<span class="comment">//download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm</span></div><div class="line"></div><div class="line">rpm -ivh epel-release<span class="number">-6</span><span class="number">-8.</span>noarch.rpm</div><div class="line">yum repolist</div><div class="line">yum makecache  ��ִ�д˾�Ҳ��</div></pre></td></tr></table></figure>
<p>ִ��docker search centos���Կ�����Ϣ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">docker search centos</div><div class="line">NAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</div><div class="line">centos                          The official build <span class="keyword">of</span> CentOS.                   <span class="number">2757</span>      [OK]       </div><div class="line">jdeathe/centos-ssh              CentOS<span class="number">-6</span> <span class="number">6.8</span> x86_64 / CentOS<span class="number">-7</span> <span class="number">7.2</span><span class="number">.1511</span> x8...   <span class="number">42</span>                   [OK]</div><div class="line">jdeathe/centos-ssh-apache-php   CentOS<span class="number">-6</span> <span class="number">6.8</span> x86_64 / Apache / PHP / PHP M...   <span class="number">21</span>                   [OK]</div><div class="line">nimmis/java-centos              This is docker images <span class="keyword">of</span> CentOS <span class="number">7</span> <span class="keyword">with</span> dif...   <span class="number">16</span>                   [OK]</div><div class="line">gluster/gluster-centos          Official GlusterFS Image [ CentOS7 +  Glus...   <span class="number">12</span>                   [OK]</div><div class="line">million12/centos-supervisor     Base CentOS<span class="number">-7</span> <span class="keyword">with</span> supervisord launcher, h...   <span class="number">12</span>                   [OK]</div><div class="line">torusware/speedus-centos        Always updated official CentOS docker imag...   <span class="number">8</span>                    [OK]</div><div class="line">nickistre/centos-lamp           LAMP on centos setup                            <span class="number">7</span>                    [OK]</div><div class="line">kinogmt/centos-ssh              CentOS <span class="keyword">with</span> SSH                                 <span class="number">6</span>                    [OK]</div><div class="line">nathonfowlie/centos-jre         Latest CentOS image <span class="keyword">with</span> the JRE pre-insta...   <span class="number">4</span>                    [OK]</div><div class="line">centos/mariadb55-centos7                                                        <span class="number">3</span>                    [OK]</div><div class="line">consol/sakuli-centos-xfce       Sakuli JavaScript based end<span class="number">-2</span>-end testing ...   <span class="number">2</span>                    [OK]</div><div class="line">timhughes/centos                Centos <span class="keyword">with</span> systemd installed and running       <span class="number">1</span>                    [OK]</div><div class="line">blacklabelops/centos            CentOS Base Image! Built and Updates Daily!     <span class="number">1</span>                    [OK]</div><div class="line">darksheer/centos                Base Centos Image -- Updated hourly             <span class="number">1</span>                    [OK]</div><div class="line">harisekhon/centos-scala         Scala + CentOS (OpenJDK tags <span class="number">2.10</span>-jre7 - <span class="number">2.</span>..   <span class="number">1</span>                    [OK]</div><div class="line">harisekhon/centos-java          Java on CentOS (OpenJDK, tags jre/jdk7<span class="number">-8</span>)       <span class="number">1</span>                    [OK]</div><div class="line">repositoryjp/centos             Docker Image <span class="keyword">for</span> CentOS.                        <span class="number">0</span>                    [OK]</div><div class="line">labengine/centos                Centos image base                               <span class="number">0</span>                    [OK]</div><div class="line">smartentry/centos               centos <span class="keyword">with</span> smartentry                          <span class="number">0</span>                    [OK]</div><div class="line">januswel/centos                 yum update-ed CentOS image                      <span class="number">0</span>                    [OK]</div><div class="line">vcatechnology/centos            A CentOS Image which is updated daily           <span class="number">0</span>                    [OK]</div><div class="line">grayzone/centos                 auto build <span class="keyword">for</span> centos.                          <span class="number">0</span>                    [OK]</div><div class="line">ustclug/centos                   USTC centos                                    <span class="number">0</span>                    [OK]</div><div class="line">kz8s/centos                     Official CentOS plus epel-release               <span class="number">0</span>                    [OK]</div></pre></td></tr></table></figure></p>
<p>����ִ��docker build</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[hadoop@www.hadoop02.com ~]$docker run -itd --name zookeeper -h zookeeper -p 2181:2181 jason/zookeeper:3.4.6 bash</div><div class="line">b023a24424772462cc8d63e79dc3c3fe9e06dd0825ad617c65006e1ef331656d</div><div class="line">[hadoop@www.hadoop02.com ~]$docker ps</div><div class="line">CONTAINER ID        IMAGE                   COMMAND                CREATED             STATUS              PORTS                    NAMES</div><div class="line">b023a2442477        jason/zookeeper:3.4.6   "sh /opt/zookeeper/s   11 seconds ago      Up 8 seconds        0.0.0.0:2181-&gt;2181/tcp   zookeeper      </div><div class="line"></div><div class="line"></div><div class="line">docker build -t hadoop/kafka:0.8.2.2 -f zookeeper.Dockerfile .</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/dey/2016/11/27/docker-install/" data-id="ciw3m0bml000008hlylqit2pj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/dey/2016/11/25/kafka_high_level_api/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Kafka_high_level_api测试</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/dey/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/dey/archives/2015/11/">November 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/dey/2016/11/27/docker-install/">docker_install</a>
          </li>
        
          <li>
            <a href="/dey/2016/11/25/kafka_high_level_api/">Kafka_high_level_api测试</a>
          </li>
        
          <li>
            <a href="/dey/2015/11/25/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 jiatianyao<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/dey/" class="mobile-nav-link">Home</a>
  
    <a href="/dey/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/dey/fancybox/jquery.fancybox.css">
  <script src="/dey/fancybox/jquery.fancybox.pack.js"></script>


<script src="/dey/js/script.js"></script>

  </div>
</body>
</html>