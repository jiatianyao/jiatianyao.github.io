<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="入手centos7首先打开centos 官网下载https://www.centos.org/download/
选择DVD ISO
找到地址并下载http://101.96.8.151/isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso
安装参考：http://blog.csdn.net/alex_my">
<meta property="og:type" content="article">
<meta property="og:title" content="docker版Kafka集群">
<meta property="og:url" content="http://yoursite.com/2016/12/19/docker玩kafka集群/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="入手centos7首先打开centos 官网下载https://www.centos.org/download/
选择DVD ISO
找到地址并下载http://101.96.8.151/isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso
安装参考：http://blog.csdn.net/alex_my">
<meta property="og:updated_time" content="2017-01-22T01:20:04.051Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="docker版Kafka集群">
<meta name="twitter:description" content="入手centos7首先打开centos 官网下载https://www.centos.org/download/
选择DVD ISO
找到地址并下载http://101.96.8.151/isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso
安装参考：http://blog.csdn.net/alex_my">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/12/19/docker玩kafka集群/"/>





  <title> docker版Kafka集群 | Hexo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?7429985a9690d626019a4aae76bf7702";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hexo</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-tags " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/19/docker玩kafka集群/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                docker版Kafka集群
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-19T12:33:30+08:00">
                2016-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/大数据/" itemprop="url" rel="index">
                    <span itemprop="name">大数据</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/19/docker玩kafka集群/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/19/docker玩kafka集群/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="入手centos7"><a href="#入手centos7" class="headerlink" title="入手centos7"></a>入手centos7</h3><p>首先打开centos 官网下载<br><a href="https://www.centos.org/download/" target="_blank" rel="external">https://www.centos.org/download/</a></p>
<p>选择DVD ISO</p>
<p>找到地址并下载<br><a href="http://101.96.8.151/isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso" target="_blank" rel="external">http://101.96.8.151/isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso</a></p>
<p>安装参考：<br><a href="http://blog.csdn.net/alex_my/article/details/38142229" target="_blank" rel="external">http://blog.csdn.net/alex_my/article/details/38142229</a></p>
<h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><p>安装详情可参考官网<br><a href="https://docs.docker.com/engine/installation/linux/centos/" target="_blank" rel="external">https://docs.docker.com/engine/installation/linux/centos/</a></p>
<p>博主使用另外一种简单方式安装<br>安装docker<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install docker</div></pre></td></tr></table></figure></p>
<p>启动服务（CENTOS7之前的版本）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service docker start</div><div class="line">chkconfig docker on</div></pre></td></tr></table></figure></p>
<p>Centos之后的：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">systemctl  start docker.service</div><div class="line">systemctl  enable docker.service</div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">docker version</div><div class="line">Client:</div><div class="line"> Version:         <span class="number">1.10</span><span class="number">.3</span></div><div class="line"> API version:     <span class="number">1.22</span></div><div class="line"> Package version: docker-common<span class="number">-1.10</span><span class="number">.3</span><span class="number">-59.</span>el7.centos.x86_64</div><div class="line"> Go version:      go1<span class="number">.6</span><span class="number">.3</span></div><div class="line"> Git commit:      <span class="number">3999</span>ccb-unsupported</div><div class="line"> Built:           Thu Dec <span class="number">15</span> <span class="number">17</span>:<span class="number">24</span>:<span class="number">43</span> <span class="number">2016</span></div><div class="line"> OS/Arch:         linux/amd64</div><div class="line"></div><div class="line">Server:</div><div class="line"> Version:         <span class="number">1.10</span><span class="number">.3</span></div><div class="line"> API version:     <span class="number">1.22</span></div><div class="line"> Package version: docker-common<span class="number">-1.10</span><span class="number">.3</span><span class="number">-59.</span>el7.centos.x86_64</div><div class="line"> Go version:      go1<span class="number">.6</span><span class="number">.3</span></div><div class="line"> Git commit:      <span class="number">3999</span>ccb-unsupported</div><div class="line"> Built:           Thu Dec <span class="number">15</span> <span class="number">17</span>:<span class="number">24</span>:<span class="number">43</span> <span class="number">2016</span></div><div class="line"> OS/Arch:         linux/amd64</div></pre></td></tr></table></figure>
<h3 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h3><p>博主当时有1.7.1的版本在安装完之后启动报错<br>Cannot open self /usr/bin/docker-compose or archive /usr/bin/docker-compose.pkg</p>
<p>后改用早一点的版本1.7.0测试没有问题<br>下载和安装地址可参考：<br><a href="https://github.com/docker/compose/releases?after=docs-v1.7.1-2016-05-31" target="_blank" rel="external">https://github.com/docker/compose/releases?after=docs-v1.7.1-2016-05-31</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">curl -L https:<span class="comment">//github.com/docker/compose/releases/download/1.7.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span></div><div class="line">chmod +x /usr/local/bin/docker-compose</div><div class="line"></div><div class="line">docker-compose version</div><div class="line">docker-compose version <span class="number">1.7</span><span class="number">.0</span>, build <span class="number">0</span>d7bf73</div><div class="line">docker-py version: <span class="number">1.8</span><span class="number">.0</span></div><div class="line">CPython version: <span class="number">2.7</span><span class="number">.9</span></div><div class="line">OpenSSL version: OpenSSL <span class="number">1.0</span><span class="number">.1</span>e <span class="number">11</span> Feb <span class="number">2013</span></div></pre></td></tr></table></figure></p>
<p>编写docker文件，此处参考Jason大神的，尊重原创，转载请标注<br>kafka.Dockerfile<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">FROM centos:<span class="number">6.6</span></div><div class="line"></div><div class="line">RUN mkdir /etc/yum.repos.d/backup &amp;&amp;\</div><div class="line">	mv /etc/yum.repos.d<span class="comment">/*.repo /etc/yum.repos.d/backup/ &amp;&amp;\</span></div><div class="line">	curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</div><div class="line"></div><div class="line">RUN yum -y install vim lsof wget tar bzip2 unzip vim-enhanced passwd sudo yum-utils hostname net-tools rsync man git make automake cmake patch logrotate python-devel libpng-devel libjpeg-devel pwgen python-pip</div><div class="line"></div><div class="line">RUN mkdir /opt/java &amp;&amp;\</div><div class="line">	wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.tar.gz -P /opt/java</div><div class="line"></div><div class="line">ENV KAFKA_VERSION "0.8.2.2"</div><div class="line"></div><div class="line">RUN mkdir /opt/kafka &amp;&amp;\</div><div class="line">	wget http://apache.fayea.com/kafka/$KAFKA_VERSION/kafka_2.11-$KAFKA_VERSION.tgz -P /opt/kafka</div><div class="line"></div><div class="line">RUN tar zxvf /opt/java/jdk-8u102-linux-x64.tar.gz -C /opt/java &amp;&amp;\</div><div class="line">	JAVA_HOME=/opt/java/jdk1.8.0_102 &amp;&amp;\</div><div class="line">	sed -i "/^PATH/i export JAVA_HOME=$JAVA_HOME" /root/.bash_profile &amp;&amp;\</div><div class="line">	sed -i "s%^PATH.*$%&amp;:$JAVA_HOME/bin%g" /root/.bash_profile &amp;&amp;\</div><div class="line">	source /root/.bash_profile</div><div class="line"></div><div class="line">RUN tar zxvf /opt/kafka/kafka*.tgz -C /opt/kafka &amp;&amp;\</div><div class="line">	sed -i 's/num.partitions.*$/num.partitions=3/g' /opt/kafka/kafka_2.11-$KAFKA_VERSION/config/server.properties</div><div class="line"></div><div class="line">RUN echo "source /root/.bash_profile" &gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "cd /opt/kafka/kafka_2.11-"$KAFKA_VERSION &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	#echo "sed -i 's%zookeeper.connect=.*$%zookeeper.connect=zookeeper:2181%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""ZOOKEEPER_CONNECT"" ] &amp;&amp; sed -i 's%.*zookeeper.connect=.*$%zookeeper.connect='$""ZOOKEEPER_CONNECT'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""BROKER_ID"" ] &amp;&amp; sed -i 's%broker.id=.*$%broker.id='$""BROKER_ID'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""BROKER_PORT"" ] &amp;&amp; sed -i 's%port=.*$%port='$""BROKER_PORT'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "sed -i 's%#advertised.host.name=.*$%advertised.host.name='$""(hostname -i)'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""ADVERTISED_HOST_NAME"" ] &amp;&amp; sed -i 's%.*advertised.host.name=.*$%advertised.host.name='$""ADVERTISED_HOST_NAME'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "sed -i 's%#host.name=.*$%host.name='$""(hostname -i)'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""HOST_NAME"" ] &amp;&amp; sed -i 's%.*host.name=.*$%host.name='$""HOST_NAME'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "delete.topic.enable=true" &gt;&gt; /opt/kafka/kafka_2.11-$KAFKA_VERSION/config/server.properties &amp;&amp;\</div><div class="line">	echo "bin/kafka-server-start.sh config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	chmod a+x /opt/kafka/start.sh</div><div class="line"></div><div class="line">RUN yum install -y nc</div><div class="line"></div><div class="line">EXPOSE 9092</div><div class="line"></div><div class="line">WORKDIR /opt/kafka/kafka_2.11-$KAFKA_VERSION</div><div class="line"></div><div class="line">ENTRYPOINT ["sh", "/opt/kafka/start.sh"]</div></pre></td></tr></table></figure></p>
<p>zookeeper.Dockerfile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">FROM centos:6.6</div><div class="line"></div><div class="line">RUN mkdir /etc/yum.repos.d/backup &amp;&amp;\</div><div class="line">	mv /etc/yum.repos.d/*.repo /etc/yum.repos.d/backup/ &amp;&amp;\</div><div class="line">	curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</div><div class="line"></div><div class="line">RUN yum -y install vim lsof wget tar bzip2 unzip vim-enhanced passwd sudo yum-utils hostname net-tools rsync man git make automake cmake patch logrotate python-devel libpng-devel libjpeg-devel pwgen python-pip</div><div class="line"></div><div class="line">RUN mkdir /opt/java &amp;&amp;\</div><div class="line">	wget --no-check-certificate --no-cookies --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.tar.gz -P /opt/java</div><div class="line"></div><div class="line">RUN tar zxvf /opt/java/jdk-8u102-linux-x64.tar.gz -C /opt/java &amp;&amp;\</div><div class="line">	JAVA_HOME=/opt/java/jdk1.8.0_102 &amp;&amp;\</div><div class="line">	sed -i &quot;/^PATH/i export JAVA_HOME=$JAVA_HOME&quot; /root/.bash_profile &amp;&amp;\</div><div class="line">	sed -i &quot;s%^PATH.*$%&amp;:$JAVA_HOME/bin%g&quot; /root/.bash_profile &amp;&amp;\</div><div class="line">	source /root/.bash_profile</div><div class="line"></div><div class="line">ENV ZOOKEEPER_VERSION &quot;3.4.6&quot;</div><div class="line"></div><div class="line">RUN mkdir /opt/zookeeper &amp;&amp;\</div><div class="line">	wget http://mirror.olnevhost.net/pub/apache/zookeeper/zookeeper-$ZOOKEEPER_VERSION/zookeeper-$ZOOKEEPER_VERSION.tar.gz -P /opt/zookeeper</div><div class="line"></div><div class="line">RUN tar zxvf /opt/zookeeper/zookeeper*.tar.gz -C /opt/zookeeper</div><div class="line"></div><div class="line">RUN echo &quot;source /root/.bash_profile&quot; &gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;cp /opt/zookeeper/zookeeper-&quot;$ZOOKEEPER_VERSION&quot;/conf/zoo_sample.cfg /opt/zookeeper/zookeeper-&quot;$ZOOKEEPER_VERSION&quot;/conf/zoo.cfg&quot; &gt;&gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;[ ! -z $&quot;&quot;ZOOKEEPER_PORT&quot;&quot; ] &amp;&amp; sed -i &apos;s%.*clientPort=.*$%clientPort=&apos;$&quot;&quot;ZOOKEEPER_PORT&apos;&quot;&quot;%g&apos;  /opt/zookeeper/zookeeper-&quot;$ZOOKEEPER_VERSION&quot;/conf/zoo.cfg&quot; &gt;&gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;[ ! -z $&quot;&quot;ZOOKEEPER_ID&quot;&quot; ] &amp;&amp; mkdir -p /tmp/zookeeper &amp;&amp; echo $&quot;&quot;ZOOKEEPER_ID &gt; /tmp/zookeeper/myid&quot; &gt;&gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;[[ ! -z $&quot;&quot;ZOOKEEPER_SERVERS&quot;&quot; ]] &amp;&amp; for server in $&quot;&quot;ZOOKEEPER_SERVERS&quot;&quot;; do echo $&quot;&quot;server&quot;&quot; &gt;&gt; /opt/zookeeper/zookeeper-&quot;$ZOOKEEPER_VERSION&quot;/conf/zoo.cfg; done&quot; &gt;&gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;/opt/zookeeper/zookeeper-$&quot;ZOOKEEPER_VERSION&quot;/bin/zkServer.sh start-foreground&quot; &gt;&gt; /opt/zookeeper/start.sh</div><div class="line"></div><div class="line">RUN yum install -y nc</div><div class="line"></div><div class="line">EXPOSE 2181</div><div class="line"></div><div class="line">WORKDIR /opt/zookeeper/zookeeper-$ZOOKEEPER_VERSION</div><div class="line"></div><div class="line">ENTRYPOINT [&quot;sh&quot;, &quot;/opt/zookeeper/start.sh&quot;]</div></pre></td></tr></table></figure></p>
<p>docker-compose.yml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div></pre></td><td class="code"><pre><div class="line">version: &apos;2.0&apos;</div><div class="line">services:</div><div class="line">  zookeeper0:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: zookeeper.Dockerfile</div><div class="line">    image: jason/zookeeper:3.4.6</div><div class="line">    container_name: zookeeper0</div><div class="line">    hostname: zookeeper0</div><div class="line">    ports:</div><div class="line">      - &quot;2181:2181&quot;</div><div class="line">      - &quot;2888:2888&quot;</div><div class="line">      - &quot;3888:3888&quot;</div><div class="line">    expose:</div><div class="line">      - 2181</div><div class="line">      - 2888</div><div class="line">      - 3888</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_PORT: 2181</div><div class="line">      ZOOKEEPER_ID: 0</div><div class="line">      ZOOKEEPER_SERVERS: server.0=zookeeper0:2888:3888 server.1=zookeeper1:28881:38881 server.2=zookeeper2:28882:38882</div><div class="line">  zookeeper1:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: zookeeper.Dockerfile</div><div class="line">    image: jason/zookeeper:3.4.6</div><div class="line">    container_name: zookeeper1</div><div class="line">    hostname: zookeeper1</div><div class="line">    ports:</div><div class="line">      - &quot;2182:2182&quot;</div><div class="line">      - &quot;28881:28881&quot;</div><div class="line">      - &quot;38881:38881&quot;</div><div class="line">    expose:</div><div class="line">      - 2182</div><div class="line">      - 2888</div><div class="line">      - 3888</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_PORT: 2182</div><div class="line">      ZOOKEEPER_ID: 1</div><div class="line">      ZOOKEEPER_SERVERS: server.0=zookeeper0:2888:3888 server.1=zookeeper1:28881:38881 server.2=zookeeper2:28882:38882</div><div class="line">#    depends_on:</div><div class="line">#      - zookeeper0</div><div class="line">  zookeeper2:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: zookeeper.Dockerfile</div><div class="line">    image: jason/zookeeper:3.4.6</div><div class="line">    container_name: zookeeper2</div><div class="line">    hostname: zookeeper2</div><div class="line">    ports:</div><div class="line">      - &quot;2183:2183&quot;</div><div class="line">      - &quot;28882:28882&quot;</div><div class="line">      - &quot;38882:38882&quot;</div><div class="line">    expose:</div><div class="line">      - 2183</div><div class="line">      - 2888</div><div class="line">      - 3888</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_PORT: 2183</div><div class="line">      ZOOKEEPER_ID: 2</div><div class="line">      ZOOKEEPER_SERVERS: server.0=zookeeper0:2888:3888 server.1=zookeeper1:28881:38881 server.2=zookeeper2:28882:38882</div><div class="line">#    depends_on:</div><div class="line">#        - zookeeper1</div><div class="line">  kafka0:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: kafka.Dockerfile</div><div class="line">    image: jason/kafka:0.8.2.2</div><div class="line">    container_name: kafka0</div><div class="line">    hostname: kafka0</div><div class="line">    ports:</div><div class="line">      - &quot;9092:9092&quot;</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_CONNECT: zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka</div><div class="line">      BROKER_ID: 0</div><div class="line">      BROKER_PORT: 9092</div><div class="line">      ADVERTISED_HOST_NAME: kafka0</div><div class="line">      HOST_NAME: kafka0</div><div class="line">    volumes:</div><div class="line">      - /var/run/docker.sock:/var/run/docker.sock</div><div class="line">    depends_on:</div><div class="line">        - zookeeper0</div><div class="line">        - zookeeper1</div><div class="line">        - zookeeper2</div><div class="line">    expose:</div><div class="line">      - 9092</div><div class="line">#    links:</div><div class="line">#      - zookeeper</div><div class="line">  kafka1:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: kafka.Dockerfile</div><div class="line">    image: jason/kafka:0.8.2.2</div><div class="line">    container_name: kafka1</div><div class="line">    hostname: kafka1</div><div class="line">    ports:</div><div class="line">      - &quot;9093:9093&quot;</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_CONNECT: zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka</div><div class="line">      BROKER_ID: 1</div><div class="line">      BROKER_PORT: 9093</div><div class="line">      ADVERTISED_HOST_NAME: kafka1</div><div class="line">      HOST_NAME: kafka1</div><div class="line">    volumes:</div><div class="line">      - /var/run/docker.sock:/var/run/docker.sock</div><div class="line">    depends_on:</div><div class="line">        - zookeeper0</div><div class="line">        - zookeeper1</div><div class="line">        - zookeeper2</div><div class="line">    expose:</div><div class="line">      - 9093</div><div class="line">#    links:</div><div class="line">#      - zookeeper</div><div class="line">  kafka2:</div><div class="line">    build: .</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: kafka.Dockerfile</div><div class="line">    image: jason/kafka:0.8.2.2</div><div class="line">    container_name: kafka2</div><div class="line">    hostname: kafka2</div><div class="line">    ports:</div><div class="line">      - &quot;9094:9094&quot;</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_CONNECT: zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka</div><div class="line">      BROKER_ID: 2</div><div class="line">      BROKER_PORT: 9094</div><div class="line">      ADVERTISED_HOST_NAME: kafka2</div><div class="line">      HOST_NAME: kafka2</div><div class="line">    volumes:</div><div class="line">      - /var/run/docker.sock:/var/run/docker.sock</div><div class="line">    depends_on:</div><div class="line">        - zookeeper0</div><div class="line">        - zookeeper1</div><div class="line">        - zookeeper2</div><div class="line">    expose:</div><div class="line">      - 9094</div><div class="line">#   links:</div><div class="line">#     - zookeeper</div></pre></td></tr></table></figure></p>
<p>启动docker-compose<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 docker-file]# docker-compose up -d</div></pre></td></tr></table></figure></p>
<p>如果曾经有启动的需要先停止移除在启动<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 docker-file]# docker-compose stop;docker-compose rm -f</div></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 docker-file]# docker ps</div><div class="line">CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                                                                                                      NAMES</div><div class="line">891585b4767a        jason/kafka:0.8.2.2     "sh /opt/kafka/start."   About an hour ago   Up About an hour    9092/tcp, 0.0.0.0:9093-&gt;9093/tcp                                                                           kafka1</div><div class="line">81f90ccb917a        jason/kafka:0.8.2.2     "sh /opt/kafka/start."   About an hour ago   Up About an hour    9092/tcp, 0.0.0.0:9094-&gt;9094/tcp                                                                           kafka2</div><div class="line">2edb39ed0e97        jason/kafka:0.8.2.2     "sh /opt/kafka/start."   About an hour ago   Up About an hour    0.0.0.0:9092-&gt;9092/tcp                                                                                     kafka0</div><div class="line">b21ac8fb0f72        jason/zookeeper:3.4.6   "sh /opt/zookeeper/st"   About an hour ago   Up About an hour    2181/tcp, 2888/tcp, 0.0.0.0:2183-&gt;2183/tcp, 0.0.0.0:28882-&gt;28882/tcp, 3888/tcp, 0.0.0.0:38882-&gt;38882/tcp   zookeeper2</div><div class="line">48f5ada24ff7        jason/zookeeper:3.4.6   "sh /opt/zookeeper/st"   About an hour ago   Up About an hour    0.0.0.0:2181-&gt;2181/tcp, 0.0.0.0:2888-&gt;2888/tcp, 0.0.0.0:3888-&gt;3888/tcp                                     zookeeper0</div><div class="line">d247a8ac6a30        jason/zookeeper:3.4.6   "sh /opt/zookeeper/st"   About an hour ago   Up About an hour    2181/tcp, 2888/tcp, 0.0.0.0:2182-&gt;2182/tcp, 0.0.0.0:28881-&gt;28881/tcp, 3888/tcp, 0.0.0.0:38881-&gt;38881/tcp   zookeeper1</div></pre></td></tr></table></figure>
<p>此时可以进入容器内查看：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker exec -it zookeeper0 bash</div><div class="line">source /root/.bash_profile</div><div class="line">bin/zkCli.sh -server zookeeper0:<span class="number">2181</span></div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[zk: zookeeper0:<span class="number">2182</span>(CONNECTED) <span class="number">0</span>] ls /</div><div class="line">[zookeeper, kafka]</div><div class="line">[zk: zookeeper0:<span class="number">2182</span>(CONNECTED) <span class="number">1</span>] ls /kafka</div><div class="line">[admin, consumers, controller, controller_epoch, brokers, config]</div><div class="line">[zk: zookeeper0:<span class="number">2182</span>(CONNECTED) <span class="number">2</span>] ls /kafka/brokers/ids</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line">[zk: zookeeper0:<span class="number">2182</span>(CONNECTED) <span class="number">3</span>]</div></pre></td></tr></table></figure>
<p>此处注意，因为docker-compose.yml文件里配置的kafka引用zookeeper根目录下的kafka目录，故在写zookeeper的时候要增加/kafka<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 docker-file]# docker exec -it kafka0 bash</div><div class="line">[root@kafka0 kafka_2.11-0.8.2.2]# source /root/.bash_profile</div><div class="line">[root@kafka0 kafka_2.11-0.8.2.2]# bin/kafka-topics.sh --zookeeper zookeeper0:2181/kafka --topic topic1 --create --partitions 3 --replication-factor 1</div><div class="line">Created topic "topic1".</div><div class="line">[root@kafka0 kafka_2.11-0.8.2.2]# bin/kafka-topics.sh --zookeeper zookeeper0:2181/kafka --topic topic1 --describe                                    </div><div class="line">Topic:topic1    PartitionCount:3        ReplicationFactor:1     Configs:</div><div class="line">        Topic: topic1   Partition: 0    Leader: 1       Replicas: 1     Isr: 1</div><div class="line">        Topic: topic1   Partition: 1    Leader: 2       Replicas: 2     Isr: 2</div><div class="line">        Topic: topic1   Partition: 2    Leader: 0       Replicas: 0     Isr: 0</div></pre></td></tr></table></figure></p>
<h3 id="kafka术语"><a href="#kafka术语" class="headerlink" title="kafka术语"></a>kafka术语</h3><h4 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h4><p>Topic,是KAFKA对消息分类的依据;一条消息,必须有一个与之对应的Topic;<br>比如现在又两个Topic,分别是TopicA和TopicB,Producer向TopicA发送一个消息messageA,然后向TopicB发送一个消息messaeB;那么,订阅TopicA的Consumer就会收到消息messageA,订阅TopicB的Consumer就会收到消息messaeB;(每个Consumer可以同时订阅多个Topic,也即是说,同时订阅TopicA和TopicB的Consumer可以收到messageA和messaeB)。<br>同一个Group id的consumers在同一个Topic的同一条消息只能被一个consumer消费，实现了点对点模式，不同Group id的Consumers在同一个Topic上的同一条消息可以同时消费到，则实现了发布订阅模式。通过Consumer的Group id实现了JMS的消息模式</p>
<h4 id="Partition"><a href="#Partition" class="headerlink" title="Partition"></a>Partition</h4><p>每一个Topic可以有多个Partition,这样做是为了提高KAFKA系统的并发能力，每个Partition中按照消息发送的顺序保存着Producer发来的消息,每个消息用ID标识,代表这个消息在改Partition中的偏移量,这样,知道了ID,就可以方便的定位一个消息了;每个新提交过来的消息,被追加到Partition的尾部;如果一个Partition被写满了,就不再追加;(注意,KAFKA不保证不同Partition之间的消息有序保存)</p>
<h4 id="Leader"><a href="#Leader" class="headerlink" title="Leader"></a>Leader</h4><p>Partition中负责消息读写的节点;Leader是从Partition的节点中随机选取的。每个Partition都会在集中的其中一台服务器存在Leader。一个Topic如果有多个Partition，则会有多个Leader。</p>
<h4 id="ReplicationFactor"><a href="#ReplicationFactor" class="headerlink" title="ReplicationFactor"></a>ReplicationFactor</h4><p>一个Partition中复制数据的所有节点,包括已经挂了的;数量不会超过集群中broker的数量</p>
<h4 id="isr"><a href="#isr" class="headerlink" title="isr"></a>isr</h4><p>ReplicationFactor的子集,存活的且和Leader保持同步的节点;leade会维护一个与其基本保持同步的Replica列表，该列表成为ISR（in-sync Replica）.如果一个Follower比leader落后太多，或者超过一段时间未发起数据复制请求（kafka的数据复制是follower的pull形式），则leader将其从ISR中移除</p>
<p>balabala..那么多，来个实例玩玩吧</p>
<p>打开另外一个终端，进入kafka1启动个消费者，此处要注意消费者路径也要指定kafka<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@kafka1 kafka_2.11-0.8.2.2]# bin/kafka-console-consumer.sh --zookeeper zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka --topic topic3 --from-beginning</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@kafka0 kafka_2.11-0.8.2.2]# bin/kafka-console-producer.sh --broker-list kafka0:9092 --topic topic3</div></pre></td></tr></table></figure>
<p>输入hello world</p>
<p>另外一个终端显示<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@kafka1 kafka_2.11-0.8.2.2]# bin/kafka-console-consumer.sh --zookeeper zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka --topic topic3 --from-beginning</div><div class="line">hello world</div></pre></td></tr></table></figure></p>
<p>如果设置topic的时候设置log.cleanup.policy为compact，则消费的消息会被压缩</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/wechat-reward-image.jpg" alt="张洪铭 WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/alipay-reward-image.jpg" alt="张洪铭 Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>


    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/12/13/码云操作/" rel="next" title="用git上传代码到码云">
                <i class="fa fa-chevron-left"></i> 用git上传代码到码云
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/28/spring boot solr/" rel="prev" title="spring boot solr">
                spring boot solr <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        
<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/12/19/docker玩kafka集群/"
           data-title="docker版Kafka集群" data-url="http://yoursite.com/2016/12/19/docker玩kafka集群/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="张洪铭" />
          <p class="site-author-name" itemprop="name">张洪铭</p>
          <p class="site-description motion-element" itemprop="description">人生在勤 勤则不匮</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">35</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#入手centos7"><span class="nav-number">1.</span> <span class="nav-text">入手centos7</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装docker"><span class="nav-number">2.</span> <span class="nav-text">安装docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装docker-compose"><span class="nav-number">3.</span> <span class="nav-text">安装docker-compose</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kafka术语"><span class="nav-number">4.</span> <span class="nav-text">kafka术语</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Topic"><span class="nav-number">4.1.</span> <span class="nav-text">Topic</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Partition"><span class="nav-number">4.2.</span> <span class="nav-text">Partition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Leader"><span class="nav-number">4.3.</span> <span class="nav-text">Leader</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ReplicationFactor"><span class="nav-number">4.4.</span> <span class="nav-text">ReplicationFactor</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#isr"><span class="nav-number">4.5.</span> <span class="nav-text">isr</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张洪铭</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhm8"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
