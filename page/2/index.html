<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  ï»¿<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="äººç”Ÿåœ¨å‹¤ å‹¤åˆ™ä¸åŒ®">
<meta property="og:type" content="website">
<meta property="og:title" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
<meta property="og:description" content="äººç”Ÿåœ¨å‹¤ å‹¤åˆ™ä¸åŒ®">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
<meta name="twitter:description" content="äººç”Ÿåœ¨å‹¤ å‹¤åˆ™ä¸åŒ®">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: 'OFEOJRRO4R',
      apiKey: 'e45796ccb3eeae1fd05f26434d457fb4',
      indexName: 'hexo',
      hits: {"per_page":10},
      labels: {"input_placeholder":"æœç´¢...","hits_empty":"æœªå‘ç°ä¸ ã€Œ${query}ã€ç›¸å…³çš„å†…å®¹","hits_stats":"${hits} æ¡ç›¸å…³æ¡ç›®ï¼Œä½¿ç”¨äº† ${time} æ¯«ç§’"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title> å¼ æ´ªé“­çš„ä¸ªäººåšå®¢ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?7429985a9690d626019a4aae76bf7702";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">å¼ æ´ªé“­çš„ä¸ªäººåšå®¢</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
	  
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/03/flinkæºç 2/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2019/08/03/flinkæºç 2/" itemprop="url">
                  flinkæºç 2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-03T11:30:00+08:00">
                2019-08-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å¤§æ•°æ®/" itemprop="url" rel="index">
                    <span itemprop="name">å¤§æ•°æ®</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2019/08/03/flinkæºç 2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2019/08/03/flinkæºç 2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ ¹æ®ä¸Šç¯‡æ–‡ç« å†…å®¹æ‰©å±•ä¸€ä¸‹chaining demo</p>
<p>é¦–å…ˆå†™ä¸€ä¸ªstreamingçš„ wordcount</p>
<pre><code>public class StreamingChainingDemo {

@Data
@AllArgsConstructor
@NoArgsConstructor
public static class KeyCount{
    private String key;
    private int count;
}

public static void main(String[] args) throws Exception {
    // set up the streaming execution environment

    Configuration configuration= new Configuration(){
        {
            setInteger(&quot;rest.port&quot;,9191);
            setBoolean(&quot;local.start-webserver&quot;,true);
        }
    };
    final StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(configuration);

    env.setParallelism(2).setStreamTimeCharacteristic(TimeCharacteristic.IngestionTime);
    DataStreamSource&lt;String&gt; dataStreamSource = env.socketTextStream(&quot;localhost&quot;, 9999);
    dataStreamSource.flatMap((String line, Collector&lt;KeyCount&gt; out)
    -&gt; {
         Stream.of(line.split(&quot;\\s+&quot;)).forEach(value -&gt; out.collect(new KeyCount(value,1)));
       }
    ).returns(Types.POJO(KeyCount.class))
    .keyBy(new KeySelector&lt;KeyCount, Object&gt;() {
        @Override
        public Object getKey(KeyCount value) throws Exception {
            return value.getKey();
        }
    }).timeWindow(Time.seconds(10)).sum(&quot;count&quot;).print();
    // execute program
    env.execute(&quot;Flink StreamingChainingDemo&quot;);
}
</code></pre><p>}</p>
<p>è¿è¡Œå¦‚ä¸Šä»£ç åæˆ‘ä»¬çœ‹WEB UI<br><img src="https://s2.ax1x.com/2019/08/03/esAc8K.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>å¯ä»¥çœ‹åˆ°keyByæ“ä½œå’Œsinkæ˜¯chainingåœ¨ä¸€èµ·çš„ã€‚<br>å¦‚æœæˆ‘ä»¬åœ¨print()çš„åé¢åŠ ä¸Š.disableChaining()</p>
<p><img src="https://s2.ax1x.com/2019/08/03/esErLQ.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>å¯ä»¥çœ‹åˆ°keyByå’Œsinkæ˜¯forwardçš„å¹¶échainingåœ¨ä¸€èµ·</p>
<p>æ­¤æ—¶æˆ‘ä»¬åœ¨returns(Types.POJO(KeyCount.class))<br>åé¢å¢åŠ .filter(word-&gt; !â€â€.equals(word))<br>å¤§å®¶çŒœflatå’Œfilterä¼šchainingåœ¨ä¸€èµ·å—ï¼Ÿ</p>
<p><img src="https://s2.ax1x.com/2019/08/03/esEfzT.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>yeahï¼Œä½ ç­”å¯¹äº†å—ï¼Ÿflatå’Œfilterä¼šchainingåœ¨ä¸€èµ·ã€‚</p>
<p>è¿™æ—¶ æˆ‘å¼•å…¥å¹¶è¡Œåº¦çš„æ¦‚å¿µï¼š<br>åœ¨.filter(word-&gt; !â€â€.equals(word))<br>åé¢æœºä¸Š.setParallelism(3)</p>
<p>å°±ä¼šå‘ç°flatå’Œfilteræ˜¯Reblanceçš„å…³ç³»<br><img src="https://s2.ax1x.com/2019/08/03/esE7w9.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>StreamOperator æºç è§£æ<br>è¿™ä¸ªæ¥å£ç»§æ‰¿ CheckpointListener, KeyContext, Disposable, Serializable</p>
<p>æä¾›äº†å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<p>ç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼š<br>    open<br>    close<br>    dispose<br>    prepareSnapshotPreBarrier</p>
<p>å®¹é”™ä¸çŠ¶æ€</p>
<pre><code>snapshotState
initializeState
</code></pre><p>ä¸StreamRecordç›¸å…³</p>
<pre><code>setKeyContextElement1
setKeyContextElement2
</code></pre><p>chainç›¸å…³</p>
<pre><code>getChainingStrategy
setChainingStrategy
</code></pre><p>ç›‘æ§ç›¸å…³</p>
<pre><code>getMetricGroup
getOperatorID
</code></pre><p>AbstractStreamOperatorï¼ŒOneInputStreamOperatorä¸TwoInputStreamOperatoræ¥å£ç»§æ‰¿è‡ªStreamOperator</p>
<p>OneInputStreamOperatoræœ‰3ä¸ªæ–¹æ³•</p>
<pre><code>processElement
processWatermark
processLatencyMarker
</code></pre><p>TwoInputStreamOperatoræœ‰6ä¸ªæ–¹æ³•</p>
<pre><code>processElement1
processElement2
processWatermark1
processWatermark2
processLatencyMarker1
processLatencyMarker2
</code></pre><p>AbstractStreamOperator é‡è¦çš„å˜é‡ï¼šåé¢ä¼šå°†å…·ä½“çš„ç”¨æ³•ç”¨å¤„<br>å†³å®šæ˜¯å¦åœ¨ç”ŸæˆJobGraphæ—¶å¯¹ç®—å­è¿›è¡ŒChainingä¼˜åŒ–ï¼š</p>
<pre><code>protected ChainingStrategy chainingStrategy = ChainingStrategy.HEAD; 
</code></pre><p>3ä¸ªä¸çŠ¶æ€ç›¸å…³çš„å˜é‡</p>
<pre><code>private transient AbstractKeyedStateBackend&lt;?&gt; keyedStateBackend;
private transient DefaultKeyedStateStore keyedStateStore;
private transient OperatorStateBackend operatorStateBackend;
</code></pre><p>ç›‘æ§ç›¸å…³çš„å˜é‡</p>
<pre><code>protected transient OperatorMetricGroup metrics;
protected transient LatencyStats latencyStats;
</code></pre><p>æ–¹æ³•ä½œç”¨å’Œçˆ¶ç±»å¤§åŒå°å¼‚æ­¤å¤„ç•¥</p>
<p>AbstractStreamOperatorçš„å­ç±»æŠ½è±¡ç±»AbstractUdfStreamOperator<br>è¿™ä¸ªæŠ½è±¡ç±»åŒæ—¶å®ç°äº†OutputTypeConfigurableæ¥å£å¹¶é‡å†™äº†setOutputTypeæ–¹æ³•è®¾ç½®äº†è¾“å‡ºç±»å‹</p>
<p>æœ€åæˆ‘ä»¬æ¥çœ‹<br>OneInputStreamOperatorè¿™ä¸ªç±»çš„å®ç°ç±»ï¼š</p>
<p>StreamFilterï¼ŒStreamMapä¸StreamFlatMapç®—å­åœ¨å®ç°çš„processElementåˆ†åˆ«è°ƒç”¨ä¼ å…¥çš„FilterFunctionï¼ŒMapFunctionï¼Œ FlatMapFunctionçš„udfå°†elementä¼ åˆ°ä¸‹æ¸¸ã€‚å…¶ä¸­StreamFlatMapç”¨åˆ°äº†TimestampedCollectorï¼Œå®ƒæ˜¯outputçš„ä¸€å±‚å°è£…ï¼Œå°†timestampåŠ å…¥åˆ°StreamRecordä¸­å‘é€åˆ°ä¸‹æ¸¸ã€‚</p>
<p>StreamGroupedReduceä¸StreamGroupedFoldç®—å­ç›¸ä¼¼çš„ç‚¹æ˜¯éƒ½æ¶‰åŠåˆ°äº†æ“ä½œçŠ¶æ€, æ‰€ä»¥åœ¨è¦†ç›–openæ–¹æ³•æ—¶é€šè¿‡åˆ›å»ºä¸€ä¸ªçŠ¶æ€çš„æè¿°ç¬¦ä»¥åŠè°ƒç”¨AbstractStreamOperatorå®ç°çš„getPartitionedStateæ–¹æ³•è·å–äº†ä¸€ä¸ªstateBackendçš„æ“ä½œå¥æŸ„ã€‚åœ¨processElementæ–¹æ³•ä¸­å€ŸåŠ©è¿™ä¸ªå¥æŸ„è·å–å½“å‰çŠ¶æ€å€¼ï¼Œåœ¨ç”¨UDFå°†æ–°çš„å…ƒç´ èšåˆè¿›å»å¹¶æ›´æ–°çŠ¶æ€å€¼ï¼Œæœ€åè¾“å‡ºåˆ°ä¸‹æ¸¸ã€‚ä¸åŒçš„æ˜¯Foldçš„è¾“å‡ºç±»å‹å¯èƒ½ä¸ä¸€æ ·ï¼ˆæ‰€ä»¥å®ç°äº†OutputTypeConfigurableæ¥å£çš„setOutputTypeæ–¹æ³•ï¼‰ï¼Œå¹¶ä¸”æœ‰åˆå§‹å€¼ã€‚</p>
<p>ProcessOperatorï¼Œ LegacyKeyedProcessOperatorï¼ˆ@Deprecatedï¼‰<br>ProcessFunctionæ˜¯æ¯”è¾ƒçµæ´»çš„UDFï¼Œå…è®¸ç”¨æˆ·é€šè¿‡åœ¨processElementçš„æ—¶å€™å¯ä»¥é€šè¿‡ä¼ å…¥çš„ctxæ“ä½œTimerService<br>æ³¨å†ŒProcessingTimeTimerå’ŒEventTimeTimerï¼Œå¹¶ä¸”é€šè¿‡å®ç°æ–¹æ³•onTimerå°±å¯ä»¥åœ¨Timerè¢«è§¦å‘çš„æ—¶å€™æ‰§è¡Œå›è°ƒçš„é€»è¾‘ã€‚</p>
<p>StreamSinkï¼š<br>SimpleContextï¼Œå¯ä»¥è·å–processingTimeï¼Œwatermarkå’Œelementçš„æ—¶é—´æˆ³ã€‚<br>GenericWriteAheadSinkæä¾›äº†ä¸€ä¸ªå¯ä»¥è¢«å®ç°ä¸ºExactly onceçš„sinkçš„æŠ½è±¡ç±»<br>AsyncWaitOperatoræä¾›äº†å¼‚æ­¥å¤„ç†çš„èƒ½åŠ›ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ç®—å­ï¼Œå¯¹å…ƒç´ çš„å¤„ç†å’Œå¤‡ä»½æ¢å¤éƒ½æ¯”è¾ƒç‰¹æ®Šã€‚elementçš„è¾“å‡ºé€šè¿‡ä¸€ä¸ªEmitterå¯¹è±¡æ¥å®ç°<br>TimestampsAndPeriodicWatermarksOperatorï¼ŒTimestampsAndPunctuatedWatermarksOperatoré€šè¿‡TimestampAssigneræå–timestampå¹¶ç”ŸæŒ‰ç…§è§„åˆ™ç”Ÿæˆwatermark</p>
<p>å’ŒTwoInputStreamOperatorè¿™ä¸ªç±»çš„å®ç°ç±»<br>CoStreamMapï¼Œ CoStreamFlatMapåŸºæœ¬ä¸å•æµçš„é€»è¾‘æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œåªæ˜¯é’ˆå¯¹ä¸¤ä¸ªæµçš„Functionåšç±»ä¼¼çš„å¤„ç†ã€‚<br>IntervalJoinOperatorå¯¹åŒæµçš„å…ƒç´ æ ¹æ®æä¾›çš„ProcessJoinFunctionåšå†…è¿æ¥ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ éƒ½æœ‰å¤±æ•ˆæ—¶é—´ã€‚åœ¨processElementæ–¹æ³•ä¸­ï¼Œæ¯å½“ä¸€ä¸ªæµçš„å…ƒç´ åˆ°è¾¾ï¼Œä¼šå°†å®ƒåŠ å…¥å¯¹åº”æµçš„bufferï¼Œå¹¶ä¸”éå†å¦ä¸€ä¸ªæµçš„bufferæ‰¾åˆ°æ‰€æœ‰joinçš„é€‰é¡¹ã€‚æœ€åå†æ ¹æ®å¤±æ•ˆæ—¶é—´æ³¨å†Œä¸€ä¸ªçŠ¶æ€æ¸…ç†çš„Timeré˜²æ­¢bufferæ— é™å¢é•¿ã€‚</p>
<p>CoBroadcastWithKeyedOperatorå’ŒCoBroadcastWithNonKeyedOperatoræä¾›äº†å¯¹(Keyed)BroadcastProcessFunctionçš„æ”¯æŒï¼Œå’ŒCoProcessæœ‰ä¸€äº›ç±»ä¼¼ï¼Œåªæ˜¯Broadcastçš„Streamåªæœ‰è¯»æƒé™ï¼Œæ²¡æœ‰å†™æƒé™ã€‚å¹¶ä¸”å¯ä»¥é€šè¿‡contextç›´æ¥è·å¾—BroadcastState</p>
<p>CoProcessOperatorå’ŒKeyedCoProcessOperatoræœ¬è´¨ä¸Šä¸å•æµçš„å¤„ç†ä¹Ÿæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯æä¾›äº†åŒæµä¹‹é—´å…±äº«çŠ¶æ€çš„å¯èƒ½ã€‚CoProcessOperatorä¹Ÿè¢«ç”¨æ¥å®ç°NonWindowJoin</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/02/flinkæºç 1/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2019/08/02/flinkæºç 1/" itemprop="url">
                  flinkæºç 1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-02T20:30:00+08:00">
                2019-08-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/å¤§æ•°æ®/" itemprop="url" rel="index">
                    <span itemprop="name">å¤§æ•°æ®</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2019/08/02/flinkæºç 1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2019/08/02/flinkæºç 1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>nc -lk 9000<br> bin/flink run examples/streaming/SocketWindowWordCount.jar â€“hostname localhost â€“port 9000</p>
<p>ç¼–è¯‘flink<br>git clone <a href="https://github.com/apache/flink.git" target="_blank" rel="external">https://github.com/apache/flink.git</a><br>cd flink<br>mvn clean package -DskipTests # this will take up to 10 minutes</p>
<p>Flinkæºç é˜…è¯»ï¼š<br>ä»è¯»å–æ–‡ä»¶å¼€å§‹ï¼š<br>ä¾‹å¦‚env.readFileStream<br>å…±æœ‰å¦‚ä¸‹DataSourceï¼š</p>
<pre><code>fromElements
fromElements
fromCollection
fromCollection
fromCollection
fromCollection
fromParallelCollection
fromParallelCollection
fromParallelCollection
readTextFile
readTextFile
readFile
readFile
readFile
readFileStream
readFile
socketTextStream
socketTextStream
socketTextStream
socketTextStream
socketTextStream
createInput
createInput
createInput
createFileInput
addSource
addSource
addSource
addSource

public DataStream&lt;String&gt; readFileStream(String filePath, long intervalMillis, FileMonitoringFunction.WatchType watchType) {
    DataStream&lt;Tuple3&lt;String, Long, Long&gt;&gt; source = addSource(new FileMonitoringFunction(
            filePath, intervalMillis, watchType), &quot;Read File Stream source&quot;);

    return source.flatMap(new FileReadFunction());
}
</code></pre><p>ç¬¬ä¸‰ä¸ªå‚æ•°åˆ†ä¸ºï¼š</p>
<pre><code>ONLY_NEW_FILES, // Only new files will be processed. ä»…å¤„ç†æ–°å¢æ–‡ä»¶
REPROCESS_WITH_APPENDED, // When some files are appended, all contents of the files will be processed. å½“æ–‡ä»¶å†…å®¹å¢åŠ äº†ä¹‹åä¼šé‡æ–°å¤„ç†æ•´ä¸ªæ–‡ä»¶ã€‚
PROCESS_ONLY_APPENDED // When some files are appended, only appended  contents will be processed. å½“æ–‡ä»¶å†…å®¹å¢åŠ äº†ä¹‹ååªå¤„ç†æ–°å¢åŠ å†…å®¹
</code></pre><p>FileMonitoringFunction ç»§æ‰¿äºSourceFunction<br>æ¥å£SourceFunctionæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š<br>run  ä¸šåŠ¡é€»è¾‘æ–¹æ³•<br>cancel  å–æ¶ˆæ•°æ®æºçš„æ•°æ®äº§ç”Ÿ<br>FileMonitoringFunctionå®ç°äº†è¿™ä¸¤ä¸ªæ–¹æ³•</p>
<pre><code>@Override
public void run(SourceContext&lt;Tuple3&lt;String, Long, Long&gt;&gt; ctx) throws Exception {
    FileSystem fileSystem = FileSystem.get(new URI(path));

    while (isRunning) {
        List&lt;String&gt; files = listNewFiles(fileSystem);//åˆ—å‡ºæ–°å¢æ–‡ä»¶
        for (String filePath : files) {
            if (watchType == WatchType.ONLY_NEW_FILES
                    || watchType == WatchType.REPROCESS_WITH_APPENDED) {
                ctx.collect(new Tuple3&lt;String, Long, Long&gt;(filePath, 0L, -1L));//ä»å¤´åˆ°å°¾æ”¶é›†æ•°æ®
                offsetOfFiles.put(filePath, -1L);
            } else if (watchType == WatchType.PROCESS_ONLY_APPENDED) {
                long offset = 0;
                long fileSize = fileSystem.getFileStatus(new Path(filePath)).getLen();
                if (offsetOfFiles.containsKey(filePath)) {
                    offset = offsetOfFiles.get(filePath);
                }
                //åªæ”¶é›†æ–°å¢éƒ¨åˆ†æ•°æ®ï¼Œå³ä»ä¸Šæ¬¡è·å–çš„offsetåˆ°è¿™æ¬¡æ–‡ä»¶æœ«å°¾filesize
                ctx.collect(new Tuple3&lt;String, Long, Long&gt;(filePath, offset, fileSize));
                offsetOfFiles.put(filePath, fileSize);

                LOG.info(&quot;File processed: {}, {}, {}&quot;, filePath, offset, fileSize);
            }
        }

        Thread.sleep(interval);
    }
}

private List&lt;String&gt; listNewFiles(FileSystem fileSystem) throws IOException {
    List&lt;String&gt; files = new ArrayList&lt;String&gt;();

    FileStatus[] statuses = fileSystem.listStatus(new Path(path));//åˆ—å‡ºç»™å®šè·¯å¾„ä¸­æ–‡ä»¶/ç›®å½•çš„çŠ¶æ€ï¼ˆå¦‚æœè·¯å¾„ä¸ºä¸€ä¸ªç›®å½•ã€‚)
    //FileStatus æœ‰getLenï¼ŒgetBlockSize,getReplication,getModificationTimeï¼ŒgetAccessTimeï¼ŒisDir,getPathæ–¹æ³•

    if (statuses == null) {
        LOG.warn(&quot;Path does not exist: {}&quot;, path);
    } else {
        for (FileStatus status : statuses) {
            Path filePath = status.getPath();
            String fileName = filePath.getName();
            long modificationTime = status.getModificationTime();

            if (!isFiltered(fileName, modificationTime)) {
                //å½“WatchType ä¸ºONLY_NEW_FILESå¹¶ä¸”modificationTimesè¿™ä¸ªmapåŒ…å«è¯»å–çš„æ–‡ä»¶æ—¶å³æ–°å¢æ–‡ä»¶
                // æˆ–æ–‡ä»¶ä¿®æ”¹æ—¶é—´å¤§äºmodificationTimeæ—¶ä¸ºtrue
                files.add(filePath.toString());
                modificationTimes.put(fileName, modificationTime);
            }
        }
    }

    return files;
}
</code></pre><p>æ¥ä¸‹æ¥ä¸ºä»¬çœ‹canalæ–¹æ³•åªåšäº†ä¸€ä»¶äº‹æŒºç›´running</p>
<pre><code>@Override
public void cancel() {
        isRunning = false;
}
</code></pre><p>å¯¹FileMonitoringFunctionçš„å®ç°æ¸…æ¥šä¹‹åï¼Œå›åˆ°StreamExecutionEnvironmentä¸­ï¼Œçœ‹addSourceæ–¹æ³•ã€‚</p>
<pre><code>public &lt;OUT&gt; DataStreamSource&lt;OUT&gt; addSource(SourceFunction&lt;OUT&gt; function, String sourceName) {
    return addSource(function, sourceName, null);
}

public &lt;OUT&gt; DataStreamSource&lt;OUT&gt; addSource(SourceFunction&lt;OUT&gt; function, String sourceName, TypeInformation&lt;OUT&gt; typeInfo) {

    if (function instanceof ResultTypeQueryable) {
        //å¦‚æœä¼ å…¥çš„functionå®ç°äº†ResultTypeQueryableæ¥å£, åˆ™ç›´æ¥é€šè¿‡æ¥å£è·å–
        typeInfo = ((ResultTypeQueryable&lt;OUT&gt;) function).getProducedType();
    }
    if (typeInfo == null) {
        try {
            typeInfo = TypeExtractor.createTypeInfo(
                    SourceFunction.class,
                    function.getClass(), 0, null, null);//è¿™ä¸ªæ–¹æ³•æœ‰ç‚¹é•¿ï¼Œå®é™…æ˜¯typeInfoä¸ºç©ºé€šè¿‡åå°„æœºåˆ¶æ¥æå–typeInfo
        } catch (final InvalidTypesException e) {
            //è·å–å¤±è´¥è¿”å›MissingTypeInfoå®ä¾‹ï¼Œé‡Œé¢ä¸¤ä¸ªå˜é‡ï¼šfunctionNameï¼ŒtypeException
            typeInfo = (TypeInformation&lt;OUT&gt;) new MissingTypeInfo(sourceName, e);
        }
    }
    //æ ¹æ®functionæ˜¯å®ç°äº†ParallelSourceFunctionæ¥åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªå¹¶è¡Œæ•°æ®æºèŠ‚ç‚¹
    boolean isParallel = function instanceof ParallelSourceFunction;
    //é—­åŒ…æ¸…ç†, å¯å‡å°‘åºåˆ—åŒ–å†…å®¹, ä»¥åŠé˜²æ­¢åºåˆ—åŒ–å‡ºé”™
    clean(function);
    //åˆå§‹åŒ–ä¸€ä¸ªChainingStrategy.HEADèŠ‚ç‚¹
    final StreamSource&lt;OUT, ?&gt; sourceOperator = new StreamSource&lt;&gt;(function);
    return new DataStreamSource&lt;&gt;(this, typeInfo, sourceOperator, isParallel, sourceName);//è¿”å›DataStreamSource
}
</code></pre><p>ç”±äºFileMonitoringFunctionç»§æ‰¿çš„æ˜¯SourceFunctionä¸æ˜¯    ParallelSourceFunction æ•…isParallelä¸ºflaseï¼Œå³å¹¶è¡Œåº¦ä¸º1<br>ä¸Šé¢çœ‹åˆ°ChainingStrategyè¿™ä¸ªæšä¸¾ç±»å®é™…æœ‰ä¸‰ä¸ªå±æ€§ï¼š<br>ALWAYS  è¡¨ç¤ºå°½å¯èƒ½çš„ä¸å‰åoperator chaining<br>NEVER  è¡¨ç¤ºä¸ä¼šchaining<br>HEAD  è¡¨ç¤ºåªä¼šchainingåé¢ã€‚å…·ä½“åé¢è¯¦ç»†è®²è§£å…¶ä½œç”¨</p>
<p>æ¥ä¸‹æ¥çœ‹æœ€åä¸€ä¸ªå‡½æ•°DataStreamSource</p>
<pre><code>public DataStreamSource(StreamExecutionEnvironment environment,
        TypeInformation&lt;T&gt; outTypeInfo, StreamSource&lt;T, ?&gt; operator,
        boolean isParallel, String sourceName) {
    super(environment, new SourceTransformation&lt;&gt;(sourceName, operator, outTypeInfo, environment.getParallelism()));

    this.isParallel = isParallel;
    if (!isParallel) {
        setParallelism(1);
    }
}

protected SingleOutputStreamOperator(StreamExecutionEnvironment environment, Transformation&lt;T&gt; transformation) {
    super(environment, transformation);
}

public DataStream(StreamExecutionEnvironment environment, Transformation&lt;T&gt; transformation) {
    this.environment = Preconditions.checkNotNull(environment, &quot;Execution Environment must not be null.&quot;);
    this.transformation = Preconditions.checkNotNull(transformation, &quot;Stream Transformation must not be null.&quot;);
}
</code></pre><p>åé¢å°±æ˜¯ä¸€ç³»åˆ—transform åé¢ç« èŠ‚è¯¦ç»†ä»‹ç»</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/25/Machine learning Artificial Neural Network/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/25/Machine learning Artificial Neural Network/" itemprop="url">
                  æœºå™¨å­¦ä¹ -ç¥ç»ç½‘ç»œ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-25T15:36:00+08:00">
                2018-08-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœºå™¨å­¦ä¹ /" itemprop="url" rel="index">
                    <span itemprop="name">æœºå™¨å­¦ä¹ </span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/08/25/Machine learning Artificial Neural Network/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/08/25/Machine learning Artificial Neural Network/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä»€ä¹ˆæ˜¯äººå·¥ç¥ç»ç½‘ç»œæ¨¡å‹<br>äººå·¥ç¥ç»ç½‘ç»œ(Artificial Neural Network, ANN)æ²¡æœ‰ä¸€ä¸ªä¸¥æ ¼çš„æ­£å¼å®šä¹‰ã€‚å®ƒçš„åŸºæœ¬ç‰¹ç‚¹ï¼Œæ˜¯è¯•å›¾æ¨¡ä»¿å¤§è„‘çš„ç¥ç»å…ƒä¹‹é—´ä¼ é€’ï¼Œå¤„ç†ä¿¡æ¯çš„æ¨¡å¼ã€‚</p>
<p>ä¸€ä¸ªè®¡ç®—æ¨¡å‹ï¼Œè¦è¢«ç§°ä¸ºä¸ºç¥ç»ç½‘ç»œï¼Œé€šå¸¸éœ€è¦å¤§é‡å½¼æ­¤è¿æ¥çš„èŠ‚ç‚¹ ï¼ˆä¹Ÿç§° â€˜ç¥ç»å…ƒâ€™ï¼‰ï¼Œå¹¶ä¸”å…·å¤‡ä¸¤ä¸ªç‰¹æ€§ï¼š<br>æ¯ä¸ªç¥ç»å…ƒï¼Œé€šè¿‡æŸç§ç‰¹å®šçš„è¾“å‡ºå‡½æ•° ï¼ˆä¹Ÿå«æ¿€åŠ±å‡½æ•° activation functionï¼‰ï¼Œè®¡ç®—å¤„ç†æ¥è‡ªå…¶å®ƒç›¸é‚»ç¥ç»å…ƒçš„åŠ æƒè¾“å…¥å€¼<br>ç¥ç»å…ƒä¹‹é—´çš„ä¿¡æ¯ä¼ é€’çš„å¼ºåº¦ï¼Œç”¨æ‰€è°“åŠ æƒå€¼æ¥å®šä¹‰ï¼Œç®—æ³•ä¼šä¸æ–­è‡ªæˆ‘å­¦ä¹ ï¼Œè°ƒæ•´è¿™ä¸ªåŠ æƒå€¼<br>æ€»ç»“ï¼šç¥ç»ç½‘ç»œç®—æ³•çš„æ ¸å¿ƒå°±æ˜¯ï¼šè®¡ç®—ã€è¿æ¥ã€è¯„ä¼°ã€çº é”™ã€å­¦ä¹ </p>
<h4 id="ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼š"><a href="#ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼š" class="headerlink" title="ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼š"></a><strong>ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼š</strong></h4><h6 id="å‰å‘ç½‘ç»œ"><a href="#å‰å‘ç½‘ç»œ" class="headerlink" title="å‰å‘ç½‘ç»œ"></a><strong>å‰å‘ç½‘ç»œ</strong></h6><p>ç½‘ç»œä¸­å„ä¸ªç¥ç»å…ƒæ¥å—å‰ä¸€çº§çš„è¾“å…¥ï¼Œå¹¶è¾“å‡ºåˆ°ä¸‹ä¸€çº§ï¼Œç½‘ç»œä¸­æ²¡æœ‰åé¦ˆï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæœ‰å‘æ— ç¯è·¯å›¾è¡¨ç¤ºã€‚è¿™ç§ç½‘ç»œå®ç°ä¿¡å·ä»è¾“å…¥ç©ºé—´åˆ°è¾“å‡ºç©ºé—´çš„å˜æ¢ï¼Œå®ƒçš„ä¿¡æ¯å¤„ç†èƒ½åŠ›æ¥è‡ªäºç®€å•éçº¿æ€§å‡½æ•°çš„å¤šæ¬¡å¤åˆã€‚ç½‘ç»œç»“æ„ç®€å•ï¼Œæ˜“äºå®ç°ã€‚åä¼ ç½‘ç»œæ˜¯ä¸€ç§å…¸å‹çš„å‰å‘ç½‘ç»œã€‚</p>
<h6 id="åé¦ˆç½‘ç»œ"><a href="#åé¦ˆç½‘ç»œ" class="headerlink" title="åé¦ˆç½‘ç»œ"></a><strong>åé¦ˆç½‘ç»œ</strong></h6><p>ç½‘ç»œå†…ç¥ç»å…ƒé—´æœ‰åé¦ˆï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæ— å‘çš„å®Œå¤‡å›¾è¡¨ç¤ºã€‚è¿™ç§ç¥ç»ç½‘ç»œçš„ä¿¡æ¯å¤„ç†æ˜¯çŠ¶æ€çš„å˜æ¢ï¼Œå¯ä»¥ç”¨åŠ¨åŠ›å­¦ç³»ç»Ÿç†è®ºå¤„ç†ã€‚ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸è”æƒ³è®°å¿†åŠŸèƒ½æœ‰å¯†åˆ‡å…³ç³»ã€‚Hopfieldç½‘ç»œã€æ³¢è€³å…¹æ›¼æœºå‡å±äºè¿™ç§ç±»å‹ã€‚</p>
<h4 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a><strong>æ¿€æ´»å‡½æ•°</strong></h4><p>ç”¨äºå¤„ç†å¤æ‚çš„éçº¿æ€§åˆ†ç±»æƒ…å†µã€‚æ¯”çº¿æ€§å›å½’ã€logisticå›å½’çµæ´»ã€‚è®­ç»ƒçš„æ—¶å€™æ³¨æ„è¿‡æ‹Ÿåˆã€‚<br>éçº¿æ€§æ¿€æ´»å‡½æ•°<br>Sigmoid<br>ğ‘“(ğ‘¥)=1/(1+expâ¡(âˆ’ğ‘¥))<br>ç‰¹ç‚¹ï¼š<br>å½“xè¶‹è¿‘è´Ÿæ— ç©·æ—¶ï¼Œyè¶‹è¿‘äº0ï¼›è¶‹è¿‘äºæ­£æ— ç©·æ—¶ï¼Œyè¶‹è¿‘äº1ï¼›<br>xè¶…å‡º[-6,6]çš„èŒƒå›´åï¼Œå‡½æ•°å€¼åŸºæœ¬ä¸Šæ²¡æœ‰å˜åŒ–ï¼Œå€¼éå¸¸æ¥è¿‘0æˆ–è€…1<br>è¯¥å‡½æ•°çš„å€¼åŸŸèŒƒå›´é™åˆ¶åœ¨(0,1)ä¹‹é—´ï¼Œè¿™æ ·sigmoidå‡½æ•°å°±èƒ½ä¸ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒè”ç³»èµ·æ¥äº†ã€‚<br>ğ‘“^â€² (ğ‘¥)=ğ‘“(ğ‘¥)(1âˆ’ğ‘“(ğ‘¥))</p>
<h4 id="åŒæ›²æ­£åˆ‡"><a href="#åŒæ›²æ­£åˆ‡" class="headerlink" title="åŒæ›²æ­£åˆ‡"></a><strong>åŒæ›²æ­£åˆ‡</strong></h4><p>tanhâ¡(ğ‘¥)=(ğ‘’^ğ‘¥âˆ’ğ‘’^(âˆ’ğ‘¥))/(ğ‘’^ğ‘¥+ğ‘’^(âˆ’ğ‘¥) )<br>ç‰¹ç‚¹ï¼š<br>å½“xè¶‹è¿‘è´Ÿæ— ç©·æ—¶ï¼Œyè¶‹è¿‘äº-1ï¼›è¶‹è¿‘äºæ­£æ— ç©·æ—¶ï¼Œyè¶‹è¿‘äº1ï¼›<br>xè¶…å‡º[-3,3]çš„èŒƒå›´åï¼Œå‡½æ•°å€¼åŸºæœ¬ä¸Šæ²¡æœ‰å˜åŒ–ï¼Œå€¼éå¸¸æ¥è¿‘-1æˆ–è€…1<br>è¯¥å‡½æ•°çš„å€¼åŸŸèŒƒå›´é™åˆ¶åœ¨(-1,1)ä¹‹é—´<br>tanh^â€² (ğ‘¥)=1âˆ’tanh(x)^2</p>
<h4 id="ä¿®æ­£çº¿æ€§å•å…ƒRectifier-Linear-Unitsï¼ˆReLUï¼‰"><a href="#ä¿®æ­£çº¿æ€§å•å…ƒRectifier-Linear-Unitsï¼ˆReLUï¼‰" class="headerlink" title="ä¿®æ­£çº¿æ€§å•å…ƒRectifier Linear Unitsï¼ˆReLUï¼‰"></a><strong>ä¿®æ­£çº¿æ€§å•å…ƒRectifier Linear Unitsï¼ˆReLUï¼‰</strong></h4><p>ğ‘“(ğ‘¥)=maxâ¡(0,ğ‘¥)<br>ç‰¹ç‚¹ï¼š<br>åªæœ‰æœ‰ä¸€åŠéšå«å±‚æ˜¯å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œå…¶ä½™éƒ½æ˜¯è¾“å‡ºä¸º0<br>ä¸ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ï¼ˆå³åœ¨sigmoidæ¥è¿‘é¥±å’ŒåŒºæ—¶ï¼Œå¯¼æ•°è¶‹äº0ï¼Œè¿™ç§æƒ…å†µä¼šé€ æˆä¿¡æ¯ä¸¢å¤±ï¼‰<br>åªéœ€æ¯”è¾ƒã€ä¹˜åŠ è¿ç®—ï¼Œå› æ­¤è®¡ç®—æ–¹ä¾¿ï¼Œè®¡ç®—é€Ÿåº¦å¿«ï¼ŒåŠ é€Ÿäº†ç½‘ç»œçš„è®­ç»ƒ<br>ReLUæ¯”sigmoidæ›´æ¥è¿‘ç”Ÿç‰©å­¦çš„æ¿€æ´»æ¨¡å‹<br>è¿˜æœ‰ä¸€äº›æ”¹è¿›æˆ–çš„å˜ä½“</p>
<h4 id="Softplus"><a href="#Softplus" class="headerlink" title="Softplus"></a><strong>Softplus</strong></h4><p>ğ‘“(ğ‘¥)=logâ¡(1+ğ‘’^ğ‘¥ )<br>ç‰¹ç‚¹ï¼š<br>xè¶‹äºè´Ÿæ— ç©·æ—¶ï¼Œsoftplusè¶‹äº0ï¼›xè¶‹äºæ­£æ— ç©·æ—¶ï¼Œ softplusè¶‹äºx<br>å®ƒæ˜¯ReLUçš„å¹³æ»‘ç‰ˆ<br>å®ƒæ˜¯sigmoidçš„åŸå‡½æ•°</p>
<h3 id="æŸå¤±å‡½æ•°"><a href="#æŸå¤±å‡½æ•°" class="headerlink" title="æŸå¤±å‡½æ•°"></a><strong>æŸå¤±å‡½æ•°</strong></h3><p>ç”¨äºå›å½’ä¸­çš„å‡æ–¹æŸå¤±ï¼š<br>ğ¸=1/2 (ğ‘¦âˆ’ğ‘¦ Ì‚ )^2<br>ç”¨äºåˆ†ç±»ä¸­çš„äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼š<br>ğ¸=âˆ’âˆ‘â–’ã€–ğ‘¦<em>ğ‘˜ ğ‘™ğ‘œğ‘”((ğ‘¦</em>ğ‘˜ ) Ì‚ )â€ â€œ ã€—<br>k=1,2,â€¦,mè¡¨ç¤ºmç§ç±»åˆ«ã€‚åœ¨è¿çº¦é¢„æµ‹ä¸­m=2</p>
<p>åŸºäº Anaconda çš„å®‰è£…<br>å®‰è£…tensorflow<br>å»ºç«‹ä¸€ä¸ª conda è®¡ç®—ç¯å¢ƒåå­—å«tensorflow:</p>
<h1 id="Python-2-7"><a href="#Python-2-7" class="headerlink" title="Python 2.7"></a>Python 2.7</h1><p>$ conda create -n tensorflow python=2.7</p>
<h1 id="Python-3-4"><a href="#Python-3-4" class="headerlink" title="Python 3.4"></a>Python 3.4</h1><p>$ conda create -n tensorflow python=3.4</p>
<p>activate tensorflow</p>
<p>å®‰è£…tensorflow<br>conda install â€“channel <a href="https://conda.anaconda.org/conda-forge" target="_blank" rel="external">https://conda.anaconda.org/conda-forge</a> tensorflow</p>
<p>import tensorflow as tf<br>é€€å‡ºpython3ç¯å¢ƒæˆ–å½“ä½ ä¸ç”¨ TensorFlow çš„æ—¶å€™,å…³é—­ç¯å¢ƒ:<br>(tensorflow)$  deactivate<br>$  # Your prompt should change back</p>
<p>windowsä¸‹å®‰è£…<br>å‡çº§pip<br>python -m pip install â€“upgrade pip<br>å®‰è£…tensorflow<br>pip3 install â€“upgrade <a href="https://storage.googleapis.com/tensorflow/windows/cpu/tensorflow-0.12.0-cp35-cp35m-win_amd64.whl" target="_blank" rel="external">https://storage.googleapis.com/tensorflow/windows/cpu/tensorflow-0.12.0-cp35-cp35m-win_amd64.whl</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/18/Install TensorFlow/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/18/Install TensorFlow/" itemprop="url">
                  TensorFlow å®‰è£…ä½¿ç”¨
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-18T11:30:00+08:00">
                2018-08-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœºå™¨å­¦ä¹ /" itemprop="url" rel="index">
                    <span itemprop="name">æœºå™¨å­¦ä¹ </span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/08/18/Install TensorFlow/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/08/18/Install TensorFlow/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="åŸºäºAnacondaçš„Tensorflow"><a href="#åŸºäºAnacondaçš„Tensorflow" class="headerlink" title="åŸºäºAnacondaçš„Tensorflow"></a>åŸºäºAnacondaçš„Tensorflow</h2><h3 id="å®‰è£…Anaconda"><a href="#å®‰è£…Anaconda" class="headerlink" title="å®‰è£…Anaconda"></a>å®‰è£…Anaconda</h3><p>æ ¹æ®å®˜ç½‘é€‰æ‹©åŸºäºä¸åŒçš„pythonç‰ˆæœ¬å®‰è£…ï¼š<br><a href="https://www.anaconda.com/download/#windows" target="_blank" rel="external">https://www.anaconda.com/download/#windows</a></p>
<p>åšä¸»é€‰æ‹©Python 3.6 versionï¼Œwindows 64bit</p>
<p>å®‰è£…å®Œæˆåéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œæ ¹ç›®å½•å’ŒScriptsç›®å½•åŠ å…¥åˆ°Pathä¸‹é¢<br>G:\ProgramData\Anaconda3;G:\ProgramData\Anaconda3\Scripts</p>
<p>1.æ£€æµ‹anacondaç¯å¢ƒæ˜¯å¦å®‰è£…æˆåŠŸï¼šconda â€“version<br>2.æ£€æµ‹ç›®å‰å®‰è£…äº†å“ªäº›ç¯å¢ƒå˜é‡ï¼šconda info â€“envs</p>
<p>3.å®‰è£…pythonç‰ˆæœ¬ï¼ˆåšä¸»é€‰æ‹©3.5ï¼‰ï¼šconda create â€“name tensorflow python=3.5<br>å®‰è£…åæ˜¯3.5.6<br>4.æ¿€æ´»tensflowçš„ç¯å¢ƒï¼šactivate tensorflow<br>5.æ£€æµ‹tensflowçš„ç¯å¢ƒæ·»åŠ åˆ°äº†Anacondaé‡Œé¢ï¼šconda info â€“envs<br><img src="http://oh6ybr0jg.bkt.clouddn.com/TENSORFLOW_ENV.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>6.å®‰è£…tensorflow gruç‰ˆæœ¬<br>pip install â€“ignore-installed â€“upgrade tensorflow-gpu</p>
<p>å®‰è£…å…¶ä»–ç»„ä»¶ï¼š<br>pip install pandas<br>conda install scikit-learn<br>conda install matplotlib</p>
<p>IDEæƒ³è¦ä½¿ç”¨tensorflow éœ€è¦åˆ¶å®štensorflowçš„pythonç‰ˆæœ¬<br><img src="http://oh6ybr0jg.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20180901134100.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/16/Mathematical  Random Forest/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/08/16/Mathematical  Random Forest/" itemprop="url">
                  æœºå™¨å­¦ä¹ -éšæœºæ£®æ—
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-16T09:30:00+08:00">
                2018-08-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœºå™¨å­¦ä¹ /" itemprop="url" rel="index">
                    <span itemprop="name">æœºå™¨å­¦ä¹ </span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/08/16/Mathematical  Random Forest/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/08/16/Mathematical  Random Forest/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>sklearn.ensemble.RandomForestClassifier</p>
<ul>
<li><strong>n_estimators</strong> : integer, optional (default=10)<br> æ£®æ—é‡Œï¼ˆå†³ç­–ï¼‰æ ‘çš„æ•°ç›®</li>
<li><strong>criterion</strong> : string, optional (default=â€giniâ€)<br> è¡¡é‡åˆ†è£‚è´¨é‡çš„æ€§èƒ½ï¼ˆå‡½æ•°ï¼‰ã€‚ å—æ”¯æŒçš„æ ‡å‡†æ˜¯åŸºå°¼ä¸çº¯åº¦çš„â€giniâ€,å’Œä¿¡æ¯å¢ç›Šçš„â€entropyâ€ï¼ˆç†µï¼‰ã€‚<br>æ³¨æ„ï¼šè¿™ä¸ªå‚æ•°æ˜¯ç‰¹å®šæ ‘çš„</li>
<li><p><strong>max_features</strong> : int, float, string or None, optional (default=â€autoâ€)<br> é€‰æ‹©æœ€é€‚å±æ€§æ—¶åˆ’åˆ†çš„ç‰¹å¾ä¸èƒ½è¶…è¿‡æ­¤å€¼:</p>
<pre><code>å¦‚æœæ˜¯intï¼Œå°±è¦è€ƒè™‘æ¯ä¸€æ¬¡åˆ†å‰²å¤„çš„max_featureç‰¹å¾
å¦‚æœæ˜¯floatï¼Œé‚£ä¹ˆmax_featureså°±æ˜¯ä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œé‚£ä¹ˆï¼ˆmax_feature*n_featuresï¼‰ç‰¹å¾æ•´æ•°å€¼æ˜¯åœ¨æ¯ä¸ªåˆ†å‰²å¤„è€ƒè™‘çš„ã€‚
å¦‚æœæ˜¯autoï¼Œé‚£ä¹ˆmax_features=sqrt(n_features)ï¼Œå³n_featuresçš„å¹³æ–¹æ ¹å€¼ã€‚
å¦‚æœæ˜¯log2ï¼Œé‚£ä¹ˆmax_features=log2(n_features)
å¦‚æœæ˜¯None,é‚£ä¹ˆmax_features=n_features
</code></pre><p>æ³¨æ„ï¼šå¯»æ‰¾åˆ†å‰²ç‚¹ä¸ä¼šåœæ­¢ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å°‘ä¸€ä¸ªæœ‰æ•ˆçš„èŠ‚ç‚¹åˆ’åˆ†åŒºï¼Œå³ä½¿å®ƒéœ€è¦æœ‰æ•ˆæ£€æŸ¥è¶…è¿‡max_featuresçš„ç‰¹å¾ã€‚</p>
</li>
<li><p><strong>max_depth</strong> : integer or None, optional (default=None)<br>ï¼ˆå†³ç­–ï¼‰æ ‘çš„æœ€å¤§æ·±åº¦ã€‚å¦‚æœå€¼ä¸ºNoneï¼Œé‚£ä¹ˆä¼šæ‰©å±•èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰€æœ‰çš„å¶å­æ˜¯çº¯å‡€çš„ï¼Œæˆ–è€…ç›´åˆ°æ‰€æœ‰å¶å­åŒ…å«å°‘äºmin_sample_splitçš„æ ·æœ¬ã€‚</p>
</li>
<li><p><strong>min_samples_split</strong> : int, float, optional (default=2)<br> æ ¹æ®å±æ€§åˆ’åˆ†èŠ‚ç‚¹æ—¶ï¼Œæ¯ä¸ªåˆ’åˆ†æœ€å°‘çš„æ ·æœ¬æ•°ã€‚</p>
<pre><code>å¦‚æœä¸ºintï¼Œé‚£ä¹ˆè€ƒè™‘min_samples_splitä½œä¸ºæœ€å°çš„æ•°å­—ã€‚
å¦‚æœä¸ºfloatï¼Œé‚£ä¹ˆmin_samples_splitæ˜¯ä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œå¹¶ä¸”æŠŠceil(min_samples_split*n_samples)æ˜¯æ¯ä¸€ä¸ªåˆ†å‰²æœ€å°çš„æ ·æœ¬æ•°é‡ã€‚
</code></pre><p> åœ¨ç‰ˆæœ¬0.18ä¸­æ›´æ”¹ï¼šä¸ºç™¾åˆ†æ¯”æ·»åŠ æµ®ç‚¹å€¼ã€‚<br> å¶å­èŠ‚ç‚¹æœ€å°‘çš„æ ·æœ¬æ•°ã€‚</p>
<pre><code>å¦‚æœä¸ºintï¼Œé‚£ä¹ˆè€ƒè™‘min_samples_leafä½œä¸ºæœ€å°çš„æ•°å­—ã€‚
å¦‚æœä¸ºfloatï¼Œé‚£ä¹ˆmin_samples_leafä¸ºä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œå¹¶ä¸”ceil(min_samples_leaf*n_samples)æ˜¯æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€å°æ ·æœ¬æ•°é‡ã€‚
</code></pre><p> åœ¨ç‰ˆæœ¬0.18ä¸­æ›´æ”¹ï¼šä¸ºç™¾åˆ†æ¯”æ·»åŠ æµ®ç‚¹å€¼ã€‚</p>
</li>
<li><strong>min_weight_fraction_leaf</strong> : float, optional (default=0.)<br> ä¸€ä¸ªå¶å­èŠ‚ç‚¹æ‰€éœ€è¦çš„æƒé‡æ€»å’Œï¼ˆæ‰€æœ‰çš„è¾“å…¥æ ·æœ¬ï¼‰çš„æœ€å°åŠ æƒåˆ†æ•°ã€‚å½“sample_weightæ²¡æœ‰æä¾›æ—¶ï¼Œæ ·æœ¬å…·æœ‰ç›¸åŒçš„æƒé‡</li>
<li><strong>max_leaf_nodes</strong> : int or None, optional (default=None)<br> å¶å­æ ‘çš„æœ€å¤§æ ·æœ¬æ•°ã€‚<br> ä»¥æœ€ä¼˜çš„æ–¹æ³•ä½¿ç”¨max_leaf_nodesæ¥ç”Ÿé•¿æ ‘ã€‚æœ€å¥½çš„èŠ‚ç‚¹è¢«å®šä¹‰ä¸ºä¸çº¯åº¦ä¸Šçš„ç›¸å¯¹å‡å°‘ã€‚å¦‚æœä¸ºNone,é‚£ä¹ˆä¸é™åˆ¶å¶å­èŠ‚ç‚¹çš„æ•°é‡ã€‚</li>
<li><strong>min_impurity_split</strong> : float,<br> æ ‘æ—©æœŸç”Ÿé•¿çš„é˜ˆå€¼ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„ä¸çº¯åº¦è¶…è¿‡é˜ˆå€¼é‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°†ä¼šåˆ†è£‚ï¼Œå¦åˆ™å®ƒè¿˜æ˜¯ä¸€ç‰‡å¶å­ã€‚<br> è‡ª0.19ç‰ˆä»¥åä¸æ¨èä½¿ç”¨ï¼šmin_impurity_splitå·²è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯0.19ä¸­çš„min_impurity_decreaseã€‚min_impurity_splitå°†åœ¨0.21ä¸­è¢«åˆ é™¤ã€‚ ä½¿ç”¨min_impurity_decrease</li>
<li><strong>min_impurity_decrease</strong> : float, optional (default=0.)<br> å¦‚æœèŠ‚ç‚¹çš„åˆ†è£‚å¯¼è‡´çš„ä¸çº¯åº¦çš„ä¸‹é™ç¨‹åº¦å¤§äºæˆ–è€…ç­‰äºè¿™ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°†ä¼šè¢«åˆ†è£‚ã€‚<br> ä¸çº¯åº¦åŠ æƒå‡å°‘æ–¹ç¨‹å¼å¦‚ä¸‹ï¼š<br> N_t / N <em> (impurity - N_t_R / N_t </em> right_impurity<pre><code>- N_t_L / N_t * left_impurity)
</code></pre> Næ˜¯æ ·æœ¬æ€»çš„æ•°é‡ï¼ŒN_tæ˜¯å½“å‰èŠ‚ç‚¹å¤„çš„æ ·æœ¬æ•°é‡ï¼ŒN_t_Læ˜¯å·¦å­©å­èŠ‚ç‚¹æ ·æœ¬çš„æ•°é‡,è¿˜æœ‰N_t_Ræ˜¯å³å­©å­èŠ‚ç‚¹çš„æ ·æœ¬æ•°é‡ã€‚<br> Nï¼ŒN_tï¼ŒN_t_Rå’ŒN_t_Lå…¨éƒ¨æ˜¯æŒ‡åŠ æƒæ€»å’Œï¼Œå¦‚æœsample_weighté€šè¿‡çš„è¯ã€‚<br> 0.19ç‰ˆæœ¬æ–°åŠ çš„å‚æ•°ã€‚</li>
<li><strong>bootstrap</strong> : boolean, optional (default=True)<br> å»ºç«‹å†³ç­–æ ‘æ—¶ï¼Œæ˜¯å¦ä½¿ç”¨æœ‰æ”¾å›æŠ½æ ·ã€‚</li>
<li><strong>oob_score</strong> : bool (default=False)<br> æ˜¯å¦ä½¿ç”¨è¢‹å¤–æ ·æœ¬æ¥ä¼°è®¡æ³›åŒ–ç²¾åº¦ã€‚</li>
<li><strong>n_jobs</strong> : integer, optional (default=1)<br> ç”¨äºæ‹Ÿåˆå’Œé¢„æµ‹çš„å¹¶è¡Œè¿è¡Œçš„å·¥ä½œï¼ˆä½œä¸šï¼‰æ•°é‡ã€‚å¦‚æœå€¼ä¸º-1ï¼Œé‚£ä¹ˆå·¥ä½œæ•°é‡è¢«è®¾ç½®ä¸ºæ ¸çš„æ•°é‡ã€‚</li>
<li><strong>random_state</strong> : int, RandomState instance or None, optional (default=None)<br> RandomStateIf intï¼Œrandom_stateæ˜¯éšæœºæ•°ç”Ÿæˆå™¨ä½¿ç”¨çš„ç§å­;<br> å¦‚æœæ˜¯RandomStateå®ä¾‹ï¼Œrandom_stateå°±æ˜¯éšæœºæ•°ç”Ÿæˆå™¨;<br> å¦‚æœä¸ºNoneï¼Œåˆ™éšæœºæ•°ç”Ÿæˆå™¨æ˜¯np.randomä½¿ç”¨çš„RandomStateå®ä¾‹ã€‚</li>
<li><strong>verbose</strong> : int, optional (default=0)<br> æ§åˆ¶å†³ç­–æ ‘å»ºç«‹è¿‡ç¨‹çš„å†—ä½™åº¦ã€‚</li>
<li><strong>warm_start</strong> : bool, optional (default=False)<br> å½“è¢«è®¾ç½®ä¸ºTrueæ—¶ï¼Œé‡æ–°ä½¿ç”¨ä¹‹å‰å‘¼å«çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨æ¥ç»™å…¨ä½“æ‹Ÿåˆå’Œæ·»åŠ æ›´å¤šçš„ä¼°è®¡å™¨ï¼Œåä¹‹ï¼Œä»…ä»…åªæ˜¯ä¸ºäº†æ‹Ÿåˆä¸€ä¸ªå…¨æ–°çš„æ£®æ—ã€‚</li>
<li>class_weight : dict, list of dicts, â€œbalancedâ€,<br> â€œbalanced_subsampleâ€ æˆ–è€…None,ï¼ˆé»˜è®¤å€¼ä¸ºNoneï¼‰,ä¸æ ¼å¼{class_label: weight}ç›¸å…³è”çš„ç±»çš„å¯é€‰çš„æƒå€¼ã€‚å¦‚æœæ²¡æœ‰ç»™å€¼ï¼Œæ‰€æœ‰çš„ç±»åˆ°éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæƒå€¼ã€‚å¯¹äºå¤šè¾“å‡ºé—®é¢˜ï¼Œä¸€ä¸ªå­—å…¸åº    åˆ—å¯ä»¥æŒ‰ç…§yçš„åˆ—çš„é¡ºåˆ©è¢«æä¾›ã€‚<br> è¯·æ³¨æ„ï¼Œå¯¹äºå¤šè¾“å‡ºï¼ˆåŒ…æ‹¬å¤šæ ‡ç­¾ï¼‰ï¼Œå…¶æƒå€¼åº”è¯¥è¢«å®šä¹‰ä¸ºå®ƒè‡ªå·±å­—å…¸çš„æ¯ä¸€åˆ—çš„æ¯ä¸€ä¸ªç±»ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå››ç±»å¤šæ ‡ç­¾åˆ†ç±»ï¼Œæƒå€¼åº”è¯¥å¦‚[{0: 1, 1: 1}, {0: 1, 1: 5}, {0: 1, 1: 1}, {0: 1, 1: 1}] è¿™æ ·ï¼Œè€Œä¸æ˜¯[{1:1}, {2:5}, {3:1}, {4:1}].è¿™æ ·ã€‚<br> â€œbalancedâ€æ¨¡å¼ä½¿ç”¨yçš„å€¼æ¥è‡ªåŠ¨çš„è°ƒæ•´æƒå€¼ï¼Œä¸è¾“å…¥æ•°æ®ä¸­ç±»åˆ«é¢‘ç‡æˆåæ¯”ï¼Œå¦‚ï¼š<pre><code>n_samples / (n_classes * np.bincount(y))
</code></pre> â€œbalanced_subsampleâ€æ¨¡å¼å’Œâ€balancedâ€ç›¸åŒï¼Œé™¤äº†æƒå€¼æ˜¯åŸºäºæ¯æ£µæˆé•¿æ ‘æœ‰æ”¾å›æŠ½æ ·è®¡ç®—çš„ã€‚<br> å¯¹äºå¤šè¾“å‡ºï¼Œyçš„æ¯åˆ—æƒå€¼å°†ç›¸ä¹˜ã€‚<br> è¯·æ³¨æ„ï¼Œå¦‚æœæŒ‡å®šäº†sample_weight,è¿™äº›æƒå€¼å°†ä¼šå’Œsample_weightç›¸ä¹˜ï¼ˆé€šè¿‡æ‹Ÿåˆæ–¹æ³•ä¼ é€’ï¼‰ã€‚</li>
</ul>
<p>Attributes:    å±æ€§</p>
<ul>
<li><strong>estimators_</strong> :  å†³ç­–æ ‘åˆ†ç±»å™¨çš„åºåˆ—<br> æ‹Ÿåˆçš„å­ä¼°è®¡å™¨çš„é›†åˆã€‚</li>
<li><strong>classes_</strong> :  æ•°ç»„ç»´åº¦=[n_classes]çš„æ•°ç»„æˆ–è€…ä¸€ä¸ªè¿™æ ·æ•°ç»„çš„åºåˆ—ã€‚<br> ç±»åˆ«æ ‡ç­¾ï¼ˆå•ä¸€è¾“å‡ºé—®é¢˜ï¼‰ï¼Œæˆ–è€…ç±»åˆ«æ ‡ç­¾çš„æ•°ç»„åºåˆ—ï¼ˆå¤šè¾“å‡ºé—®é¢˜ï¼‰ã€‚</li>
<li><strong>n<em>classes</em></strong> : int or list<br> ç±»åˆ«çš„æ•°é‡ï¼ˆå•è¾“å‡ºé—®é¢˜ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªåºåˆ—ï¼ŒåŒ…å«æ¯ä¸€ä¸ªè¾“å‡ºçš„ç±»åˆ«æ•°é‡ï¼ˆå¤šè¾“å‡ºé—®é¢˜ï¼‰</li>
<li><strong>n<em>features</em></strong> : int<br> æ‰§è¡Œæ‹Ÿåˆæ—¶çš„ç‰¹å¾æ•°é‡ã€‚</li>
<li><strong>n<em>outputs</em></strong> : int<br> æ‰§è¡Œæ‹Ÿåˆæ—¶çš„è¾“å‡ºæ•°é‡ã€‚</li>
<li><strong>feature<em>importances</em></strong> : array of shape = [n_features]<br> ç‰¹å¾çš„é‡è¦æ€§ï¼ˆå€¼è¶Šé«˜ï¼Œç‰¹å¾è¶Šé‡è¦ï¼‰</li>
<li><strong>oob<em>score</em></strong> : float<br>ä½¿ç”¨è¢‹å¤–ä¼°è®¡è·å¾—çš„è®­ç»ƒæ•°æ®é›†çš„å¾—åˆ†ã€‚</li>
<li><strong>oob_decision<em>function</em></strong> :ç»´åº¦=[n_samples,n_classes]çš„æ•°ç»„<br> åœ¨è®­ç»ƒé›†ä¸Šç”¨è¢‹å¤–ä¼°è®¡è®¡ç®—çš„å†³ç­–å‡½æ•°ã€‚å¦‚æœn_estimatorså¾ˆå°çš„è¯ï¼Œé‚£ä¹ˆåœ¨æœ‰æ”¾å›æŠ½æ ·ä¸­ï¼Œä¸€ä¸ªæ•°æ®ç‚¹ä¹Ÿä¸ä¼šè¢«å¿½ç•¥æ˜¯å¯èƒ½çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œoob_decision<em>function</em> å¯èƒ½åŒ…æ‹¬NaNã€‚</li>
</ul>
<p>å‚æ•°çš„é»˜è®¤å€¼æ§åˆ¶å†³ç­–æ ‘çš„å¤§å°ï¼ˆä¾‹å¦‚ï¼Œmax_depthï¼Œï¼Œmin_samples_leafç­‰ç­‰ï¼‰ï¼Œå¯¼è‡´å®Œå…¨çš„ç”Ÿé•¿å’Œåœ¨æŸäº›æ•°æ®é›†ä¸Šå¯èƒ½éå¸¸å¤§çš„æœªä¿®å‰ªçš„æ ‘ã€‚ä¸ºäº†é™ä½å†…å®¹æ¶ˆè€—ï¼Œå†³ç­–æ ‘çš„å¤æ‚åº¦å’Œå¤§å°åº”è¯¥é€šè¿‡è®¾ç½®è¿™äº›å‚æ•°å€¼æ¥æ§åˆ¶ã€‚<br>è¿™äº›ç‰¹å¾æ€»æ˜¯åœ¨æ¯ä¸ªåˆ†å‰²ä¸­éšæœºæ’åˆ—ã€‚ å› æ­¤ï¼Œå³ä½¿ä½¿ç”¨ç›¸åŒçš„è®­ç»ƒæ•°æ®ï¼Œmax_features = n_featureså’Œbootstrap = Falseï¼Œå¦‚æœåœ¨æœç´¢æœ€ä½³åˆ†å‰²æœŸé—´æ‰€åˆ—ä¸¾çš„è‹¥å¹²åˆ†å‰²çš„å‡†åˆ™çš„æ”¹è¿›æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆæ‰¾åˆ°çš„æœ€ä½³åˆ†å‰²ç‚¹å¯èƒ½ä¼šä¸åŒã€‚ ä¸ºäº†åœ¨æ‹Ÿåˆè¿‡ç¨‹ä¸­è·å¾—ä¸€ä¸ªç¡®å®šçš„è¡Œä¸ºï¼Œrandom_stateå°†ä¸å¾—ä¸è¢«ä¿®æ­£ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/27/Mathematical regression gradient descent/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/27/Mathematical regression gradient descent/" itemprop="url">
                  æœºå™¨å­¦ä¹ -æ¢¯åº¦ä¸‹é™
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-27T09:30:00+08:00">
                2018-04-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœºå™¨å­¦ä¹ /" itemprop="url" rel="index">
                    <span itemprop="name">æœºå™¨å­¦ä¹ </span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/04/27/Mathematical regression gradient descent/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/27/Mathematical regression gradient descent/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="æ¢¯åº¦ä¸‹é™ï¼š"><a href="#æ¢¯åº¦ä¸‹é™ï¼š" class="headerlink" title="æ¢¯åº¦ä¸‹é™ï¼š"></a>æ¢¯åº¦ä¸‹é™ï¼š</h3><p>æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•ï¼ˆBatch Gradient Descentï¼Œç®€ç§°BGDï¼‰<br>    ä¼˜ç‚¹ï¼šå…¨å±€æœ€ä¼˜è§£ï¼›æ˜“äºå¹¶è¡Œå®ç°ï¼›<br>ã€€ã€€ç¼ºç‚¹ï¼šå½“æ ·æœ¬æ•°ç›®å¾ˆå¤šæ—¶ï¼Œè®­ç»ƒè¿‡ç¨‹ä¼šå¾ˆæ…¢ã€‚<br>éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼ˆStochastic Gradient Descentï¼Œç®€ç§°SGDï¼‰<br>    ä¼˜ç‚¹ï¼šè®­ç»ƒé€Ÿåº¦å¿«ï¼›è¿­ä»£æ¬¡æ•°å°‘<br>    ç¼ºç‚¹ï¼šå‡†ç¡®åº¦ä¸‹é™ï¼Œå¹¶ä¸æ˜¯å…¨å±€æœ€ä¼˜ï¼›ä¸æ˜“äºå¹¶è¡Œå®ç°ã€‚<br>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆMBGDï¼‰<br>å¦‚æœæŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼Œæ¢¯åº¦ä¸‹é™æ³•å¾—åˆ°çš„è§£å°±ä¸€å®šæ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚</p>
<h4 id="å‡¸å‡¹å‡½æ•°ï¼š"><a href="#å‡¸å‡¹å‡½æ•°ï¼š" class="headerlink" title="å‡¸å‡¹å‡½æ•°ï¼š"></a>å‡¸å‡¹å‡½æ•°ï¼š</h4><p>è®¾f(x)åœ¨åŒºé—´Dä¸Šè¿ç»­ï¼Œå¦‚æœå¯¹Dä¸Šä»»æ„ä¸¤ç‚¹aã€bæ’æœ‰<br>fï¼ˆï¼ˆa+bï¼‰/2ï¼‰&lt;(f(a)+f(b))/2<br>é‚£ä¹ˆç§°f(x)åœ¨Dä¸Šçš„å›¾å½¢æ˜¯ï¼ˆå‘ä¸Šï¼‰å‡¹çš„ï¼ˆæˆ–å‡¹å¼§ï¼‰ï¼›å¦‚æœæ’æœ‰<br>fï¼ˆï¼ˆa+bï¼‰/2ï¼‰&gt;(f(a)+f(b))/2<br>é‚£ä¹ˆç§°f(x)åœ¨Dä¸Šçš„å›¾å½¢æ˜¯ï¼ˆå‘ä¸Šï¼‰å‡¸çš„ï¼ˆæˆ–å‡¸å¼§ï¼‰</p>
<h3 id="æ¢¯åº¦ä¸‹é™ç›¸å…³æ¦‚å¿µï¼š"><a href="#æ¢¯åº¦ä¸‹é™ç›¸å…³æ¦‚å¿µï¼š" class="headerlink" title="æ¢¯åº¦ä¸‹é™ç›¸å…³æ¦‚å¿µï¼š"></a>æ¢¯åº¦ä¸‹é™ç›¸å…³æ¦‚å¿µï¼š</h3><ol>
<li>æ­¥é•¿ï¼ˆLearning rateï¼‰ï¼šæ­¥é•¿å†³å®šäº†åœ¨æ¢¯åº¦ä¸‹é™è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ­¥æ²¿æ¢¯åº¦è´Ÿæ–¹å‘å‰è¿›çš„é•¿åº¦ã€‚ç”¨ä¸Šé¢ä¸‹å±±çš„ä¾‹å­ï¼Œæ­¥é•¿å°±æ˜¯åœ¨å½“å‰è¿™ä¸€æ­¥æ‰€åœ¨ä½ç½®æ²¿ç€æœ€é™¡å³­æœ€æ˜“ä¸‹å±±çš„ä½ç½®èµ°çš„é‚£ä¸€æ­¥çš„é•¿åº¦ã€‚</li>
</ol>
<p>2.ç‰¹å¾ï¼ˆfeatureï¼‰ï¼šæŒ‡çš„æ˜¯æ ·æœ¬ä¸­è¾“å…¥éƒ¨åˆ†ï¼Œæ¯”å¦‚2ä¸ªå•ç‰¹å¾çš„æ ·æœ¬ï¼ˆx(0),y(0)ï¼‰,ï¼ˆx(1),y(1)ï¼‰ï¼ˆx(0),y(0)ï¼‰,ï¼ˆx(1),y(1)ï¼‰,åˆ™ç¬¬ä¸€ä¸ªæ ·æœ¬ç‰¹å¾ä¸ºx(0)x(0)ï¼Œç¬¬ä¸€ä¸ªæ ·æœ¬è¾“å‡ºä¸ºy(0)y(0)ã€‚</p>
<ol>
<li><p>å‡è®¾å‡½æ•°ï¼ˆhypothesis functionï¼‰ï¼šåœ¨ç›‘ç£å­¦ä¹ ä¸­ï¼Œä¸ºäº†æ‹Ÿåˆè¾“å…¥æ ·æœ¬ï¼Œè€Œä½¿ç”¨çš„å‡è®¾å‡½æ•°ï¼Œè®°ä¸ºhÎ¸(x)hÎ¸(x)ã€‚æ¯”å¦‚å¯¹äºå•ä¸ªç‰¹å¾çš„mä¸ªæ ·æœ¬ï¼ˆx(i),y(i)ï¼‰(i=1,2,â€¦m)ï¼ˆx(i),y(i)ï¼‰(i=1,2,â€¦m),å¯ä»¥é‡‡ç”¨æ‹Ÿåˆå‡½æ•°å¦‚ä¸‹ï¼š hÎ¸(x)=Î¸0+Î¸1xhÎ¸(x)=Î¸0+Î¸1xã€‚</p>
</li>
<li><p>æŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰ï¼šä¸ºäº†è¯„ä¼°æ¨¡å‹æ‹Ÿåˆçš„å¥½åï¼Œé€šå¸¸ç”¨æŸå¤±å‡½æ•°æ¥åº¦é‡æ‹Ÿåˆçš„ç¨‹åº¦ã€‚æŸå¤±å‡½æ•°æå°åŒ–ï¼Œæ„å‘³ç€æ‹Ÿåˆç¨‹åº¦æœ€å¥½ï¼Œå¯¹åº”çš„æ¨¡å‹å‚æ•°å³ä¸ºæœ€ä¼˜å‚æ•°ã€‚åœ¨çº¿æ€§å›å½’ä¸­ï¼ŒæŸå¤±å‡½æ•°é€šå¸¸ä¸ºæ ·æœ¬è¾“å‡ºå’Œå‡è®¾å‡½æ•°çš„å·®å–å¹³æ–¹ã€‚æ¯”å¦‚å¯¹äºmä¸ªæ ·æœ¬ï¼ˆxi,yiï¼‰(i=1,2,â€¦m)ï¼ˆxi,yiï¼‰(i=1,2,â€¦m),é‡‡ç”¨çº¿æ€§å›å½’ï¼ŒæŸå¤±å‡½æ•°ä¸ºï¼š</p>
<pre><code>J(Î¸0,Î¸1)=âˆ‘i=1m(hÎ¸(xi)âˆ’yi)2J(Î¸0,Î¸1)=âˆ‘i=1m(hÎ¸(xi)âˆ’yi)2
</code></pre><p>å…¶ä¸­xixiè¡¨ç¤ºç¬¬iä¸ªæ ·æœ¬ç‰¹å¾ï¼Œyiyiè¡¨ç¤ºç¬¬iä¸ªæ ·æœ¬å¯¹åº”çš„è¾“å‡ºï¼ŒhÎ¸(xi)hÎ¸(xi)ä¸ºå‡è®¾å‡½æ•°ã€‚
ã€€ã€€ã€€ã€€</p>
</li>
</ol>
<h3 id="å±€éƒ¨åŠ æƒå›å½’"><a href="#å±€éƒ¨åŠ æƒå›å½’" class="headerlink" title="å±€éƒ¨åŠ æƒå›å½’"></a>å±€éƒ¨åŠ æƒå›å½’</h3><p>ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯åœ¨å…ˆæ‹Ÿåˆå‡ºä¸€æ¡æ›²çº¿ï¼Œç„¶åå†ç”¨è¿™ä¸ªæ›²çº¿å»é¢„æµ‹éœ€è¦é¢„æµ‹çš„ç‚¹ã€‚(æºè‡ªç™¾åº¦)<br>ä¸ºä»€ä¹ˆæ”¹è¿›è¦ç”¨åŠ æƒå›å½’å‘¢ï¼Ÿ å¾ˆç®€å•ï¼Œå› ä¸ºéçº¿æ€§æ‹Ÿåˆå‡ºç›´çº¿è¯¯å·®ä¼šå¾ˆå¤§ï¼Œè¿™é‡Œçš„å±€éƒ¨åŠ æƒç±»ä¼¼äºknnç®—æ³•çš„æƒé‡ï¼Œå³è·ç¦»ä¸­å¿ƒç‚¹è¶Šè¿‘çš„æƒé‡è¶Šå¤§ï¼Œå¯¹æ‹Ÿåˆæ›²çº¿çš„å½±å“ä¹Ÿå°±è¶Šå¤§ï¼Œæ‰€ä»¥ä¹Ÿæœ‰äº†å±€éƒ¨åŠ æƒè¿™ä¸€åè¯</p>
<p>å‚è€ƒæ–‡çŒ®ï¼š<br><a href="https://blog.csdn.net/Gentle_Guan/article/details/76586689?locationNum=8&amp;fps=1" target="_blank" rel="external">https://blog.csdn.net/Gentle_Guan/article/details/76586689?locationNum=8&amp;fps=1</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/08/Mathematical Feature processing of logistic regression model/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/04/08/Mathematical Feature processing of logistic regression model/" itemprop="url">
                  æœºå™¨å­¦ä¹ -é€»è¾‘å›å½’æ¨¡å‹ç‰¹å¾å¤„ç†
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-08T09:30:00+08:00">
                2018-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœºå™¨å­¦ä¹ /" itemprop="url" rel="index">
                    <span itemprop="name">æœºå™¨å­¦ä¹ </span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/04/08/Mathematical Feature processing of logistic regression model/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/08/Mathematical Feature processing of logistic regression model/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å¦‚æœæœ‰å¼‚å¸¸å€¼ï¼Œä½¿ç”¨æå¤§-æå°å½’ä¸€åŒ–æˆ–å‡å€¼-æ ‡å‡†å·®å½’ä¸€åŒ–ï¼Œè®¡ç®—ä¹‹å‰éœ€è¦å°†æç«¯å€¼æ’é™¤åœ¨å¤–ã€‚<br>ä¾‹å¦‚ï¼š<br>xâ€™=xâˆ’min/ maxâˆ’min<br>è®¡ç®—maxä¸minæ—¶éœ€è¦ç”¨P1ä¸P99æ¥ä»£æ›¿ã€‚æ–°ç”Ÿæˆçš„å€¼å¦‚æœè¶…è¿‡1ç”¨1è¡¨ç¤ºï¼Œå¦‚æœå°äº0 ç”¨0è¡¨ç¤º</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/27/Mathematical regression /">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/27/Mathematical regression /" itemprop="url">
                  æœºå™¨å­¦ä¹ -å›å½’ç®—æ³•å®ä¾‹
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-27T09:30:00+08:00">
                2018-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æœºå™¨å­¦ä¹ /" itemprop="url" rel="index">
                    <span itemprop="name">æœºå™¨å­¦ä¹ </span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/03/27/Mathematical regression /#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/27/Mathematical regression /" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="æ¦‚å¿µæ¢³ç†ï¼š"><a href="#æ¦‚å¿µæ¢³ç†ï¼š" class="headerlink" title="æ¦‚å¿µæ¢³ç†ï¼š"></a>æ¦‚å¿µæ¢³ç†ï¼š</h2><p>æ•°å­¦æœŸæœ›ï¼š<br>åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ï¼Œæ•°å­¦æœŸæœ›(mean)ï¼ˆæˆ–å‡å€¼ï¼Œäº¦ç®€ç§°æœŸæœ›ï¼‰æ˜¯è¯•éªŒä¸­æ¯æ¬¡å¯èƒ½ç»“æœçš„æ¦‚ç‡ä¹˜ä»¥å…¶ç»“æœçš„æ€»å’Œï¼Œæ˜¯æœ€åŸºæœ¬çš„æ•°å­¦ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒåæ˜ éšæœºå˜é‡å¹³å‡å–å€¼çš„å¤§å°</p>
<p>æ–¹å·®ï¼š<br>ï¼ˆvariance)æ˜¯åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡æ–¹å·®è¡¡é‡éšæœºå˜é‡æˆ–ä¸€ç»„æ•°æ®æ—¶ç¦»æ•£ç¨‹åº¦çš„åº¦é‡ã€‚æ¦‚ç‡è®ºä¸­æ–¹å·®ç”¨æ¥åº¦é‡éšæœºå˜é‡å’Œå…¶æ•°å­¦æœŸæœ›ï¼ˆå³å‡å€¼ï¼‰ä¹‹é—´çš„åç¦»ç¨‹åº¦ã€‚ç»Ÿè®¡ä¸­çš„æ–¹å·®ï¼ˆæ ·æœ¬æ–¹å·®ï¼‰æ˜¯æ¯ä¸ªæ ·æœ¬å€¼ä¸å…¨ä½“æ ·æœ¬å€¼çš„å¹³å‡æ•°ä¹‹å·®çš„å¹³æ–¹å€¼çš„å¹³å‡æ•°ã€‚åœ¨è®¸å¤šå®é™…é—®é¢˜ä¸­ï¼Œç ”ç©¶æ–¹å·®å³åç¦»ç¨‹åº¦æœ‰ç€é‡è¦æ„ä¹‰ã€‚</p>
<p>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š<br>åœ¨æ•°å­¦ä¸­ï¼Œè¿ç»­å‹éšæœºå˜é‡çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆåœ¨ä¸è‡³äºæ··æ·†æ—¶å¯ä»¥ç®€ç§°ä¸ºå¯†åº¦å‡½æ•°ï¼‰æ˜¯ä¸€ä¸ªæè¿°è¿™ä¸ªéšæœºå˜é‡çš„è¾“å‡ºå€¼ï¼Œåœ¨æŸä¸ªç¡®å®šçš„å–å€¼ç‚¹é™„è¿‘çš„å¯èƒ½æ€§çš„å‡½æ•°ã€‚è€Œéšæœºå˜é‡çš„å–å€¼è½åœ¨æŸä¸ªåŒºåŸŸä¹‹å†…çš„æ¦‚ç‡åˆ™ä¸ºæ¦‚ç‡å¯†åº¦å‡½æ•°åœ¨è¿™ä¸ªåŒºåŸŸä¸Šçš„ç§¯åˆ†ã€‚å½“æ¦‚ç‡å¯†åº¦å‡½æ•°å­˜åœ¨çš„æ—¶å€™ï¼Œç´¯ç§¯åˆ†å¸ƒå‡½æ•°æ˜¯æ¦‚ç‡å¯†åº¦å‡½æ•°çš„ç§¯åˆ†ã€‚æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸€èˆ¬ä»¥å°å†™æ ‡è®°<br>æ­£æ€åˆ†å¸ƒæ˜¯é‡è¦çš„æ¦‚ç‡åˆ†å¸ƒã€‚å®ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯ï¼š<br><img src="http://oh6ybr0jg.bkt.clouddn.com/gailvmidu.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>éšç€å‚æ•°Î¼å’ŒÏƒå˜åŒ–ï¼Œæ¦‚ç‡åˆ†å¸ƒä¹Ÿäº§ç”Ÿå˜åŒ–ã€‚<br>æœŸæœ›ï¼šÎ¼<br>æ–¹å·®ï¼šÏƒ^2<br>ä¸­ä½æ•°ï¼šÎ¼<br>ä¼—44o6fdeswq    DFGI-æ•°ï¼šÎ¼<br>ååº¦ï¼š0<br>å³°åº¦ï¼š3<br>\]<br>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2018/03/27/Mathematical regression /#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/03/scikit-learn pca/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/03/scikit-learn pca/" itemprop="url">
                  scikit-learn pca
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-03T11:06:30+08:00">
                2018-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/03/03/scikit-learn pca/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/03/scikit-learn pca/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>from sklearn import datasets</p>
<p>digits = datasets.load_digits()<br>x = digits.data<br>y = digits.target</p>
<p>from sklearn.model_selection import  train_test_split<br>x_train,x_test,y_train,y_test = train_test_split(x,y,random_state=666)</p>
<p>print(x_train.shape)</p>
<p>#(1347, 64)<br>from sklearn.neighbors import KNeighborsClassifier<br>import time<br>start = time.clock()<br>knn_clf = KNeighborsClassifier()</p>
<p>knn_clf.fit(x_train,y_train)<br>end = time.clock()</p>
<p>print(end-start)</p>
<p>#0.009107513739889835<br>score = knn_clf.score(x_test,y_test)</p>
<p>print(score)</p>
<p>#0.986666666667</p>
<p>from sklearn.decomposition import  PCA</p>
<p>pca = PCA(n_components=2)<br>pca.fit(x_train)<br>X_train_reduction = pca.transform(x_train)<br>X_test_reduction = pca.transform(x_test)</p>
<p>start2 = time.clock()<br>knn_clf = KNeighborsClassifier()<br>knn_clf.fit(X_train_reduction,y_train)<br>end2 = time.clock()</p>
<p>print(end2-start2)</p>
<p>#0.0019209365663966915<br>score = knn_clf.score(X_test_reduction,y_test)<br>print(score)</p>
<p>#0.606666666667</p>
<p>print(pca.explained<em>variance</em>)</p>
<p>pca = PCA(n_components=x_train.shape[1])</p>
<p>pca3 = PCA(0.95)<br>pca3.fit(x_train)<br>print(pca3.n<em>components</em>)</p>
<p>#28</p>
<p>start3 = time.clock()<br>knn_clf3 = KNeighborsClassifier()<br>X_train_reduction = pca3.transform(x_train)<br>X_test_reduction = pca3.transform(x_test)<br>knn_clf3.fit(X_train_reduction,y_train)<br>end3 = time.clock()</p>
<p>print(end3-start3)</p>
<p>#0.006395458395239972<br>score = knn_clf3.score(X_test_reduction,y_test)<br>print(score)</p>
<p>#0.98</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/02/scikit-learn KNN/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="å¼ æ´ªé“­">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/agns.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="å¼ æ´ªé“­çš„ä¸ªäººåšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/02/scikit-learn KNN/" itemprop="url">
                  scikit-learn KNN
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-02T10:06:30+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2018/03/02/scikit-learn KNN/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/02/scikit-learn KNN/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>åœ°å€ï¼š<br><a href="http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html#sklearn.neighbors.KNeighborsClassifier">http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html#sklearn.neighbors.KNeighborsClassifier</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</div><div class="line"></div><div class="line">X = [[<span class="number">0</span>], [<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]</div><div class="line">y = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>]</div><div class="line">neigh = KNeighborsClassifier(n_neighbors=<span class="number">3</span>)</div><div class="line">neigh.fit(X, y)</div><div class="line"></div><div class="line">print(neigh.predict([[<span class="number">1.1</span>]]))</div><div class="line"><span class="comment"># [0]</span></div><div class="line">print(neigh.predict_proba([[<span class="number">0.9</span>]]))</div><div class="line"><span class="comment">#[[ 0.66666667  0.33333333]]</span></div></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2018/03/02/scikit-learn KNN/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/agns.gif"
               alt="å¼ æ´ªé“­" />
          <p class="site-author-name" itemprop="name">å¼ æ´ªé“­</p>
          <p class="site-description motion-element" itemprop="description">äººç”Ÿåœ¨å‹¤ å‹¤åˆ™ä¸åŒ®</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">95</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jiatianyao" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
	<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=459442631&auto=1&height=66"></iframe> 
        


      </section>

      

    </div>
  </aside>


        
      </div>
      
    </main>
	
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å¼ æ´ªé“­</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhm8"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  
	

</body>
</html>
