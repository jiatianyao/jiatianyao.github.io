<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¼ æ´ªé“­çš„ä¸ªäººåšå®¢</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-08-04T15:09:02.531Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>å¼ æ´ªé“­</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>flinkæºç 3--StreamGraph-&gt;JobGraph-&gt;ExecutionGraph</title>
    <link href="http://yoursite.com/2019/08/04/flink%E6%BA%90%E7%A0%813--StreamGraph--JobGraph--ExecutionGraph/"/>
    <id>http://yoursite.com/2019/08/04/flinkæºç 3--StreamGraph--JobGraph--ExecutionGraph/</id>
    <published>2019-08-04T11:30:00.000Z</published>
    <updated>2019-08-04T15:09:02.531Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://upload-images.jianshu.io/upload_images/10507536-19865f27607e82c0.png?imageMogr2/auto-orient/" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>æˆ‘ä»¬æ¥ç€åˆ†æStreamExecutionEnvironmentè¿™ä¸ªç±»çš„å®ç°ç±»ï¼š<br>å³æˆ‘ä»¬åœ¨è°ƒç”¨env.execute(â€œFlink StreamingChainingDemoâ€);<br>æ­¤å¤„æœ€æ–°ç‰ˆçš„flinkä»£ç å’Œä»¥å‰çš„ç»“æ„ä¸åŒã€‚å…ˆæ˜¯è°ƒç”¨çš„StreamExecutionEnvironmentçš„executeä»£ç </p>
<pre><code>public JobExecutionResult execute(String jobName) throws Exception {
    Preconditions.checkNotNull(jobName, &quot;Streaming Job name should not be null.&quot;);

    return execute(getStreamGraph(jobName));
}

@Internal
public StreamGraph getStreamGraph(String jobName) {
    return getStreamGraphGenerator().setJobName(jobName).generate();
}
private StreamGraphGenerator getStreamGraphGenerator() {
    if (transformations.size() &lt;= 0) {
        throw new IllegalStateException(&quot;No operators defined in streaming topology. Cannot execute.&quot;);
    }
    return new StreamGraphGenerator(transformations, config, checkpointCfg)
        .setStateBackend(defaultStateBackend)//null
        .setChaining(isChainingEnabled)//true
        .setUserArtifacts(cacheFile)
        .setTimeCharacteristic(timeCharacteristic)//DEFAULT_TIME_CHARACTERISTIC = TimeCharacteristic.ProcessingTime; //IngestionTime
        .setDefaultBufferTimeout(bufferTimeout);//100
}
</code></pre><p>æ ¹æ®transformations, config, checkpointCfgåˆå§‹åŒ–StreamGraphGenerator</p>
<p>JobGraph:<br>æ¥ç€ä¼šè¿›å…¥åˆ°LocalStreamEnvironment è¿™ä¸ªå®ç°ç±»é‡Œé¢</p>
<pre><code>public JobExecutionResult execute(StreamGraph streamGraph) throws Exception {
        JobGraph jobGraph = streamGraph.getJobGraph();
        jobGraph.setAllowQueuedScheduling(true);

        Configuration configuration = new Configuration();
        configuration.addAll(jobGraph.getJobConfiguration());
        configuration.setString(TaskManagerOptions.MANAGED_MEMORY_SIZE, &quot;0&quot;);

        // add (and override) the settings with what the user defined
        configuration.addAll(this.configuration);

        if (!configuration.contains(RestOptions.BIND_PORT)) {
            configuration.setString(RestOptions.BIND_PORT, &quot;0&quot;);
        }

        int numSlotsPerTaskManager = configuration.getInteger(TaskManagerOptions.NUM_TASK_SLOTS, jobGraph.getMaximumParallelism());

        MiniClusterConfiguration cfg = new MiniClusterConfiguration.Builder()
            .setConfiguration(configuration)
            .setNumSlotsPerTaskManager(numSlotsPerTaskManager)
            .build();

        if (LOG.isInfoEnabled()) {
            LOG.info(&quot;Running job on local embedded Flink mini cluster&quot;);
        }

        MiniCluster miniCluster = new MiniCluster(cfg);

        try {
            miniCluster.start();
            configuration.setInteger(RestOptions.PORT, miniCluster.getRestAddress().get().getPort());

            return miniCluster.executeJobBlocking(jobGraph);
        }
        finally {
            transformations.clear();
            miniCluster.close();
        }
    }
</code></pre><p>streamGraph.getJobGraph é‡Œ</p>
<pre><code>@SuppressWarnings(&quot;deprecation&quot;)
@Override
public JobGraph getJobGraph(@Nullable JobID jobID) {
    // temporarily forbid checkpointing for iterative jobs
    if (isIterative() &amp;&amp; checkpointConfig.isCheckpointingEnabled() &amp;&amp; !checkpointConfig.isForceCheckpointing()) {
            throw new UnsupportedOperationException(
                &quot;Checkpointing is currently not supported by default for iterative jobs, as we cannot guarantee exactly once semantics. &quot;
                    + &quot;State checkpoints happen normally, but records in-transit during the snapshot will be lost upon failure. &quot;
                    + &quot;\nThe user can force enable state checkpoints with the reduced guarantees by calling: env.enableCheckpointing(interval,true)&quot;);
        }

    return StreamingJobGraphGenerator.createJobGraph(this, jobID);
}


public static JobGraph createJobGraph(StreamGraph streamGraph, @Nullable JobID jobID) {
    return new StreamingJobGraphGenerator(streamGraph, jobID).createJobGraph();
}


private JobGraph createJobGraph() {
    // make sure that all vertices start immediately
    jobGraph.setScheduleMode(streamGraph.getScheduleMode());

    // Generate deterministic hashes for the nodes in order to identify them across
    // submission iff they didn&apos;t change.
    Map&lt;Integer, byte[]&gt; hashes = defaultStreamGraphHasher.traverseStreamGraphAndGenerateHashes(streamGraph);

    // Generate legacy version hashes for backwards compatibility
    List&lt;Map&lt;Integer, byte[]&gt;&gt; legacyHashes = new ArrayList&lt;&gt;(legacyStreamGraphHashers.size());
    for (StreamGraphHasher hasher : legacyStreamGraphHashers) {
        legacyHashes.add(hasher.traverseStreamGraphAndGenerateHashes(streamGraph));
    }

    Map&lt;Integer, List&lt;Tuple2&lt;byte[], byte[]&gt;&gt;&gt; chainedOperatorHashes = new HashMap&lt;&gt;();

    setChaining(hashes, legacyHashes, chainedOperatorHashes);

    setPhysicalEdges();

    setSlotSharingAndCoLocation();

    configureCheckpointing();

    JobGraphGenerator.addUserArtifactEntries(streamGraph.getUserArtifacts(), jobGraph);

    // set the ExecutionConfig last when it has been finalized
    try {
        jobGraph.setExecutionConfig(streamGraph.getExecutionConfig());
    }
    catch (IOException e) {
            throw new IllegalConfigurationException(&quot;Could not serialize the ExecutionConfig.&quot; +
                    &quot;This indicates that non-serializable types (like custom serializers) were registered&quot;);
    }

        return jobGraph;
    }
</code></pre><p><strong>ä¸Šé¢setChaining(hashes, legacyHashes, chainedOperatorHashes);å…¶æ ¸å¿ƒä»£ç ä¸ºï¼š</strong><br>createChainçš„isChainable</p>
<pre><code>public static boolean isChainable(StreamEdge edge, StreamGraph streamGraph) {
    StreamNode upStreamVertex = streamGraph.getSourceVertex(edge);//è·å–StreamEdgeçš„æºå’Œç›®æ ‡StreamNode
    StreamNode downStreamVertex = streamGraph.getTargetVertex(edge);

    StreamOperatorFactory&lt;?&gt; headOperator = upStreamVertex.getOperatorFactory();//è·å–æºå’Œç›®æ ‡StreamNodeä¸­çš„StreamOperator
    StreamOperatorFactory&lt;?&gt; outOperator = downStreamVertex.getOperatorFactory();
    //å¯ä»¥chainingçš„æ¡ä»¶ï¼š
    return downStreamVertex.getInEdges().size() == 1//ä¸‹æ¸¸èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªè¾“å…¥
            &amp;&amp; outOperator != null//ä¸‹æ¸¸èŠ‚ç‚¹çš„æ“ä½œç¬¦ä¸ä¸ºnull
            &amp;&amp; headOperator != null//ä¸Šæ¸¸èŠ‚ç‚¹çš„æ“ä½œç¬¦ä¸ä¸ºnull
            &amp;&amp; upStreamVertex.isSameSlotSharingGroup(downStreamVertex)//ä¸Šä¸‹æ¸¸èŠ‚ç‚¹åœ¨ä¸€ä¸ªæ§½ä½å…±äº«ç»„å†…
            &amp;&amp; outOperator.getChainingStrategy() == ChainingStrategy.ALWAYS//ä¸‹æ¸¸èŠ‚ç‚¹çš„è¿æ¥ç­–ç•¥æ˜¯ ALWAYS
            &amp;&amp; (headOperator.getChainingStrategy() == ChainingStrategy.HEAD ||//ä¸Šæ¸¸èŠ‚ç‚¹çš„è¿æ¥ç­–ç•¥æ˜¯ HEAD æˆ–è€… ALWAYS
                headOperator.getChainingStrategy() == ChainingStrategy.ALWAYS)
            &amp;&amp; (edge.getPartitioner() instanceof ForwardPartitioner)//edge çš„åˆ†åŒºå‡½æ•°æ˜¯ ForwardPartitioner çš„å®ä¾‹
            &amp;&amp; edge.getShuffleMode() != ShuffleMode.BATCH//è¾¹çš„shuffleæ¨¡å¼ä¸ºBATCH
            &amp;&amp; upStreamVertex.getParallelism() == downStreamVertex.getParallelism()//ä¸Šä¸‹æ¸¸èŠ‚ç‚¹çš„å¹¶è¡Œåº¦ç›¸ç­‰
            &amp;&amp; streamGraph.isChainingEnabled();//isChainingEnabledä¸ºtrueï¼Œé»˜è®¤ä¸ºtrue
}
</code></pre><p>åªæœ‰ä¸Šè¿°çš„10ä¸ªæ¡ä»¶éƒ½åŒæ—¶æ»¡è¶³æ—¶ï¼Œæ‰èƒ½è¯´æ˜ä¸¤ä¸ªStreamEdgeçš„æºå’Œç›®æ ‡StreamNodeæ˜¯å¯ä»¥é“¾æ¥åœ¨ä¸€èµ·æ‰§è¡Œçš„</p>
<pre><code>private List&lt;StreamEdge&gt; createChain(
            Integer startNodeId,
            Integer currentNodeId,
            Map&lt;Integer, byte[]&gt; hashes,
            List&lt;Map&lt;Integer, byte[]&gt;&gt; legacyHashes,
            int chainIndex,
            Map&lt;Integer, List&lt;Tuple2&lt;byte[], byte[]&gt;&gt;&gt; chainedOperatorHashes) {

        if (!builtVertices.contains(startNodeId)) {

            List&lt;StreamEdge&gt; transitiveOutEdges = new ArrayList&lt;StreamEdge&gt;();

            List&lt;StreamEdge&gt; chainableOutputs = new ArrayList&lt;StreamEdge&gt;();
            List&lt;StreamEdge&gt; nonChainableOutputs = new ArrayList&lt;StreamEdge&gt;();

            StreamNode currentNode = streamGraph.getStreamNode(currentNodeId);

            for (StreamEdge outEdge : currentNode.getOutEdges()) {
                if (isChainable(outEdge, streamGraph)) {
                    chainableOutputs.add(outEdge);
                } else {
                    nonChainableOutputs.add(outEdge);
                }
            }

            for (StreamEdge chainable : chainableOutputs) {
                transitiveOutEdges.addAll(
                        createChain(startNodeId, chainable.getTargetId(), hashes, legacyHashes, chainIndex + 1, chainedOperatorHashes));
            }

            for (StreamEdge nonChainable : nonChainableOutputs) {
                transitiveOutEdges.add(nonChainable);//ä¸å¯è¿æ¥çš„StreamEdge,è¾“å‡ºStreamEdgeæ”¾å…¥transitiveOutEdges
                createChain(nonChainable.getTargetId(), nonChainable.getTargetId(), hashes, legacyHashes, 0, chainedOperatorHashes);//ç»§ç»­éå†å¯chainingçš„èŠ‚ç‚¹
            }
            //è·å–å¤´èŠ‚ç‚¹æ•£åˆ—å€¼ï¼Œæ²¡æœ‰åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨
            List&lt;Tuple2&lt;byte[], byte[]&gt;&gt; operatorHashes =
                chainedOperatorHashes.computeIfAbsent(startNodeId, k -&gt; new ArrayList&lt;&gt;());
            //è·å–å½“å‰èŠ‚ç‚¹æ•£åˆ—å€¼
            byte[] primaryHashBytes = hashes.get(currentNodeId);
            OperatorID currentOperatorId = new OperatorID(primaryHashBytes);
            //éå†legacyHashes  ä¸primaryHashBytesç»„æˆäºŒå…ƒæ•°ç»„ï¼Œæ·»åŠ åˆ°é“¾è¡¨ä¸­
            for (Map&lt;Integer, byte[]&gt; legacyHash : legacyHashes) {
                operatorHashes.add(new Tuple2&lt;&gt;(primaryHashBytes, legacyHash.get(currentNodeId)));
            }
            //é€šè¿‡-&gt; æ‹¼æ¥chainingåç§°
            chainedNames.put(currentNodeId, createChainedName(currentNodeId, chainableOutputs));
            chainedMinResources.put(currentNodeId, createChainedMinResources(currentNodeId, chainableOutputs));
            chainedPreferredResources.put(currentNodeId, createChainedPreferredResources(currentNodeId, chainableOutputs));

            if (currentNode.getInputFormat() != null) {
                getOrCreateFormatContainer(startNodeId).addInputFormat(currentOperatorId, currentNode.getInputFormat());
            }

            if (currentNode.getOutputFormat() != null) {
                getOrCreateFormatContainer(startNodeId).addOutputFormat(currentOperatorId, currentNode.getOutputFormat());
            }
            //åˆ›å»ºjobVertexå¹¶è®¾ç½®å¹¶è¡Œåº¦è¿”å›StreamConfigå®ä¾‹
            StreamConfig config = currentNodeId.equals(startNodeId)
                    ? createJobVertex(startNodeId, hashes, legacyHashes, chainedOperatorHashes)
                    : new StreamConfig(new Configuration());
            //è®¾ç½®åºåˆ—åŒ–å™¨ï¼ŒStreamOperatorï¼Œcheckpointï¼ˆé»˜è®¤AT_LEAST_ONCEï¼‰
            setVertexConfig(currentNodeId, config, chainableOutputs, nonChainableOutputs);

            if (currentNodeId.equals(startNodeId)) {

                config.setChainStart();
                config.setChainIndex(0);
                config.setOperatorName(streamGraph.getStreamNode(currentNodeId).getOperatorName());
                config.setOutEdgesInOrder(transitiveOutEdges);
                config.setOutEdges(streamGraph.getStreamNode(currentNodeId).getOutEdges());

                for (StreamEdge edge : transitiveOutEdges) {
                    connect(startNodeId, edge);//å°†JobVertexå’ŒJobEdgeç›¸è¿
                }
                //å°†chainä¸­æ‰€æœ‰å­èŠ‚ç‚¹çš„StreamConfigå†™å…¥åˆ° headOfChain èŠ‚ç‚¹çš„  chainedTaskConfig_  é…ç½®ä¸­
                config.setTransitiveChainedTaskConfigs(chainedConfigs.get(startNodeId));

            } else {
                chainedConfigs.computeIfAbsent(startNodeId, k -&gt; new HashMap&lt;Integer, StreamConfig&gt;());

                config.setChainIndex(chainIndex);
                StreamNode node = streamGraph.getStreamNode(currentNodeId);
                config.setOperatorName(node.getOperatorName());
                chainedConfigs.get(startNodeId).put(currentNodeId, config);
            }

            config.setOperatorID(currentOperatorId);

            if (chainableOutputs.isEmpty()) {
                config.setChainEnd();
            }
            return transitiveOutEdges;

        } else {
            return new ArrayList&lt;&gt;();
        }
    }
</code></pre><p>éå†transitiveOutEdgesï¼Œå¹¶å°†æ¯ä¸€æ¡StreamEdgeè¾¹ä½œä¸ºå‚æ•°ä¼ å…¥connect( )å‡½æ•°ä¸­:</p>
<pre><code>private void connect(Integer headOfChain, StreamEdge edge) {
        //å°†å½“å‰edgeè®°å½•ç‰©ç†è¾¹ç•Œé¡ºåºé›†åˆä¸­
        physicalEdgesInOrder.add(edge);
        //è·å–å½“å‰edgeçš„ä¸‹æ¸¸èŠ‚ç‚¹ID
        Integer downStreamvertexID = edge.getTargetId();
        //è·å–ä¸Šä¸‹æ¸¸JobVertexèŠ‚ç‚¹
        JobVertex headVertex = jobVertices.get(headOfChain);
        JobVertex downStreamVertex = jobVertices.get(downStreamvertexID);
        //è·å–ä¸‹æ¸¸JobVertexçš„é…ç½®
        StreamConfig downStreamConfig = new StreamConfig(downStreamVertex.getConfiguration());
        //ä¸‹æ¸¸JobVertexçš„è¾“å…¥è®¡æ•°å™¨åŠ 1
        downStreamConfig.setNumberOfInputs(downStreamConfig.getNumberOfInputs() + 1);

        StreamPartitioner&lt;?&gt; partitioner = edge.getPartitioner();
        //æ ¹æ®shuffleæ¨¡å¼ä¸åŒåˆ›å»ºä¸åŒçš„ResultPartitionType
        ResultPartitionType resultPartitionType;
        switch (edge.getShuffleMode()) {
            case PIPELINED://æœ‰é™çš„æˆ–æ— é™çš„
                resultPartitionType = ResultPartitionType.PIPELINED_BOUNDED;
                break;
            case BATCH://ä»…åœ¨ç”Ÿæˆå®Œæ•´ç»“æœåå‘ä¸‹æ¸¸å‘é€æ•°æ®
                resultPartitionType = ResultPartitionType.BLOCKING;
                break;
            case UNDEFINED://blockingConnectionsBetweenChains ä¸ºtrue BLOCKING  flase ä¸ºPIPELINED_BOUNDED
                resultPartitionType = streamGraph.isBlockingConnectionsBetweenChains() ?
                        ResultPartitionType.BLOCKING : ResultPartitionType.PIPELINED_BOUNDED;
                break;
            default:
                throw new UnsupportedOperationException(&quot;Data exchange mode &quot; +
                    edge.getShuffleMode() + &quot; is not supported yet.&quot;);
        }
        //æ ¹æ®ForwardPartitionerå’ŒRescalePartitionerä¸¤ç§åˆ†åŒºæ–¹å¼å»ºç«‹DistributionPattern.POINTWISEç±»å‹çš„JobEdge
        JobEdge jobEdge;
        if (partitioner instanceof ForwardPartitioner || partitioner instanceof RescalePartitioner) {
            jobEdge = downStreamVertex.connectNewDataSetAsInput(
                headVertex,
                DistributionPattern.POINTWISE,
                resultPartitionType);
        } else {//å…¶ä»–åˆ†åŒºæ–¹å¼åˆ™æ˜¯DistributionPattern.ALL_TO_ALLç±»å‹
            jobEdge = downStreamVertex.connectNewDataSetAsInput(
                    headVertex,
                    DistributionPattern.ALL_TO_ALL,
                    resultPartitionType);
        }
        // set strategy name so that web interface can show it. è®¾ç½®ç­–ç•¥åç§°æ–¹ä¾¿webæ¥å£æ˜¾ç¤º
        jobEdge.setShipStrategyName(partitioner.toString());

        if (LOG.isDebugEnabled()) {
            LOG.debug(&quot;CONNECTED: {} - {} -&gt; {}&quot;, partitioner.getClass().getSimpleName(),
                    headOfChain, downStreamvertexID);
        }
    }


public JobEdge connectNewDataSetAsInput(
            JobVertex input,
            DistributionPattern distPattern,
            ResultPartitionType partitionType) {
        //JobVertexå’ŒJobEdgeä¹‹é—´é€šè¿‡åˆ›å»ºIntermediateDataSetæ¥è¿æ¥
        IntermediateDataSet dataSet = input.createAndAddResultDataSet(partitionType);

        JobEdge edge = new JobEdge(dataSet, this, distPattern);
        this.inputs.add(edge);
        dataSet.addConsumer(edge);
        return edge;
    }

æœ€åé™„ä¸Šä¸€å‰¯    
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/10507536-92418c0ca2da7a3d.png?imageMogr2/auto-orient/" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>executeæ–¹æ³•æœ€åæ‰§è¡Œã€‚<br>miniCluster.executeJobBlocking(jobGraph);<br>ä¸­é—´ä¸€äº›åˆ—Akka çš„RPCé€šè®¯çœç•¥ä¸è¡¨ï¼Œå¯¹å¹¶å‘ç¼–ç¨‹æœ‰å…´è¶£å¯ä»¥ç ”ç©¶ä¸‹Akka å’ŒActor</p>
<p>ExecutionGraphï¼š</p>
<pre><code>public JobExecutionResult executeJobBlocking(JobGraph job) throws JobExecutionException, InterruptedException {
        checkNotNull(job, &quot;job is null&quot;);

        final CompletableFuture&lt;JobSubmissionResult&gt; submissionFuture = submitJob(job);

        final CompletableFuture&lt;JobResult&gt; jobResultFuture = submissionFuture.thenCompose(
            (JobSubmissionResult ignored) -&gt; requestJobResult(job.getJobID()));

        final JobResult jobResult;

        try {
            jobResult = jobResultFuture.get();
        } catch (ExecutionException e) {
            throw new JobExecutionException(job.getJobID(), &quot;Could not retrieve JobResult.&quot;, ExceptionUtils.stripExecutionException(e));
        }

        try {
            return jobResult.toJobExecutionResult(Thread.currentThread().getContextClassLoader());
        } catch (IOException | ClassNotFoundException e) {
            throw new JobExecutionException(job.getJobID(), e);
        }
    }
public CompletableFuture&lt;JobSubmissionResult&gt; submitJob(JobGraph jobGraph) {
    final CompletableFuture&lt;DispatcherGateway&gt; dispatcherGatewayFuture = getDispatcherGatewayFuture();

    // we have to allow queued scheduling in Flip-6 mode because we need to request slots
    // from the ResourceManager
    jobGraph.setAllowQueuedScheduling(true);

    final CompletableFuture&lt;InetSocketAddress&gt; blobServerAddressFuture = createBlobServerAddress(dispatcherGatewayFuture);

    final CompletableFuture&lt;Void&gt; jarUploadFuture = uploadAndSetJobFiles(blobServerAddressFuture, jobGraph);

    final CompletableFuture&lt;Acknowledge&gt; acknowledgeCompletableFuture = jarUploadFuture
        .thenCombine(
            dispatcherGatewayFuture,
            (Void ack, DispatcherGateway dispatcherGateway) -&gt; dispatcherGateway.submitJob(jobGraph, rpcTimeout))
        .thenCompose(Function.identity());

    return acknowledgeCompletableFuture.thenApply(
        (Acknowledge ignored) -&gt; new JobSubmissionResult(jobGraph.getJobID()));
}
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/10507536-19865f27607e82c0.png?imageMogr2/auto-orient/&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="flink" scheme="http://yoursite.com/tags/flink/"/>
    
  </entry>
  
  <entry>
    <title>flinkæºç 2</title>
    <link href="http://yoursite.com/2019/08/03/flink%E6%BA%90%E7%A0%812/"/>
    <id>http://yoursite.com/2019/08/03/flinkæºç 2/</id>
    <published>2019-08-03T03:30:00.000Z</published>
    <updated>2019-08-04T15:08:28.849Z</updated>
    
    <content type="html"><![CDATA[<p>æ ¹æ®ä¸Šç¯‡æ–‡ç« å†…å®¹æ‰©å±•ä¸€ä¸‹chaining demo</p>
<p>é¦–å…ˆå†™ä¸€ä¸ªstreamingçš„ wordcount</p>
<pre><code>public class StreamingChainingDemo {

@Data
@AllArgsConstructor
@NoArgsConstructor
public static class KeyCount{
    private String key;
    private int count;
}

public static void main(String[] args) throws Exception {
    // set up the streaming execution environment

    Configuration configuration= new Configuration(){
        {
            setInteger(&quot;rest.port&quot;,9191);
            setBoolean(&quot;local.start-webserver&quot;,true);
        }
    };
    final StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(configuration);

    env.setParallelism(2).setStreamTimeCharacteristic(TimeCharacteristic.IngestionTime);
    DataStreamSource&lt;String&gt; dataStreamSource = env.socketTextStream(&quot;localhost&quot;, 9999);
    dataStreamSource.flatMap((String line, Collector&lt;KeyCount&gt; out)
    -&gt; {
         Stream.of(line.split(&quot;\\s+&quot;)).forEach(value -&gt; out.collect(new KeyCount(value,1)));
       }
    ).returns(Types.POJO(KeyCount.class))
    .keyBy(new KeySelector&lt;KeyCount, Object&gt;() {
        @Override
        public Object getKey(KeyCount value) throws Exception {
            return value.getKey();
        }
    }).timeWindow(Time.seconds(10)).sum(&quot;count&quot;).print();
    // execute program
    env.execute(&quot;Flink StreamingChainingDemo&quot;);
}
</code></pre><p>}</p>
<p>è¿è¡Œå¦‚ä¸Šä»£ç åæˆ‘ä»¬çœ‹WEB UI<br><img src="https://s2.ax1x.com/2019/08/03/esAc8K.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>å¯ä»¥çœ‹åˆ°keyByæ“ä½œå’Œsinkæ˜¯chainingåœ¨ä¸€èµ·çš„ã€‚<br>å¦‚æœæˆ‘ä»¬åœ¨print()çš„åé¢åŠ ä¸Š.disableChaining()</p>
<p><img src="https://s2.ax1x.com/2019/08/03/esErLQ.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>å¯ä»¥çœ‹åˆ°keyByå’Œsinkæ˜¯forwardçš„å¹¶échainingåœ¨ä¸€èµ·</p>
<p>æ­¤æ—¶æˆ‘ä»¬åœ¨returns(Types.POJO(KeyCount.class))<br>åé¢å¢åŠ .filter(word-&gt; !â€â€.equals(word))<br>å¤§å®¶çŒœflatå’Œfilterä¼šchainingåœ¨ä¸€èµ·å—ï¼Ÿ</p>
<p><img src="https://s2.ax1x.com/2019/08/03/esEfzT.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>yeahï¼Œä½ ç­”å¯¹äº†å—ï¼Ÿflatå’Œfilterä¼šchainingåœ¨ä¸€èµ·ã€‚</p>
<p>è¿™æ—¶ æˆ‘å¼•å…¥å¹¶è¡Œåº¦çš„æ¦‚å¿µï¼š<br>åœ¨.filter(word-&gt; !â€â€.equals(word))<br>åé¢æœºä¸Š.setParallelism(3)</p>
<p>å°±ä¼šå‘ç°flatå’Œfilteræ˜¯Reblanceçš„å…³ç³»<br><img src="https://s2.ax1x.com/2019/08/03/esE7w9.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>StreamOperator æºç è§£æ<br>è¿™ä¸ªæ¥å£ç»§æ‰¿ CheckpointListener, KeyContext, Disposable, Serializable</p>
<p>æä¾›äº†å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<p>ç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼š<br>    open<br>    close<br>    dispose<br>    prepareSnapshotPreBarrier</p>
<p>å®¹é”™ä¸çŠ¶æ€</p>
<pre><code>snapshotState
initializeState
</code></pre><p>ä¸StreamRecordç›¸å…³</p>
<pre><code>setKeyContextElement1
setKeyContextElement2
</code></pre><p>chainç›¸å…³</p>
<pre><code>getChainingStrategy
setChainingStrategy
</code></pre><p>ç›‘æ§ç›¸å…³</p>
<pre><code>getMetricGroup
getOperatorID
</code></pre><p>AbstractStreamOperatorï¼ŒOneInputStreamOperatorä¸TwoInputStreamOperatoræ¥å£ç»§æ‰¿è‡ªStreamOperator</p>
<p>OneInputStreamOperatoræœ‰3ä¸ªæ–¹æ³•</p>
<pre><code>processElement
processWatermark
processLatencyMarker
</code></pre><p>TwoInputStreamOperatoræœ‰6ä¸ªæ–¹æ³•</p>
<pre><code>processElement1
processElement2
processWatermark1
processWatermark2
processLatencyMarker1
processLatencyMarker2
</code></pre><p>AbstractStreamOperator é‡è¦çš„å˜é‡ï¼šåé¢ä¼šå°†å…·ä½“çš„ç”¨æ³•ç”¨å¤„<br>å†³å®šæ˜¯å¦åœ¨ç”ŸæˆJobGraphæ—¶å¯¹ç®—å­è¿›è¡ŒChainingä¼˜åŒ–ï¼š</p>
<pre><code>protected ChainingStrategy chainingStrategy = ChainingStrategy.HEAD; 
</code></pre><p>3ä¸ªä¸çŠ¶æ€ç›¸å…³çš„å˜é‡</p>
<pre><code>private transient AbstractKeyedStateBackend&lt;?&gt; keyedStateBackend;
private transient DefaultKeyedStateStore keyedStateStore;
private transient OperatorStateBackend operatorStateBackend;
</code></pre><p>ç›‘æ§ç›¸å…³çš„å˜é‡</p>
<pre><code>protected transient OperatorMetricGroup metrics;
protected transient LatencyStats latencyStats;
</code></pre><p>æ–¹æ³•ä½œç”¨å’Œçˆ¶ç±»å¤§åŒå°å¼‚æ­¤å¤„ç•¥</p>
<p>AbstractStreamOperatorçš„å­ç±»æŠ½è±¡ç±»AbstractUdfStreamOperator<br>è¿™ä¸ªæŠ½è±¡ç±»åŒæ—¶å®ç°äº†OutputTypeConfigurableæ¥å£å¹¶é‡å†™äº†setOutputTypeæ–¹æ³•è®¾ç½®äº†è¾“å‡ºç±»å‹</p>
<p>æœ€åæˆ‘ä»¬æ¥çœ‹<br>OneInputStreamOperatorè¿™ä¸ªç±»çš„å®ç°ç±»ï¼š</p>
<p>StreamFilterï¼ŒStreamMapä¸StreamFlatMapç®—å­åœ¨å®ç°çš„processElementåˆ†åˆ«è°ƒç”¨ä¼ å…¥çš„FilterFunctionï¼ŒMapFunctionï¼Œ FlatMapFunctionçš„udfå°†elementä¼ åˆ°ä¸‹æ¸¸ã€‚å…¶ä¸­StreamFlatMapç”¨åˆ°äº†TimestampedCollectorï¼Œå®ƒæ˜¯outputçš„ä¸€å±‚å°è£…ï¼Œå°†timestampåŠ å…¥åˆ°StreamRecordä¸­å‘é€åˆ°ä¸‹æ¸¸ã€‚</p>
<p>StreamGroupedReduceä¸StreamGroupedFoldç®—å­ç›¸ä¼¼çš„ç‚¹æ˜¯éƒ½æ¶‰åŠåˆ°äº†æ“ä½œçŠ¶æ€, æ‰€ä»¥åœ¨è¦†ç›–openæ–¹æ³•æ—¶é€šè¿‡åˆ›å»ºä¸€ä¸ªçŠ¶æ€çš„æè¿°ç¬¦ä»¥åŠè°ƒç”¨AbstractStreamOperatorå®ç°çš„getPartitionedStateæ–¹æ³•è·å–äº†ä¸€ä¸ªstateBackendçš„æ“ä½œå¥æŸ„ã€‚åœ¨processElementæ–¹æ³•ä¸­å€ŸåŠ©è¿™ä¸ªå¥æŸ„è·å–å½“å‰çŠ¶æ€å€¼ï¼Œåœ¨ç”¨UDFå°†æ–°çš„å…ƒç´ èšåˆè¿›å»å¹¶æ›´æ–°çŠ¶æ€å€¼ï¼Œæœ€åè¾“å‡ºåˆ°ä¸‹æ¸¸ã€‚ä¸åŒçš„æ˜¯Foldçš„è¾“å‡ºç±»å‹å¯èƒ½ä¸ä¸€æ ·ï¼ˆæ‰€ä»¥å®ç°äº†OutputTypeConfigurableæ¥å£çš„setOutputTypeæ–¹æ³•ï¼‰ï¼Œå¹¶ä¸”æœ‰åˆå§‹å€¼ã€‚</p>
<p>ProcessOperatorï¼Œ LegacyKeyedProcessOperatorï¼ˆ@Deprecatedï¼‰<br>ProcessFunctionæ˜¯æ¯”è¾ƒçµæ´»çš„UDFï¼Œå…è®¸ç”¨æˆ·é€šè¿‡åœ¨processElementçš„æ—¶å€™å¯ä»¥é€šè¿‡ä¼ å…¥çš„ctxæ“ä½œTimerService<br>æ³¨å†ŒProcessingTimeTimerå’ŒEventTimeTimerï¼Œå¹¶ä¸”é€šè¿‡å®ç°æ–¹æ³•onTimerå°±å¯ä»¥åœ¨Timerè¢«è§¦å‘çš„æ—¶å€™æ‰§è¡Œå›è°ƒçš„é€»è¾‘ã€‚</p>
<p>StreamSinkï¼š<br>SimpleContextï¼Œå¯ä»¥è·å–processingTimeï¼Œwatermarkå’Œelementçš„æ—¶é—´æˆ³ã€‚<br>GenericWriteAheadSinkæä¾›äº†ä¸€ä¸ªå¯ä»¥è¢«å®ç°ä¸ºExactly onceçš„sinkçš„æŠ½è±¡ç±»<br>AsyncWaitOperatoræä¾›äº†å¼‚æ­¥å¤„ç†çš„èƒ½åŠ›ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ç®—å­ï¼Œå¯¹å…ƒç´ çš„å¤„ç†å’Œå¤‡ä»½æ¢å¤éƒ½æ¯”è¾ƒç‰¹æ®Šã€‚elementçš„è¾“å‡ºé€šè¿‡ä¸€ä¸ªEmitterå¯¹è±¡æ¥å®ç°<br>TimestampsAndPeriodicWatermarksOperatorï¼ŒTimestampsAndPunctuatedWatermarksOperatoré€šè¿‡TimestampAssigneræå–timestampå¹¶ç”ŸæŒ‰ç…§è§„åˆ™ç”Ÿæˆwatermark</p>
<p>å’ŒTwoInputStreamOperatorè¿™ä¸ªç±»çš„å®ç°ç±»<br>CoStreamMapï¼Œ CoStreamFlatMapåŸºæœ¬ä¸å•æµçš„é€»è¾‘æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œåªæ˜¯é’ˆå¯¹ä¸¤ä¸ªæµçš„Functionåšç±»ä¼¼çš„å¤„ç†ã€‚<br>IntervalJoinOperatorå¯¹åŒæµçš„å…ƒç´ æ ¹æ®æä¾›çš„ProcessJoinFunctionåšå†…è¿æ¥ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ éƒ½æœ‰å¤±æ•ˆæ—¶é—´ã€‚åœ¨processElementæ–¹æ³•ä¸­ï¼Œæ¯å½“ä¸€ä¸ªæµçš„å…ƒç´ åˆ°è¾¾ï¼Œä¼šå°†å®ƒåŠ å…¥å¯¹åº”æµçš„bufferï¼Œå¹¶ä¸”éå†å¦ä¸€ä¸ªæµçš„bufferæ‰¾åˆ°æ‰€æœ‰joinçš„é€‰é¡¹ã€‚æœ€åå†æ ¹æ®å¤±æ•ˆæ—¶é—´æ³¨å†Œä¸€ä¸ªçŠ¶æ€æ¸…ç†çš„Timeré˜²æ­¢bufferæ— é™å¢é•¿ã€‚</p>
<p>CoBroadcastWithKeyedOperatorå’ŒCoBroadcastWithNonKeyedOperatoræä¾›äº†å¯¹(Keyed)BroadcastProcessFunctionçš„æ”¯æŒï¼Œå’ŒCoProcessæœ‰ä¸€äº›ç±»ä¼¼ï¼Œåªæ˜¯Broadcastçš„Streamåªæœ‰è¯»æƒé™ï¼Œæ²¡æœ‰å†™æƒé™ã€‚å¹¶ä¸”å¯ä»¥é€šè¿‡contextç›´æ¥è·å¾—BroadcastState</p>
<p>CoProcessOperatorå’ŒKeyedCoProcessOperatoræœ¬è´¨ä¸Šä¸å•æµçš„å¤„ç†ä¹Ÿæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯æä¾›äº†åŒæµä¹‹é—´å…±äº«çŠ¶æ€çš„å¯èƒ½ã€‚CoProcessOperatorä¹Ÿè¢«ç”¨æ¥å®ç°NonWindowJoin</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ ¹æ®ä¸Šç¯‡æ–‡ç« å†…å®¹æ‰©å±•ä¸€ä¸‹chaining demo&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå†™ä¸€ä¸ªstreamingçš„ wordcount&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public class StreamingChainingDemo {

@Data
@AllArgsConstructor
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="flink" scheme="http://yoursite.com/tags/flink/"/>
    
  </entry>
  
  <entry>
    <title>flinkæºç 1</title>
    <link href="http://yoursite.com/2019/08/02/flink%E6%BA%90%E7%A0%811/"/>
    <id>http://yoursite.com/2019/08/02/flinkæºç 1/</id>
    <published>2019-08-02T12:30:00.000Z</published>
    <updated>2019-08-04T15:09:27.458Z</updated>
    
    <content type="html"><![CDATA[<p>nc -lk 9000<br> bin/flink run examples/streaming/SocketWindowWordCount.jar â€“hostname localhost â€“port 9000</p>
<p>ç¼–è¯‘flink<br>git clone <a href="https://github.com/apache/flink.git" target="_blank" rel="external">https://github.com/apache/flink.git</a><br>cd flink<br>mvn clean package -DskipTests # this will take up to 10 minutes</p>
<p>Flinkæºç é˜…è¯»ï¼š<br>ä»è¯»å–æ–‡ä»¶å¼€å§‹ï¼š<br>ä¾‹å¦‚env.readFileStream<br>å…±æœ‰å¦‚ä¸‹DataSourceï¼š</p>
<pre><code>fromElements
fromElements
fromCollection
fromCollection
fromCollection
fromCollection
fromParallelCollection
fromParallelCollection
fromParallelCollection
readTextFile
readTextFile
readFile
readFile
readFile
readFileStream
readFile
socketTextStream
socketTextStream
socketTextStream
socketTextStream
socketTextStream
createInput
createInput
createInput
createFileInput
addSource
addSource
addSource
addSource

public DataStream&lt;String&gt; readFileStream(String filePath, long intervalMillis, FileMonitoringFunction.WatchType watchType) {
    DataStream&lt;Tuple3&lt;String, Long, Long&gt;&gt; source = addSource(new FileMonitoringFunction(
            filePath, intervalMillis, watchType), &quot;Read File Stream source&quot;);

    return source.flatMap(new FileReadFunction());
}
</code></pre><p>ç¬¬ä¸‰ä¸ªå‚æ•°åˆ†ä¸ºï¼š</p>
<pre><code>ONLY_NEW_FILES, // Only new files will be processed. ä»…å¤„ç†æ–°å¢æ–‡ä»¶
REPROCESS_WITH_APPENDED, // When some files are appended, all contents of the files will be processed. å½“æ–‡ä»¶å†…å®¹å¢åŠ äº†ä¹‹åä¼šé‡æ–°å¤„ç†æ•´ä¸ªæ–‡ä»¶ã€‚
PROCESS_ONLY_APPENDED // When some files are appended, only appended  contents will be processed. å½“æ–‡ä»¶å†…å®¹å¢åŠ äº†ä¹‹ååªå¤„ç†æ–°å¢åŠ å†…å®¹
</code></pre><p>FileMonitoringFunction ç»§æ‰¿äºSourceFunction<br>æ¥å£SourceFunctionæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š<br>run  ä¸šåŠ¡é€»è¾‘æ–¹æ³•<br>cancel  å–æ¶ˆæ•°æ®æºçš„æ•°æ®äº§ç”Ÿ<br>FileMonitoringFunctionå®ç°äº†è¿™ä¸¤ä¸ªæ–¹æ³•</p>
<pre><code>@Override
public void run(SourceContext&lt;Tuple3&lt;String, Long, Long&gt;&gt; ctx) throws Exception {
    FileSystem fileSystem = FileSystem.get(new URI(path));

    while (isRunning) {
        List&lt;String&gt; files = listNewFiles(fileSystem);//åˆ—å‡ºæ–°å¢æ–‡ä»¶
        for (String filePath : files) {
            if (watchType == WatchType.ONLY_NEW_FILES
                    || watchType == WatchType.REPROCESS_WITH_APPENDED) {
                ctx.collect(new Tuple3&lt;String, Long, Long&gt;(filePath, 0L, -1L));//ä»å¤´åˆ°å°¾æ”¶é›†æ•°æ®
                offsetOfFiles.put(filePath, -1L);
            } else if (watchType == WatchType.PROCESS_ONLY_APPENDED) {
                long offset = 0;
                long fileSize = fileSystem.getFileStatus(new Path(filePath)).getLen();
                if (offsetOfFiles.containsKey(filePath)) {
                    offset = offsetOfFiles.get(filePath);
                }
                //åªæ”¶é›†æ–°å¢éƒ¨åˆ†æ•°æ®ï¼Œå³ä»ä¸Šæ¬¡è·å–çš„offsetåˆ°è¿™æ¬¡æ–‡ä»¶æœ«å°¾filesize
                ctx.collect(new Tuple3&lt;String, Long, Long&gt;(filePath, offset, fileSize));
                offsetOfFiles.put(filePath, fileSize);

                LOG.info(&quot;File processed: {}, {}, {}&quot;, filePath, offset, fileSize);
            }
        }

        Thread.sleep(interval);
    }
}

private List&lt;String&gt; listNewFiles(FileSystem fileSystem) throws IOException {
    List&lt;String&gt; files = new ArrayList&lt;String&gt;();

    FileStatus[] statuses = fileSystem.listStatus(new Path(path));//åˆ—å‡ºç»™å®šè·¯å¾„ä¸­æ–‡ä»¶/ç›®å½•çš„çŠ¶æ€ï¼ˆå¦‚æœè·¯å¾„ä¸ºä¸€ä¸ªç›®å½•ã€‚)
    //FileStatus æœ‰getLenï¼ŒgetBlockSize,getReplication,getModificationTimeï¼ŒgetAccessTimeï¼ŒisDir,getPathæ–¹æ³•

    if (statuses == null) {
        LOG.warn(&quot;Path does not exist: {}&quot;, path);
    } else {
        for (FileStatus status : statuses) {
            Path filePath = status.getPath();
            String fileName = filePath.getName();
            long modificationTime = status.getModificationTime();

            if (!isFiltered(fileName, modificationTime)) {
                //å½“WatchType ä¸ºONLY_NEW_FILESå¹¶ä¸”modificationTimesè¿™ä¸ªmapåŒ…å«è¯»å–çš„æ–‡ä»¶æ—¶å³æ–°å¢æ–‡ä»¶
                // æˆ–æ–‡ä»¶ä¿®æ”¹æ—¶é—´å¤§äºmodificationTimeæ—¶ä¸ºtrue
                files.add(filePath.toString());
                modificationTimes.put(fileName, modificationTime);
            }
        }
    }

    return files;
}
</code></pre><p>æ¥ä¸‹æ¥ä¸ºä»¬çœ‹canalæ–¹æ³•åªåšäº†ä¸€ä»¶äº‹æŒºç›´running</p>
<pre><code>@Override
public void cancel() {
        isRunning = false;
}
</code></pre><p>å¯¹FileMonitoringFunctionçš„å®ç°æ¸…æ¥šä¹‹åï¼Œå›åˆ°StreamExecutionEnvironmentä¸­ï¼Œçœ‹addSourceæ–¹æ³•ã€‚</p>
<pre><code>public &lt;OUT&gt; DataStreamSource&lt;OUT&gt; addSource(SourceFunction&lt;OUT&gt; function, String sourceName) {
    return addSource(function, sourceName, null);
}

public &lt;OUT&gt; DataStreamSource&lt;OUT&gt; addSource(SourceFunction&lt;OUT&gt; function, String sourceName, TypeInformation&lt;OUT&gt; typeInfo) {

    if (function instanceof ResultTypeQueryable) {
        //å¦‚æœä¼ å…¥çš„functionå®ç°äº†ResultTypeQueryableæ¥å£, åˆ™ç›´æ¥é€šè¿‡æ¥å£è·å–
        typeInfo = ((ResultTypeQueryable&lt;OUT&gt;) function).getProducedType();
    }
    if (typeInfo == null) {
        try {
            typeInfo = TypeExtractor.createTypeInfo(
                    SourceFunction.class,
                    function.getClass(), 0, null, null);//è¿™ä¸ªæ–¹æ³•æœ‰ç‚¹é•¿ï¼Œå®é™…æ˜¯typeInfoä¸ºç©ºé€šè¿‡åå°„æœºåˆ¶æ¥æå–typeInfo
        } catch (final InvalidTypesException e) {
            //è·å–å¤±è´¥è¿”å›MissingTypeInfoå®ä¾‹ï¼Œé‡Œé¢ä¸¤ä¸ªå˜é‡ï¼šfunctionNameï¼ŒtypeException
            typeInfo = (TypeInformation&lt;OUT&gt;) new MissingTypeInfo(sourceName, e);
        }
    }
    //æ ¹æ®functionæ˜¯å®ç°äº†ParallelSourceFunctionæ¥åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªå¹¶è¡Œæ•°æ®æºèŠ‚ç‚¹
    boolean isParallel = function instanceof ParallelSourceFunction;
    //é—­åŒ…æ¸…ç†, å¯å‡å°‘åºåˆ—åŒ–å†…å®¹, ä»¥åŠé˜²æ­¢åºåˆ—åŒ–å‡ºé”™
    clean(function);
    //åˆå§‹åŒ–ä¸€ä¸ªChainingStrategy.HEADèŠ‚ç‚¹
    final StreamSource&lt;OUT, ?&gt; sourceOperator = new StreamSource&lt;&gt;(function);
    return new DataStreamSource&lt;&gt;(this, typeInfo, sourceOperator, isParallel, sourceName);//è¿”å›DataStreamSource
}
</code></pre><p>ç”±äºFileMonitoringFunctionç»§æ‰¿çš„æ˜¯SourceFunctionä¸æ˜¯    ParallelSourceFunction æ•…isParallelä¸ºflaseï¼Œå³å¹¶è¡Œåº¦ä¸º1<br>ä¸Šé¢çœ‹åˆ°ChainingStrategyè¿™ä¸ªæšä¸¾ç±»å®é™…æœ‰ä¸‰ä¸ªå±æ€§ï¼š<br>ALWAYS  è¡¨ç¤ºå°½å¯èƒ½çš„ä¸å‰åoperator chaining<br>NEVER  è¡¨ç¤ºä¸ä¼šchaining<br>HEAD  è¡¨ç¤ºåªä¼šchainingåé¢ã€‚å…·ä½“åé¢è¯¦ç»†è®²è§£å…¶ä½œç”¨</p>
<p>æ¥ä¸‹æ¥çœ‹æœ€åä¸€ä¸ªå‡½æ•°DataStreamSource</p>
<pre><code>public DataStreamSource(StreamExecutionEnvironment environment,
        TypeInformation&lt;T&gt; outTypeInfo, StreamSource&lt;T, ?&gt; operator,
        boolean isParallel, String sourceName) {
    super(environment, new SourceTransformation&lt;&gt;(sourceName, operator, outTypeInfo, environment.getParallelism()));

    this.isParallel = isParallel;
    if (!isParallel) {
        setParallelism(1);
    }
}

protected SingleOutputStreamOperator(StreamExecutionEnvironment environment, Transformation&lt;T&gt; transformation) {
    super(environment, transformation);
}

public DataStream(StreamExecutionEnvironment environment, Transformation&lt;T&gt; transformation) {
    this.environment = Preconditions.checkNotNull(environment, &quot;Execution Environment must not be null.&quot;);
    this.transformation = Preconditions.checkNotNull(transformation, &quot;Stream Transformation must not be null.&quot;);
}
</code></pre><p>åé¢å°±æ˜¯ä¸€ç³»åˆ—transform åé¢ç« èŠ‚è¯¦ç»†ä»‹ç»</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;nc -lk 9000&lt;br&gt; bin/flink run examples/streaming/SocketWindowWordCount.jar â€“hostname localhost â€“port 9000&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘flink&lt;br&gt;git clone &lt;a 
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="flink" scheme="http://yoursite.com/tags/flink/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ -ç¥ç»ç½‘ç»œ</title>
    <link href="http://yoursite.com/2018/08/25/Machine%20learning%20Artificial%20Neural%20Network/"/>
    <id>http://yoursite.com/2018/08/25/Machine learning Artificial Neural Network/</id>
    <published>2018-08-25T07:36:00.000Z</published>
    <updated>2018-09-01T14:15:55.889Z</updated>
    
    <content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯äººå·¥ç¥ç»ç½‘ç»œæ¨¡å‹<br>äººå·¥ç¥ç»ç½‘ç»œ(Artificial Neural Network, ANN)æ²¡æœ‰ä¸€ä¸ªä¸¥æ ¼çš„æ­£å¼å®šä¹‰ã€‚å®ƒçš„åŸºæœ¬ç‰¹ç‚¹ï¼Œæ˜¯è¯•å›¾æ¨¡ä»¿å¤§è„‘çš„ç¥ç»å…ƒä¹‹é—´ä¼ é€’ï¼Œå¤„ç†ä¿¡æ¯çš„æ¨¡å¼ã€‚</p>
<p>ä¸€ä¸ªè®¡ç®—æ¨¡å‹ï¼Œè¦è¢«ç§°ä¸ºä¸ºç¥ç»ç½‘ç»œï¼Œé€šå¸¸éœ€è¦å¤§é‡å½¼æ­¤è¿æ¥çš„èŠ‚ç‚¹ ï¼ˆä¹Ÿç§° â€˜ç¥ç»å…ƒâ€™ï¼‰ï¼Œå¹¶ä¸”å…·å¤‡ä¸¤ä¸ªç‰¹æ€§ï¼š<br>æ¯ä¸ªç¥ç»å…ƒï¼Œé€šè¿‡æŸç§ç‰¹å®šçš„è¾“å‡ºå‡½æ•° ï¼ˆä¹Ÿå«æ¿€åŠ±å‡½æ•° activation functionï¼‰ï¼Œè®¡ç®—å¤„ç†æ¥è‡ªå…¶å®ƒç›¸é‚»ç¥ç»å…ƒçš„åŠ æƒè¾“å…¥å€¼<br>ç¥ç»å…ƒä¹‹é—´çš„ä¿¡æ¯ä¼ é€’çš„å¼ºåº¦ï¼Œç”¨æ‰€è°“åŠ æƒå€¼æ¥å®šä¹‰ï¼Œç®—æ³•ä¼šä¸æ–­è‡ªæˆ‘å­¦ä¹ ï¼Œè°ƒæ•´è¿™ä¸ªåŠ æƒå€¼<br>æ€»ç»“ï¼šç¥ç»ç½‘ç»œç®—æ³•çš„æ ¸å¿ƒå°±æ˜¯ï¼šè®¡ç®—ã€è¿æ¥ã€è¯„ä¼°ã€çº é”™ã€å­¦ä¹ </p>
<h4 id="ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼š"><a href="#ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼š" class="headerlink" title="ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼š"></a><strong>ç¥ç»ç½‘ç»œæ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼š</strong></h4><h6 id="å‰å‘ç½‘ç»œ"><a href="#å‰å‘ç½‘ç»œ" class="headerlink" title="å‰å‘ç½‘ç»œ"></a><strong>å‰å‘ç½‘ç»œ</strong></h6><p>ç½‘ç»œä¸­å„ä¸ªç¥ç»å…ƒæ¥å—å‰ä¸€çº§çš„è¾“å…¥ï¼Œå¹¶è¾“å‡ºåˆ°ä¸‹ä¸€çº§ï¼Œç½‘ç»œä¸­æ²¡æœ‰åé¦ˆï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæœ‰å‘æ— ç¯è·¯å›¾è¡¨ç¤ºã€‚è¿™ç§ç½‘ç»œå®ç°ä¿¡å·ä»è¾“å…¥ç©ºé—´åˆ°è¾“å‡ºç©ºé—´çš„å˜æ¢ï¼Œå®ƒçš„ä¿¡æ¯å¤„ç†èƒ½åŠ›æ¥è‡ªäºç®€å•éçº¿æ€§å‡½æ•°çš„å¤šæ¬¡å¤åˆã€‚ç½‘ç»œç»“æ„ç®€å•ï¼Œæ˜“äºå®ç°ã€‚åä¼ ç½‘ç»œæ˜¯ä¸€ç§å…¸å‹çš„å‰å‘ç½‘ç»œã€‚</p>
<h6 id="åé¦ˆç½‘ç»œ"><a href="#åé¦ˆç½‘ç»œ" class="headerlink" title="åé¦ˆç½‘ç»œ"></a><strong>åé¦ˆç½‘ç»œ</strong></h6><p>ç½‘ç»œå†…ç¥ç»å…ƒé—´æœ‰åé¦ˆï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæ— å‘çš„å®Œå¤‡å›¾è¡¨ç¤ºã€‚è¿™ç§ç¥ç»ç½‘ç»œçš„ä¿¡æ¯å¤„ç†æ˜¯çŠ¶æ€çš„å˜æ¢ï¼Œå¯ä»¥ç”¨åŠ¨åŠ›å­¦ç³»ç»Ÿç†è®ºå¤„ç†ã€‚ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸è”æƒ³è®°å¿†åŠŸèƒ½æœ‰å¯†åˆ‡å…³ç³»ã€‚Hopfieldç½‘ç»œã€æ³¢è€³å…¹æ›¼æœºå‡å±äºè¿™ç§ç±»å‹ã€‚</p>
<h4 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a><strong>æ¿€æ´»å‡½æ•°</strong></h4><p>ç”¨äºå¤„ç†å¤æ‚çš„éçº¿æ€§åˆ†ç±»æƒ…å†µã€‚æ¯”çº¿æ€§å›å½’ã€logisticå›å½’çµæ´»ã€‚è®­ç»ƒçš„æ—¶å€™æ³¨æ„è¿‡æ‹Ÿåˆã€‚<br>éçº¿æ€§æ¿€æ´»å‡½æ•°<br>Sigmoid<br>ğ‘“(ğ‘¥)=1/(1+expâ¡(âˆ’ğ‘¥))<br>ç‰¹ç‚¹ï¼š<br>å½“xè¶‹è¿‘è´Ÿæ— ç©·æ—¶ï¼Œyè¶‹è¿‘äº0ï¼›è¶‹è¿‘äºæ­£æ— ç©·æ—¶ï¼Œyè¶‹è¿‘äº1ï¼›<br>xè¶…å‡º[-6,6]çš„èŒƒå›´åï¼Œå‡½æ•°å€¼åŸºæœ¬ä¸Šæ²¡æœ‰å˜åŒ–ï¼Œå€¼éå¸¸æ¥è¿‘0æˆ–è€…1<br>è¯¥å‡½æ•°çš„å€¼åŸŸèŒƒå›´é™åˆ¶åœ¨(0,1)ä¹‹é—´ï¼Œè¿™æ ·sigmoidå‡½æ•°å°±èƒ½ä¸ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒè”ç³»èµ·æ¥äº†ã€‚<br>ğ‘“^â€² (ğ‘¥)=ğ‘“(ğ‘¥)(1âˆ’ğ‘“(ğ‘¥))</p>
<h4 id="åŒæ›²æ­£åˆ‡"><a href="#åŒæ›²æ­£åˆ‡" class="headerlink" title="åŒæ›²æ­£åˆ‡"></a><strong>åŒæ›²æ­£åˆ‡</strong></h4><p>tanhâ¡(ğ‘¥)=(ğ‘’^ğ‘¥âˆ’ğ‘’^(âˆ’ğ‘¥))/(ğ‘’^ğ‘¥+ğ‘’^(âˆ’ğ‘¥) )<br>ç‰¹ç‚¹ï¼š<br>å½“xè¶‹è¿‘è´Ÿæ— ç©·æ—¶ï¼Œyè¶‹è¿‘äº-1ï¼›è¶‹è¿‘äºæ­£æ— ç©·æ—¶ï¼Œyè¶‹è¿‘äº1ï¼›<br>xè¶…å‡º[-3,3]çš„èŒƒå›´åï¼Œå‡½æ•°å€¼åŸºæœ¬ä¸Šæ²¡æœ‰å˜åŒ–ï¼Œå€¼éå¸¸æ¥è¿‘-1æˆ–è€…1<br>è¯¥å‡½æ•°çš„å€¼åŸŸèŒƒå›´é™åˆ¶åœ¨(-1,1)ä¹‹é—´<br>tanh^â€² (ğ‘¥)=1âˆ’tanh(x)^2</p>
<h4 id="ä¿®æ­£çº¿æ€§å•å…ƒRectifier-Linear-Unitsï¼ˆReLUï¼‰"><a href="#ä¿®æ­£çº¿æ€§å•å…ƒRectifier-Linear-Unitsï¼ˆReLUï¼‰" class="headerlink" title="ä¿®æ­£çº¿æ€§å•å…ƒRectifier Linear Unitsï¼ˆReLUï¼‰"></a><strong>ä¿®æ­£çº¿æ€§å•å…ƒRectifier Linear Unitsï¼ˆReLUï¼‰</strong></h4><p>ğ‘“(ğ‘¥)=maxâ¡(0,ğ‘¥)<br>ç‰¹ç‚¹ï¼š<br>åªæœ‰æœ‰ä¸€åŠéšå«å±‚æ˜¯å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œå…¶ä½™éƒ½æ˜¯è¾“å‡ºä¸º0<br>ä¸ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ï¼ˆå³åœ¨sigmoidæ¥è¿‘é¥±å’ŒåŒºæ—¶ï¼Œå¯¼æ•°è¶‹äº0ï¼Œè¿™ç§æƒ…å†µä¼šé€ æˆä¿¡æ¯ä¸¢å¤±ï¼‰<br>åªéœ€æ¯”è¾ƒã€ä¹˜åŠ è¿ç®—ï¼Œå› æ­¤è®¡ç®—æ–¹ä¾¿ï¼Œè®¡ç®—é€Ÿåº¦å¿«ï¼ŒåŠ é€Ÿäº†ç½‘ç»œçš„è®­ç»ƒ<br>ReLUæ¯”sigmoidæ›´æ¥è¿‘ç”Ÿç‰©å­¦çš„æ¿€æ´»æ¨¡å‹<br>è¿˜æœ‰ä¸€äº›æ”¹è¿›æˆ–çš„å˜ä½“</p>
<h4 id="Softplus"><a href="#Softplus" class="headerlink" title="Softplus"></a><strong>Softplus</strong></h4><p>ğ‘“(ğ‘¥)=logâ¡(1+ğ‘’^ğ‘¥ )<br>ç‰¹ç‚¹ï¼š<br>xè¶‹äºè´Ÿæ— ç©·æ—¶ï¼Œsoftplusè¶‹äº0ï¼›xè¶‹äºæ­£æ— ç©·æ—¶ï¼Œ softplusè¶‹äºx<br>å®ƒæ˜¯ReLUçš„å¹³æ»‘ç‰ˆ<br>å®ƒæ˜¯sigmoidçš„åŸå‡½æ•°</p>
<h3 id="æŸå¤±å‡½æ•°"><a href="#æŸå¤±å‡½æ•°" class="headerlink" title="æŸå¤±å‡½æ•°"></a><strong>æŸå¤±å‡½æ•°</strong></h3><p>ç”¨äºå›å½’ä¸­çš„å‡æ–¹æŸå¤±ï¼š<br>ğ¸=1/2 (ğ‘¦âˆ’ğ‘¦ Ì‚ )^2<br>ç”¨äºåˆ†ç±»ä¸­çš„äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼š<br>ğ¸=âˆ’âˆ‘â–’ã€–ğ‘¦<em>ğ‘˜ ğ‘™ğ‘œğ‘”((ğ‘¦</em>ğ‘˜ ) Ì‚ )â€ â€œ ã€—<br>k=1,2,â€¦,mè¡¨ç¤ºmç§ç±»åˆ«ã€‚åœ¨è¿çº¦é¢„æµ‹ä¸­m=2</p>
<p>åŸºäº Anaconda çš„å®‰è£…<br>å®‰è£…tensorflow<br>å»ºç«‹ä¸€ä¸ª conda è®¡ç®—ç¯å¢ƒåå­—å«tensorflow:</p>
<h1 id="Python-2-7"><a href="#Python-2-7" class="headerlink" title="Python 2.7"></a>Python 2.7</h1><p>$ conda create -n tensorflow python=2.7</p>
<h1 id="Python-3-4"><a href="#Python-3-4" class="headerlink" title="Python 3.4"></a>Python 3.4</h1><p>$ conda create -n tensorflow python=3.4</p>
<p>activate tensorflow</p>
<p>å®‰è£…tensorflow<br>conda install â€“channel <a href="https://conda.anaconda.org/conda-forge" target="_blank" rel="external">https://conda.anaconda.org/conda-forge</a> tensorflow</p>
<p>import tensorflow as tf<br>é€€å‡ºpython3ç¯å¢ƒæˆ–å½“ä½ ä¸ç”¨ TensorFlow çš„æ—¶å€™,å…³é—­ç¯å¢ƒ:<br>(tensorflow)$  deactivate<br>$  # Your prompt should change back</p>
<p>windowsä¸‹å®‰è£…<br>å‡çº§pip<br>python -m pip install â€“upgrade pip<br>å®‰è£…tensorflow<br>pip3 install â€“upgrade <a href="https://storage.googleapis.com/tensorflow/windows/cpu/tensorflow-0.12.0-cp35-cp35m-win_amd64.whl" target="_blank" rel="external">https://storage.googleapis.com/tensorflow/windows/cpu/tensorflow-0.12.0-cp35-cp35m-win_amd64.whl</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»€ä¹ˆæ˜¯äººå·¥ç¥ç»ç½‘ç»œæ¨¡å‹&lt;br&gt;äººå·¥ç¥ç»ç½‘ç»œ(Artificial Neural Network, ANN)æ²¡æœ‰ä¸€ä¸ªä¸¥æ ¼çš„æ­£å¼å®šä¹‰ã€‚å®ƒçš„åŸºæœ¬ç‰¹ç‚¹ï¼Œæ˜¯è¯•å›¾æ¨¡ä»¿å¤§è„‘çš„ç¥ç»å…ƒä¹‹é—´ä¼ é€’ï¼Œå¤„ç†ä¿¡æ¯çš„æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªè®¡ç®—æ¨¡å‹ï¼Œè¦è¢«ç§°ä¸ºä¸ºç¥ç»ç½‘ç»œï¼Œé€šå¸¸éœ€è¦å¤§é‡å½¼æ­¤è¿æ¥çš„èŠ‚ç‚¹ ï¼ˆä¹Ÿ
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>TensorFlow å®‰è£…ä½¿ç”¨</title>
    <link href="http://yoursite.com/2018/08/18/Install%20TensorFlow/"/>
    <id>http://yoursite.com/2018/08/18/Install TensorFlow/</id>
    <published>2018-08-18T03:30:00.000Z</published>
    <updated>2018-09-01T14:15:41.490Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŸºäºAnacondaçš„Tensorflow"><a href="#åŸºäºAnacondaçš„Tensorflow" class="headerlink" title="åŸºäºAnacondaçš„Tensorflow"></a>åŸºäºAnacondaçš„Tensorflow</h2><h3 id="å®‰è£…Anaconda"><a href="#å®‰è£…Anaconda" class="headerlink" title="å®‰è£…Anaconda"></a>å®‰è£…Anaconda</h3><p>æ ¹æ®å®˜ç½‘é€‰æ‹©åŸºäºä¸åŒçš„pythonç‰ˆæœ¬å®‰è£…ï¼š<br><a href="https://www.anaconda.com/download/#windows" target="_blank" rel="external">https://www.anaconda.com/download/#windows</a></p>
<p>åšä¸»é€‰æ‹©Python 3.6 versionï¼Œwindows 64bit</p>
<p>å®‰è£…å®Œæˆåéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œæ ¹ç›®å½•å’ŒScriptsç›®å½•åŠ å…¥åˆ°Pathä¸‹é¢<br>G:\ProgramData\Anaconda3;G:\ProgramData\Anaconda3\Scripts</p>
<p>1.æ£€æµ‹anacondaç¯å¢ƒæ˜¯å¦å®‰è£…æˆåŠŸï¼šconda â€“version<br>2.æ£€æµ‹ç›®å‰å®‰è£…äº†å“ªäº›ç¯å¢ƒå˜é‡ï¼šconda info â€“envs</p>
<p>3.å®‰è£…pythonç‰ˆæœ¬ï¼ˆåšä¸»é€‰æ‹©3.5ï¼‰ï¼šconda create â€“name tensorflow python=3.5<br>å®‰è£…åæ˜¯3.5.6<br>4.æ¿€æ´»tensflowçš„ç¯å¢ƒï¼šactivate tensorflow<br>5.æ£€æµ‹tensflowçš„ç¯å¢ƒæ·»åŠ åˆ°äº†Anacondaé‡Œé¢ï¼šconda info â€“envs<br><img src="http://oh6ybr0jg.bkt.clouddn.com/TENSORFLOW_ENV.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>6.å®‰è£…tensorflow gruç‰ˆæœ¬<br>pip install â€“ignore-installed â€“upgrade tensorflow-gpu</p>
<p>å®‰è£…å…¶ä»–ç»„ä»¶ï¼š<br>pip install pandas<br>conda install scikit-learn<br>conda install matplotlib</p>
<p>IDEæƒ³è¦ä½¿ç”¨tensorflow éœ€è¦åˆ¶å®štensorflowçš„pythonç‰ˆæœ¬<br><img src="http://oh6ybr0jg.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20180901134100.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;åŸºäºAnacondaçš„Tensorflow&quot;&gt;&lt;a href=&quot;#åŸºäºAnacondaçš„Tensorflow&quot; class=&quot;headerlink&quot; title=&quot;åŸºäºAnacondaçš„Tensorflow&quot;&gt;&lt;/a&gt;åŸºäºAnacondaçš„Tensorflow&lt;/
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ -éšæœºæ£®æ—</title>
    <link href="http://yoursite.com/2018/08/16/Mathematical%20%20Random%20Forest/"/>
    <id>http://yoursite.com/2018/08/16/Mathematical  Random Forest/</id>
    <published>2018-08-16T01:30:00.000Z</published>
    <updated>2018-09-01T14:13:49.214Z</updated>
    
    <content type="html"><![CDATA[<p>sklearn.ensemble.RandomForestClassifier</p>
<ul>
<li><strong>n_estimators</strong> : integer, optional (default=10)<br> æ£®æ—é‡Œï¼ˆå†³ç­–ï¼‰æ ‘çš„æ•°ç›®</li>
<li><strong>criterion</strong> : string, optional (default=â€giniâ€)<br> è¡¡é‡åˆ†è£‚è´¨é‡çš„æ€§èƒ½ï¼ˆå‡½æ•°ï¼‰ã€‚ å—æ”¯æŒçš„æ ‡å‡†æ˜¯åŸºå°¼ä¸çº¯åº¦çš„â€giniâ€,å’Œä¿¡æ¯å¢ç›Šçš„â€entropyâ€ï¼ˆç†µï¼‰ã€‚<br>æ³¨æ„ï¼šè¿™ä¸ªå‚æ•°æ˜¯ç‰¹å®šæ ‘çš„</li>
<li><p><strong>max_features</strong> : int, float, string or None, optional (default=â€autoâ€)<br> é€‰æ‹©æœ€é€‚å±æ€§æ—¶åˆ’åˆ†çš„ç‰¹å¾ä¸èƒ½è¶…è¿‡æ­¤å€¼:</p>
<pre><code>å¦‚æœæ˜¯intï¼Œå°±è¦è€ƒè™‘æ¯ä¸€æ¬¡åˆ†å‰²å¤„çš„max_featureç‰¹å¾
å¦‚æœæ˜¯floatï¼Œé‚£ä¹ˆmax_featureså°±æ˜¯ä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œé‚£ä¹ˆï¼ˆmax_feature*n_featuresï¼‰ç‰¹å¾æ•´æ•°å€¼æ˜¯åœ¨æ¯ä¸ªåˆ†å‰²å¤„è€ƒè™‘çš„ã€‚
å¦‚æœæ˜¯autoï¼Œé‚£ä¹ˆmax_features=sqrt(n_features)ï¼Œå³n_featuresçš„å¹³æ–¹æ ¹å€¼ã€‚
å¦‚æœæ˜¯log2ï¼Œé‚£ä¹ˆmax_features=log2(n_features)
å¦‚æœæ˜¯None,é‚£ä¹ˆmax_features=n_features
</code></pre><p>æ³¨æ„ï¼šå¯»æ‰¾åˆ†å‰²ç‚¹ä¸ä¼šåœæ­¢ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å°‘ä¸€ä¸ªæœ‰æ•ˆçš„èŠ‚ç‚¹åˆ’åˆ†åŒºï¼Œå³ä½¿å®ƒéœ€è¦æœ‰æ•ˆæ£€æŸ¥è¶…è¿‡max_featuresçš„ç‰¹å¾ã€‚</p>
</li>
<li><p><strong>max_depth</strong> : integer or None, optional (default=None)<br>ï¼ˆå†³ç­–ï¼‰æ ‘çš„æœ€å¤§æ·±åº¦ã€‚å¦‚æœå€¼ä¸ºNoneï¼Œé‚£ä¹ˆä¼šæ‰©å±•èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰€æœ‰çš„å¶å­æ˜¯çº¯å‡€çš„ï¼Œæˆ–è€…ç›´åˆ°æ‰€æœ‰å¶å­åŒ…å«å°‘äºmin_sample_splitçš„æ ·æœ¬ã€‚</p>
</li>
<li><p><strong>min_samples_split</strong> : int, float, optional (default=2)<br> æ ¹æ®å±æ€§åˆ’åˆ†èŠ‚ç‚¹æ—¶ï¼Œæ¯ä¸ªåˆ’åˆ†æœ€å°‘çš„æ ·æœ¬æ•°ã€‚</p>
<pre><code>å¦‚æœä¸ºintï¼Œé‚£ä¹ˆè€ƒè™‘min_samples_splitä½œä¸ºæœ€å°çš„æ•°å­—ã€‚
å¦‚æœä¸ºfloatï¼Œé‚£ä¹ˆmin_samples_splitæ˜¯ä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œå¹¶ä¸”æŠŠceil(min_samples_split*n_samples)æ˜¯æ¯ä¸€ä¸ªåˆ†å‰²æœ€å°çš„æ ·æœ¬æ•°é‡ã€‚
</code></pre><p> åœ¨ç‰ˆæœ¬0.18ä¸­æ›´æ”¹ï¼šä¸ºç™¾åˆ†æ¯”æ·»åŠ æµ®ç‚¹å€¼ã€‚<br> å¶å­èŠ‚ç‚¹æœ€å°‘çš„æ ·æœ¬æ•°ã€‚</p>
<pre><code>å¦‚æœä¸ºintï¼Œé‚£ä¹ˆè€ƒè™‘min_samples_leafä½œä¸ºæœ€å°çš„æ•°å­—ã€‚
å¦‚æœä¸ºfloatï¼Œé‚£ä¹ˆmin_samples_leafä¸ºä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œå¹¶ä¸”ceil(min_samples_leaf*n_samples)æ˜¯æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€å°æ ·æœ¬æ•°é‡ã€‚
</code></pre><p> åœ¨ç‰ˆæœ¬0.18ä¸­æ›´æ”¹ï¼šä¸ºç™¾åˆ†æ¯”æ·»åŠ æµ®ç‚¹å€¼ã€‚</p>
</li>
<li><strong>min_weight_fraction_leaf</strong> : float, optional (default=0.)<br> ä¸€ä¸ªå¶å­èŠ‚ç‚¹æ‰€éœ€è¦çš„æƒé‡æ€»å’Œï¼ˆæ‰€æœ‰çš„è¾“å…¥æ ·æœ¬ï¼‰çš„æœ€å°åŠ æƒåˆ†æ•°ã€‚å½“sample_weightæ²¡æœ‰æä¾›æ—¶ï¼Œæ ·æœ¬å…·æœ‰ç›¸åŒçš„æƒé‡</li>
<li><strong>max_leaf_nodes</strong> : int or None, optional (default=None)<br> å¶å­æ ‘çš„æœ€å¤§æ ·æœ¬æ•°ã€‚<br> ä»¥æœ€ä¼˜çš„æ–¹æ³•ä½¿ç”¨max_leaf_nodesæ¥ç”Ÿé•¿æ ‘ã€‚æœ€å¥½çš„èŠ‚ç‚¹è¢«å®šä¹‰ä¸ºä¸çº¯åº¦ä¸Šçš„ç›¸å¯¹å‡å°‘ã€‚å¦‚æœä¸ºNone,é‚£ä¹ˆä¸é™åˆ¶å¶å­èŠ‚ç‚¹çš„æ•°é‡ã€‚</li>
<li><strong>min_impurity_split</strong> : float,<br> æ ‘æ—©æœŸç”Ÿé•¿çš„é˜ˆå€¼ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„ä¸çº¯åº¦è¶…è¿‡é˜ˆå€¼é‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°†ä¼šåˆ†è£‚ï¼Œå¦åˆ™å®ƒè¿˜æ˜¯ä¸€ç‰‡å¶å­ã€‚<br> è‡ª0.19ç‰ˆä»¥åä¸æ¨èä½¿ç”¨ï¼šmin_impurity_splitå·²è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯0.19ä¸­çš„min_impurity_decreaseã€‚min_impurity_splitå°†åœ¨0.21ä¸­è¢«åˆ é™¤ã€‚ ä½¿ç”¨min_impurity_decrease</li>
<li><strong>min_impurity_decrease</strong> : float, optional (default=0.)<br> å¦‚æœèŠ‚ç‚¹çš„åˆ†è£‚å¯¼è‡´çš„ä¸çº¯åº¦çš„ä¸‹é™ç¨‹åº¦å¤§äºæˆ–è€…ç­‰äºè¿™ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°†ä¼šè¢«åˆ†è£‚ã€‚<br> ä¸çº¯åº¦åŠ æƒå‡å°‘æ–¹ç¨‹å¼å¦‚ä¸‹ï¼š<br> N_t / N <em> (impurity - N_t_R / N_t </em> right_impurity<pre><code>- N_t_L / N_t * left_impurity)
</code></pre> Næ˜¯æ ·æœ¬æ€»çš„æ•°é‡ï¼ŒN_tæ˜¯å½“å‰èŠ‚ç‚¹å¤„çš„æ ·æœ¬æ•°é‡ï¼ŒN_t_Læ˜¯å·¦å­©å­èŠ‚ç‚¹æ ·æœ¬çš„æ•°é‡,è¿˜æœ‰N_t_Ræ˜¯å³å­©å­èŠ‚ç‚¹çš„æ ·æœ¬æ•°é‡ã€‚<br> Nï¼ŒN_tï¼ŒN_t_Rå’ŒN_t_Lå…¨éƒ¨æ˜¯æŒ‡åŠ æƒæ€»å’Œï¼Œå¦‚æœsample_weighté€šè¿‡çš„è¯ã€‚<br> 0.19ç‰ˆæœ¬æ–°åŠ çš„å‚æ•°ã€‚</li>
<li><strong>bootstrap</strong> : boolean, optional (default=True)<br> å»ºç«‹å†³ç­–æ ‘æ—¶ï¼Œæ˜¯å¦ä½¿ç”¨æœ‰æ”¾å›æŠ½æ ·ã€‚</li>
<li><strong>oob_score</strong> : bool (default=False)<br> æ˜¯å¦ä½¿ç”¨è¢‹å¤–æ ·æœ¬æ¥ä¼°è®¡æ³›åŒ–ç²¾åº¦ã€‚</li>
<li><strong>n_jobs</strong> : integer, optional (default=1)<br> ç”¨äºæ‹Ÿåˆå’Œé¢„æµ‹çš„å¹¶è¡Œè¿è¡Œçš„å·¥ä½œï¼ˆä½œä¸šï¼‰æ•°é‡ã€‚å¦‚æœå€¼ä¸º-1ï¼Œé‚£ä¹ˆå·¥ä½œæ•°é‡è¢«è®¾ç½®ä¸ºæ ¸çš„æ•°é‡ã€‚</li>
<li><strong>random_state</strong> : int, RandomState instance or None, optional (default=None)<br> RandomStateIf intï¼Œrandom_stateæ˜¯éšæœºæ•°ç”Ÿæˆå™¨ä½¿ç”¨çš„ç§å­;<br> å¦‚æœæ˜¯RandomStateå®ä¾‹ï¼Œrandom_stateå°±æ˜¯éšæœºæ•°ç”Ÿæˆå™¨;<br> å¦‚æœä¸ºNoneï¼Œåˆ™éšæœºæ•°ç”Ÿæˆå™¨æ˜¯np.randomä½¿ç”¨çš„RandomStateå®ä¾‹ã€‚</li>
<li><strong>verbose</strong> : int, optional (default=0)<br> æ§åˆ¶å†³ç­–æ ‘å»ºç«‹è¿‡ç¨‹çš„å†—ä½™åº¦ã€‚</li>
<li><strong>warm_start</strong> : bool, optional (default=False)<br> å½“è¢«è®¾ç½®ä¸ºTrueæ—¶ï¼Œé‡æ–°ä½¿ç”¨ä¹‹å‰å‘¼å«çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨æ¥ç»™å…¨ä½“æ‹Ÿåˆå’Œæ·»åŠ æ›´å¤šçš„ä¼°è®¡å™¨ï¼Œåä¹‹ï¼Œä»…ä»…åªæ˜¯ä¸ºäº†æ‹Ÿåˆä¸€ä¸ªå…¨æ–°çš„æ£®æ—ã€‚</li>
<li>class_weight : dict, list of dicts, â€œbalancedâ€,<br> â€œbalanced_subsampleâ€ æˆ–è€…None,ï¼ˆé»˜è®¤å€¼ä¸ºNoneï¼‰,ä¸æ ¼å¼{class_label: weight}ç›¸å…³è”çš„ç±»çš„å¯é€‰çš„æƒå€¼ã€‚å¦‚æœæ²¡æœ‰ç»™å€¼ï¼Œæ‰€æœ‰çš„ç±»åˆ°éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæƒå€¼ã€‚å¯¹äºå¤šè¾“å‡ºé—®é¢˜ï¼Œä¸€ä¸ªå­—å…¸åº    åˆ—å¯ä»¥æŒ‰ç…§yçš„åˆ—çš„é¡ºåˆ©è¢«æä¾›ã€‚<br> è¯·æ³¨æ„ï¼Œå¯¹äºå¤šè¾“å‡ºï¼ˆåŒ…æ‹¬å¤šæ ‡ç­¾ï¼‰ï¼Œå…¶æƒå€¼åº”è¯¥è¢«å®šä¹‰ä¸ºå®ƒè‡ªå·±å­—å…¸çš„æ¯ä¸€åˆ—çš„æ¯ä¸€ä¸ªç±»ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå››ç±»å¤šæ ‡ç­¾åˆ†ç±»ï¼Œæƒå€¼åº”è¯¥å¦‚[{0: 1, 1: 1}, {0: 1, 1: 5}, {0: 1, 1: 1}, {0: 1, 1: 1}] è¿™æ ·ï¼Œè€Œä¸æ˜¯[{1:1}, {2:5}, {3:1}, {4:1}].è¿™æ ·ã€‚<br> â€œbalancedâ€æ¨¡å¼ä½¿ç”¨yçš„å€¼æ¥è‡ªåŠ¨çš„è°ƒæ•´æƒå€¼ï¼Œä¸è¾“å…¥æ•°æ®ä¸­ç±»åˆ«é¢‘ç‡æˆåæ¯”ï¼Œå¦‚ï¼š<pre><code>n_samples / (n_classes * np.bincount(y))
</code></pre> â€œbalanced_subsampleâ€æ¨¡å¼å’Œâ€balancedâ€ç›¸åŒï¼Œé™¤äº†æƒå€¼æ˜¯åŸºäºæ¯æ£µæˆé•¿æ ‘æœ‰æ”¾å›æŠ½æ ·è®¡ç®—çš„ã€‚<br> å¯¹äºå¤šè¾“å‡ºï¼Œyçš„æ¯åˆ—æƒå€¼å°†ç›¸ä¹˜ã€‚<br> è¯·æ³¨æ„ï¼Œå¦‚æœæŒ‡å®šäº†sample_weight,è¿™äº›æƒå€¼å°†ä¼šå’Œsample_weightç›¸ä¹˜ï¼ˆé€šè¿‡æ‹Ÿåˆæ–¹æ³•ä¼ é€’ï¼‰ã€‚</li>
</ul>
<p>Attributes:    å±æ€§</p>
<ul>
<li><strong>estimators_</strong> :  å†³ç­–æ ‘åˆ†ç±»å™¨çš„åºåˆ—<br> æ‹Ÿåˆçš„å­ä¼°è®¡å™¨çš„é›†åˆã€‚</li>
<li><strong>classes_</strong> :  æ•°ç»„ç»´åº¦=[n_classes]çš„æ•°ç»„æˆ–è€…ä¸€ä¸ªè¿™æ ·æ•°ç»„çš„åºåˆ—ã€‚<br> ç±»åˆ«æ ‡ç­¾ï¼ˆå•ä¸€è¾“å‡ºé—®é¢˜ï¼‰ï¼Œæˆ–è€…ç±»åˆ«æ ‡ç­¾çš„æ•°ç»„åºåˆ—ï¼ˆå¤šè¾“å‡ºé—®é¢˜ï¼‰ã€‚</li>
<li><strong>n<em>classes</em></strong> : int or list<br> ç±»åˆ«çš„æ•°é‡ï¼ˆå•è¾“å‡ºé—®é¢˜ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªåºåˆ—ï¼ŒåŒ…å«æ¯ä¸€ä¸ªè¾“å‡ºçš„ç±»åˆ«æ•°é‡ï¼ˆå¤šè¾“å‡ºé—®é¢˜ï¼‰</li>
<li><strong>n<em>features</em></strong> : int<br> æ‰§è¡Œæ‹Ÿåˆæ—¶çš„ç‰¹å¾æ•°é‡ã€‚</li>
<li><strong>n<em>outputs</em></strong> : int<br> æ‰§è¡Œæ‹Ÿåˆæ—¶çš„è¾“å‡ºæ•°é‡ã€‚</li>
<li><strong>feature<em>importances</em></strong> : array of shape = [n_features]<br> ç‰¹å¾çš„é‡è¦æ€§ï¼ˆå€¼è¶Šé«˜ï¼Œç‰¹å¾è¶Šé‡è¦ï¼‰</li>
<li><strong>oob<em>score</em></strong> : float<br>ä½¿ç”¨è¢‹å¤–ä¼°è®¡è·å¾—çš„è®­ç»ƒæ•°æ®é›†çš„å¾—åˆ†ã€‚</li>
<li><strong>oob_decision<em>function</em></strong> :ç»´åº¦=[n_samples,n_classes]çš„æ•°ç»„<br> åœ¨è®­ç»ƒé›†ä¸Šç”¨è¢‹å¤–ä¼°è®¡è®¡ç®—çš„å†³ç­–å‡½æ•°ã€‚å¦‚æœn_estimatorså¾ˆå°çš„è¯ï¼Œé‚£ä¹ˆåœ¨æœ‰æ”¾å›æŠ½æ ·ä¸­ï¼Œä¸€ä¸ªæ•°æ®ç‚¹ä¹Ÿä¸ä¼šè¢«å¿½ç•¥æ˜¯å¯èƒ½çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œoob_decision<em>function</em> å¯èƒ½åŒ…æ‹¬NaNã€‚</li>
</ul>
<p>å‚æ•°çš„é»˜è®¤å€¼æ§åˆ¶å†³ç­–æ ‘çš„å¤§å°ï¼ˆä¾‹å¦‚ï¼Œmax_depthï¼Œï¼Œmin_samples_leafç­‰ç­‰ï¼‰ï¼Œå¯¼è‡´å®Œå…¨çš„ç”Ÿé•¿å’Œåœ¨æŸäº›æ•°æ®é›†ä¸Šå¯èƒ½éå¸¸å¤§çš„æœªä¿®å‰ªçš„æ ‘ã€‚ä¸ºäº†é™ä½å†…å®¹æ¶ˆè€—ï¼Œå†³ç­–æ ‘çš„å¤æ‚åº¦å’Œå¤§å°åº”è¯¥é€šè¿‡è®¾ç½®è¿™äº›å‚æ•°å€¼æ¥æ§åˆ¶ã€‚<br>è¿™äº›ç‰¹å¾æ€»æ˜¯åœ¨æ¯ä¸ªåˆ†å‰²ä¸­éšæœºæ’åˆ—ã€‚ å› æ­¤ï¼Œå³ä½¿ä½¿ç”¨ç›¸åŒçš„è®­ç»ƒæ•°æ®ï¼Œmax_features = n_featureså’Œbootstrap = Falseï¼Œå¦‚æœåœ¨æœç´¢æœ€ä½³åˆ†å‰²æœŸé—´æ‰€åˆ—ä¸¾çš„è‹¥å¹²åˆ†å‰²çš„å‡†åˆ™çš„æ”¹è¿›æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆæ‰¾åˆ°çš„æœ€ä½³åˆ†å‰²ç‚¹å¯èƒ½ä¼šä¸åŒã€‚ ä¸ºäº†åœ¨æ‹Ÿåˆè¿‡ç¨‹ä¸­è·å¾—ä¸€ä¸ªç¡®å®šçš„è¡Œä¸ºï¼Œrandom_stateå°†ä¸å¾—ä¸è¢«ä¿®æ­£ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;sklearn.ensemble.RandomForestClassifier&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;n_estimators&lt;/strong&gt; : integer, optional (default=10)&lt;br&gt; æ£®æ—é‡Œï¼ˆå†³ç­–ï¼‰æ ‘çš„æ•°ç›®&lt;/li&gt;

    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ -æ¢¯åº¦ä¸‹é™</title>
    <link href="http://yoursite.com/2018/04/27/Mathematical%20regression%20gradient%20descent/"/>
    <id>http://yoursite.com/2018/04/27/Mathematical regression gradient descent/</id>
    <published>2018-04-27T01:30:00.000Z</published>
    <updated>2018-07-25T16:09:57.310Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ¢¯åº¦ä¸‹é™ï¼š"><a href="#æ¢¯åº¦ä¸‹é™ï¼š" class="headerlink" title="æ¢¯åº¦ä¸‹é™ï¼š"></a>æ¢¯åº¦ä¸‹é™ï¼š</h3><p>æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•ï¼ˆBatch Gradient Descentï¼Œç®€ç§°BGDï¼‰<br>    ä¼˜ç‚¹ï¼šå…¨å±€æœ€ä¼˜è§£ï¼›æ˜“äºå¹¶è¡Œå®ç°ï¼›<br>ã€€ã€€ç¼ºç‚¹ï¼šå½“æ ·æœ¬æ•°ç›®å¾ˆå¤šæ—¶ï¼Œè®­ç»ƒè¿‡ç¨‹ä¼šå¾ˆæ…¢ã€‚<br>éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼ˆStochastic Gradient Descentï¼Œç®€ç§°SGDï¼‰<br>    ä¼˜ç‚¹ï¼šè®­ç»ƒé€Ÿåº¦å¿«ï¼›è¿­ä»£æ¬¡æ•°å°‘<br>    ç¼ºç‚¹ï¼šå‡†ç¡®åº¦ä¸‹é™ï¼Œå¹¶ä¸æ˜¯å…¨å±€æœ€ä¼˜ï¼›ä¸æ˜“äºå¹¶è¡Œå®ç°ã€‚<br>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆMBGDï¼‰<br>å¦‚æœæŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼Œæ¢¯åº¦ä¸‹é™æ³•å¾—åˆ°çš„è§£å°±ä¸€å®šæ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚</p>
<h4 id="å‡¸å‡¹å‡½æ•°ï¼š"><a href="#å‡¸å‡¹å‡½æ•°ï¼š" class="headerlink" title="å‡¸å‡¹å‡½æ•°ï¼š"></a>å‡¸å‡¹å‡½æ•°ï¼š</h4><p>è®¾f(x)åœ¨åŒºé—´Dä¸Šè¿ç»­ï¼Œå¦‚æœå¯¹Dä¸Šä»»æ„ä¸¤ç‚¹aã€bæ’æœ‰<br>fï¼ˆï¼ˆa+bï¼‰/2ï¼‰&lt;(f(a)+f(b))/2<br>é‚£ä¹ˆç§°f(x)åœ¨Dä¸Šçš„å›¾å½¢æ˜¯ï¼ˆå‘ä¸Šï¼‰å‡¹çš„ï¼ˆæˆ–å‡¹å¼§ï¼‰ï¼›å¦‚æœæ’æœ‰<br>fï¼ˆï¼ˆa+bï¼‰/2ï¼‰&gt;(f(a)+f(b))/2<br>é‚£ä¹ˆç§°f(x)åœ¨Dä¸Šçš„å›¾å½¢æ˜¯ï¼ˆå‘ä¸Šï¼‰å‡¸çš„ï¼ˆæˆ–å‡¸å¼§ï¼‰</p>
<h3 id="æ¢¯åº¦ä¸‹é™ç›¸å…³æ¦‚å¿µï¼š"><a href="#æ¢¯åº¦ä¸‹é™ç›¸å…³æ¦‚å¿µï¼š" class="headerlink" title="æ¢¯åº¦ä¸‹é™ç›¸å…³æ¦‚å¿µï¼š"></a>æ¢¯åº¦ä¸‹é™ç›¸å…³æ¦‚å¿µï¼š</h3><ol>
<li>æ­¥é•¿ï¼ˆLearning rateï¼‰ï¼šæ­¥é•¿å†³å®šäº†åœ¨æ¢¯åº¦ä¸‹é™è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ­¥æ²¿æ¢¯åº¦è´Ÿæ–¹å‘å‰è¿›çš„é•¿åº¦ã€‚ç”¨ä¸Šé¢ä¸‹å±±çš„ä¾‹å­ï¼Œæ­¥é•¿å°±æ˜¯åœ¨å½“å‰è¿™ä¸€æ­¥æ‰€åœ¨ä½ç½®æ²¿ç€æœ€é™¡å³­æœ€æ˜“ä¸‹å±±çš„ä½ç½®èµ°çš„é‚£ä¸€æ­¥çš„é•¿åº¦ã€‚</li>
</ol>
<p>2.ç‰¹å¾ï¼ˆfeatureï¼‰ï¼šæŒ‡çš„æ˜¯æ ·æœ¬ä¸­è¾“å…¥éƒ¨åˆ†ï¼Œæ¯”å¦‚2ä¸ªå•ç‰¹å¾çš„æ ·æœ¬ï¼ˆx(0),y(0)ï¼‰,ï¼ˆx(1),y(1)ï¼‰ï¼ˆx(0),y(0)ï¼‰,ï¼ˆx(1),y(1)ï¼‰,åˆ™ç¬¬ä¸€ä¸ªæ ·æœ¬ç‰¹å¾ä¸ºx(0)x(0)ï¼Œç¬¬ä¸€ä¸ªæ ·æœ¬è¾“å‡ºä¸ºy(0)y(0)ã€‚</p>
<ol>
<li><p>å‡è®¾å‡½æ•°ï¼ˆhypothesis functionï¼‰ï¼šåœ¨ç›‘ç£å­¦ä¹ ä¸­ï¼Œä¸ºäº†æ‹Ÿåˆè¾“å…¥æ ·æœ¬ï¼Œè€Œä½¿ç”¨çš„å‡è®¾å‡½æ•°ï¼Œè®°ä¸ºhÎ¸(x)hÎ¸(x)ã€‚æ¯”å¦‚å¯¹äºå•ä¸ªç‰¹å¾çš„mä¸ªæ ·æœ¬ï¼ˆx(i),y(i)ï¼‰(i=1,2,â€¦m)ï¼ˆx(i),y(i)ï¼‰(i=1,2,â€¦m),å¯ä»¥é‡‡ç”¨æ‹Ÿåˆå‡½æ•°å¦‚ä¸‹ï¼š hÎ¸(x)=Î¸0+Î¸1xhÎ¸(x)=Î¸0+Î¸1xã€‚</p>
</li>
<li><p>æŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰ï¼šä¸ºäº†è¯„ä¼°æ¨¡å‹æ‹Ÿåˆçš„å¥½åï¼Œé€šå¸¸ç”¨æŸå¤±å‡½æ•°æ¥åº¦é‡æ‹Ÿåˆçš„ç¨‹åº¦ã€‚æŸå¤±å‡½æ•°æå°åŒ–ï¼Œæ„å‘³ç€æ‹Ÿåˆç¨‹åº¦æœ€å¥½ï¼Œå¯¹åº”çš„æ¨¡å‹å‚æ•°å³ä¸ºæœ€ä¼˜å‚æ•°ã€‚åœ¨çº¿æ€§å›å½’ä¸­ï¼ŒæŸå¤±å‡½æ•°é€šå¸¸ä¸ºæ ·æœ¬è¾“å‡ºå’Œå‡è®¾å‡½æ•°çš„å·®å–å¹³æ–¹ã€‚æ¯”å¦‚å¯¹äºmä¸ªæ ·æœ¬ï¼ˆxi,yiï¼‰(i=1,2,â€¦m)ï¼ˆxi,yiï¼‰(i=1,2,â€¦m),é‡‡ç”¨çº¿æ€§å›å½’ï¼ŒæŸå¤±å‡½æ•°ä¸ºï¼š</p>
<pre><code>J(Î¸0,Î¸1)=âˆ‘i=1m(hÎ¸(xi)âˆ’yi)2J(Î¸0,Î¸1)=âˆ‘i=1m(hÎ¸(xi)âˆ’yi)2
</code></pre><p>å…¶ä¸­xixiè¡¨ç¤ºç¬¬iä¸ªæ ·æœ¬ç‰¹å¾ï¼Œyiyiè¡¨ç¤ºç¬¬iä¸ªæ ·æœ¬å¯¹åº”çš„è¾“å‡ºï¼ŒhÎ¸(xi)hÎ¸(xi)ä¸ºå‡è®¾å‡½æ•°ã€‚
ã€€ã€€ã€€ã€€</p>
</li>
</ol>
<h3 id="å±€éƒ¨åŠ æƒå›å½’"><a href="#å±€éƒ¨åŠ æƒå›å½’" class="headerlink" title="å±€éƒ¨åŠ æƒå›å½’"></a>å±€éƒ¨åŠ æƒå›å½’</h3><p>ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯åœ¨å…ˆæ‹Ÿåˆå‡ºä¸€æ¡æ›²çº¿ï¼Œç„¶åå†ç”¨è¿™ä¸ªæ›²çº¿å»é¢„æµ‹éœ€è¦é¢„æµ‹çš„ç‚¹ã€‚(æºè‡ªç™¾åº¦)<br>ä¸ºä»€ä¹ˆæ”¹è¿›è¦ç”¨åŠ æƒå›å½’å‘¢ï¼Ÿ å¾ˆç®€å•ï¼Œå› ä¸ºéçº¿æ€§æ‹Ÿåˆå‡ºç›´çº¿è¯¯å·®ä¼šå¾ˆå¤§ï¼Œè¿™é‡Œçš„å±€éƒ¨åŠ æƒç±»ä¼¼äºknnç®—æ³•çš„æƒé‡ï¼Œå³è·ç¦»ä¸­å¿ƒç‚¹è¶Šè¿‘çš„æƒé‡è¶Šå¤§ï¼Œå¯¹æ‹Ÿåˆæ›²çº¿çš„å½±å“ä¹Ÿå°±è¶Šå¤§ï¼Œæ‰€ä»¥ä¹Ÿæœ‰äº†å±€éƒ¨åŠ æƒè¿™ä¸€åè¯</p>
<p>å‚è€ƒæ–‡çŒ®ï¼š<br><a href="https://blog.csdn.net/Gentle_Guan/article/details/76586689?locationNum=8&amp;fps=1" target="_blank" rel="external">https://blog.csdn.net/Gentle_Guan/article/details/76586689?locationNum=8&amp;fps=1</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;æ¢¯åº¦ä¸‹é™ï¼š&quot;&gt;&lt;a href=&quot;#æ¢¯åº¦ä¸‹é™ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ¢¯åº¦ä¸‹é™ï¼š&quot;&gt;&lt;/a&gt;æ¢¯åº¦ä¸‹é™ï¼š&lt;/h3&gt;&lt;p&gt;æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•ï¼ˆBatch Gradient Descentï¼Œç®€ç§°BGDï¼‰&lt;br&gt;    ä¼˜ç‚¹ï¼šå…¨å±€æœ€ä¼˜è§£ï¼›æ˜“äºå¹¶è¡Œ
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ -é€»è¾‘å›å½’æ¨¡å‹ç‰¹å¾å¤„ç†</title>
    <link href="http://yoursite.com/2018/04/08/Mathematical%20Feature%20processing%20of%20logistic%20regression%20model/"/>
    <id>http://yoursite.com/2018/04/08/Mathematical Feature processing of logistic regression model/</id>
    <published>2018-04-08T01:30:00.000Z</published>
    <updated>2018-07-25T16:10:12.622Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœæœ‰å¼‚å¸¸å€¼ï¼Œä½¿ç”¨æå¤§-æå°å½’ä¸€åŒ–æˆ–å‡å€¼-æ ‡å‡†å·®å½’ä¸€åŒ–ï¼Œè®¡ç®—ä¹‹å‰éœ€è¦å°†æç«¯å€¼æ’é™¤åœ¨å¤–ã€‚<br>ä¾‹å¦‚ï¼š<br>xâ€™=xâˆ’min/ maxâˆ’min<br>è®¡ç®—maxä¸minæ—¶éœ€è¦ç”¨P1ä¸P99æ¥ä»£æ›¿ã€‚æ–°ç”Ÿæˆçš„å€¼å¦‚æœè¶…è¿‡1ç”¨1è¡¨ç¤ºï¼Œå¦‚æœå°äº0 ç”¨0è¡¨ç¤º</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¦‚æœæœ‰å¼‚å¸¸å€¼ï¼Œä½¿ç”¨æå¤§-æå°å½’ä¸€åŒ–æˆ–å‡å€¼-æ ‡å‡†å·®å½’ä¸€åŒ–ï¼Œè®¡ç®—ä¹‹å‰éœ€è¦å°†æç«¯å€¼æ’é™¤åœ¨å¤–ã€‚&lt;br&gt;ä¾‹å¦‚ï¼š&lt;br&gt;xâ€™=xâˆ’min/ maxâˆ’min&lt;br&gt;è®¡ç®—maxä¸minæ—¶éœ€è¦ç”¨P1ä¸P99æ¥ä»£æ›¿ã€‚æ–°ç”Ÿæˆçš„å€¼å¦‚æœè¶…è¿‡1ç”¨1è¡¨ç¤ºï¼Œå¦‚æœå°äº0 ç”¨0è¡¨ç¤º&lt;/p&gt;

    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ -å›å½’ç®—æ³•å®ä¾‹</title>
    <link href="http://yoursite.com/2018/03/27/Mathematical%20regression%20/"/>
    <id>http://yoursite.com/2018/03/27/Mathematical regression /</id>
    <published>2018-03-27T01:30:00.000Z</published>
    <updated>2018-12-21T08:14:28.452Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚å¿µæ¢³ç†ï¼š"><a href="#æ¦‚å¿µæ¢³ç†ï¼š" class="headerlink" title="æ¦‚å¿µæ¢³ç†ï¼š"></a>æ¦‚å¿µæ¢³ç†ï¼š</h2><p>æ•°å­¦æœŸæœ›ï¼š<br>åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ï¼Œæ•°å­¦æœŸæœ›(mean)ï¼ˆæˆ–å‡å€¼ï¼Œäº¦ç®€ç§°æœŸæœ›ï¼‰æ˜¯è¯•éªŒä¸­æ¯æ¬¡å¯èƒ½ç»“æœçš„æ¦‚ç‡ä¹˜ä»¥å…¶ç»“æœçš„æ€»å’Œï¼Œæ˜¯æœ€åŸºæœ¬çš„æ•°å­¦ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒåæ˜ éšæœºå˜é‡å¹³å‡å–å€¼çš„å¤§å°</p>
<p>æ–¹å·®ï¼š<br>ï¼ˆvariance)æ˜¯åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡æ–¹å·®è¡¡é‡éšæœºå˜é‡æˆ–ä¸€ç»„æ•°æ®æ—¶ç¦»æ•£ç¨‹åº¦çš„åº¦é‡ã€‚æ¦‚ç‡è®ºä¸­æ–¹å·®ç”¨æ¥åº¦é‡éšæœºå˜é‡å’Œå…¶æ•°å­¦æœŸæœ›ï¼ˆå³å‡å€¼ï¼‰ä¹‹é—´çš„åç¦»ç¨‹åº¦ã€‚ç»Ÿè®¡ä¸­çš„æ–¹å·®ï¼ˆæ ·æœ¬æ–¹å·®ï¼‰æ˜¯æ¯ä¸ªæ ·æœ¬å€¼ä¸å…¨ä½“æ ·æœ¬å€¼çš„å¹³å‡æ•°ä¹‹å·®çš„å¹³æ–¹å€¼çš„å¹³å‡æ•°ã€‚åœ¨è®¸å¤šå®é™…é—®é¢˜ä¸­ï¼Œç ”ç©¶æ–¹å·®å³åç¦»ç¨‹åº¦æœ‰ç€é‡è¦æ„ä¹‰ã€‚</p>
<p>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š<br>åœ¨æ•°å­¦ä¸­ï¼Œè¿ç»­å‹éšæœºå˜é‡çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆåœ¨ä¸è‡³äºæ··æ·†æ—¶å¯ä»¥ç®€ç§°ä¸ºå¯†åº¦å‡½æ•°ï¼‰æ˜¯ä¸€ä¸ªæè¿°è¿™ä¸ªéšæœºå˜é‡çš„è¾“å‡ºå€¼ï¼Œåœ¨æŸä¸ªç¡®å®šçš„å–å€¼ç‚¹é™„è¿‘çš„å¯èƒ½æ€§çš„å‡½æ•°ã€‚è€Œéšæœºå˜é‡çš„å–å€¼è½åœ¨æŸä¸ªåŒºåŸŸä¹‹å†…çš„æ¦‚ç‡åˆ™ä¸ºæ¦‚ç‡å¯†åº¦å‡½æ•°åœ¨è¿™ä¸ªåŒºåŸŸä¸Šçš„ç§¯åˆ†ã€‚å½“æ¦‚ç‡å¯†åº¦å‡½æ•°å­˜åœ¨çš„æ—¶å€™ï¼Œç´¯ç§¯åˆ†å¸ƒå‡½æ•°æ˜¯æ¦‚ç‡å¯†åº¦å‡½æ•°çš„ç§¯åˆ†ã€‚æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸€èˆ¬ä»¥å°å†™æ ‡è®°<br>æ­£æ€åˆ†å¸ƒæ˜¯é‡è¦çš„æ¦‚ç‡åˆ†å¸ƒã€‚å®ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯ï¼š<br><img src="http://oh6ybr0jg.bkt.clouddn.com/gailvmidu.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>éšç€å‚æ•°Î¼å’ŒÏƒå˜åŒ–ï¼Œæ¦‚ç‡åˆ†å¸ƒä¹Ÿäº§ç”Ÿå˜åŒ–ã€‚<br>æœŸæœ›ï¼šÎ¼<br>æ–¹å·®ï¼šÏƒ^2<br>ä¸­ä½æ•°ï¼šÎ¼<br>ä¼—44o6fdeswq    DFGI-æ•°ï¼šÎ¼<br>ååº¦ï¼š0<br>å³°åº¦ï¼š3<br>\]<br><a id="more"></a><br>æ­£æ€åˆ†å¸ƒï¼š<br>åˆç§°ä¸ºå¸¸æ€åˆ†å¸ƒï¼Œé«˜æ–¯åˆ†å¸ƒã€‚<br>è‹¥éšæœºå˜é‡Xæœä»ä¸€ä¸ªæ•°å­¦æœŸæœ›ä¸ºÎ¼ã€æ–¹å·®ä¸ºÏƒ^2çš„æ­£æ€åˆ†å¸ƒï¼Œè®°ä¸ºN(Î¼ï¼ŒÏƒ^2)ã€‚å…¶æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸ºæ­£æ€åˆ†å¸ƒçš„æœŸæœ›å€¼Î¼å†³å®šäº†å…¶ä½ç½®ï¼Œå…¶æ ‡å‡†å·®Ïƒå†³å®šäº†åˆ†å¸ƒçš„å¹…åº¦ã€‚å½“Î¼ = 0,Ïƒ = 1æ—¶çš„æ­£æ€åˆ†å¸ƒæ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚</p>
<p>çº¿æ€§å›å½’ï¼š<br>çº¿æ€§å›å½’æ˜¯åˆ©ç”¨æ•°ç†ç»Ÿè®¡ä¸­å›å½’åˆ†æï¼Œæ¥ç¡®å®šä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šå˜é‡é—´ç›¸äº’ä¾èµ–çš„å®šé‡å…³ç³»çš„ä¸€ç§ç»Ÿè®¡åˆ†ææ–¹æ³•ï¼Œè¿ç”¨ååˆ†å¹¿æ³›ã€‚å…¶è¡¨è¾¾å½¢å¼ä¸ºy = wâ€™x+eï¼Œeä¸ºè¯¯å·®æœä»å‡å€¼ä¸º0çš„æ­£æ€åˆ†å¸ƒã€‚</p>
<p>å›å½’æ•°æ®ï¼š<br><a href="http://archive.ics.uci.edu/ml/datasets/Individual+household+electric+power+consumption" target="_blank" rel="external">http://archive.ics.uci.edu/ml/datasets/Individual+household+electric+power+consumption</a></p>
<p>å±æ€§ä¿¡æ¯ï¼š</p>
<p>1.dateï¼šæ ¼å¼dd/mm/yyyyæ—¥æœŸ<br>2.timeï¼šæ ¼å¼HHæ—¶é—´ï¼šMMï¼šSS<br>3.global_active_powerï¼šå®¶ç”¨å…¨çƒåˆ†é’Ÿå¹³å‡æœ‰åŠŸ<strong>åŠŸç‡</strong>ï¼ˆåƒç“¦ï¼‰<br>4.global_reactive_power: å®¶ç”¨å…¨çƒåˆ†é’Ÿå¹³å‡æ— åŠŸ<strong>åŠŸç‡</strong>ï¼ˆåƒç“¦ï¼‰<br>5.voltageï¼šåˆ†é’Ÿå¹³å‡<strong>ç”µå‹</strong>ï¼ˆä¼ç‰¹ï¼‰<br>6.global_intensityï¼šå®¶ç”¨å…¨çƒåˆ†é’Ÿå¹³å‡<strong>ç”µæµ</strong>å¼ºåº¦ï¼ˆå®‰åŸ¹ï¼‰<br>7.sub_metering_1ï¼šèƒ½è€—åˆ†é¡¹è®¡é‡1å·ï¼ˆä¸­æœ‰åŠŸç”µèƒ½ç”µèƒ½ï¼‰ã€‚å®ƒä¸<strong>å¨æˆ¿</strong>ç›¸å¯¹åº”ï¼Œä¸»è¦åŒ…æ‹¬æ´—ç¢—æœºã€çƒ¤ç®±å’Œå¾®æ³¢ç‚‰ï¼ˆçƒ­æ¿ä¸æ˜¯ç”µåŠ¨çš„ï¼Œè€Œæ˜¯ç‡ƒæ°”é©±åŠ¨çš„ï¼‰ã€‚<br>8.sub_metering_2ï¼šèƒ½è€—åˆ†é¡¹è®¡é‡2å·ï¼ˆä¸­æœ‰åŠŸç”µèƒ½ç”µèƒ½ï¼‰ã€‚å®ƒå¯¹åº”<strong>æ´—è¡£</strong>æˆ¿ï¼ŒåŒ…æ‹¬æ´—è¡£æœºã€æ»šç­’çƒ˜å¹²æœºã€å†°ç®±å’Œç¯ã€‚<br>9.sub_metering_3ï¼šèƒ½è€—åˆ†é¡¹è®¡é‡3å·ï¼ˆä¸­æœ‰åŠŸç”µèƒ½ç”µèƒ½ï¼‰ã€‚å®ƒç›¸å½“äºä¸€ä¸ª<strong>ç”µçƒ­æ°´å™¨</strong>å’Œä¸€ä¸ªç©ºè°ƒã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> time</div><div class="line"><span class="keyword">import</span> sklearn</div><div class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</div><div class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</div><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</div><div class="line"></div><div class="line"></div><div class="line">path=<span class="string">'C:/Users/zhanghongming/Documents/data/100.txt'</span></div><div class="line">names = [<span class="string">'Date'</span>,<span class="string">'Time'</span>,<span class="string">'Global_active_power'</span>,<span class="string">'Global_reactive_power'</span>,<span class="string">'Voltage'</span>,<span class="string">'Global_intensity'</span>,<span class="string">'Sub_metering_1'</span>,<span class="string">'Sub_metering_2'</span>,<span class="string">'Sub_metering_3'</span>]</div><div class="line"></div><div class="line"></div><div class="line">df=pd.read_csv(path,sep=<span class="string">';'</span>)</div><div class="line">print(df.head())</div></pre></td></tr></table></figure>
<pre><code>Date      Time  Global_active_power  Global_reactive_power  Voltage  \
</code></pre><p>0  16/12/2006  17:24:00                4.216                  0.418   234.84<br>1  16/12/2006  17:25:00                5.360                  0.436   233.63<br>2  16/12/2006  17:26:00                5.374                  0.498   233.29<br>3  16/12/2006  17:27:00                5.388                  0.502   233.74<br>4  16/12/2006  17:28:00                3.666                  0.528   235.68   </p>
<p>   Global_intensity  Sub_metering_1  Sub_metering_2  Sub_metering_3<br>0              18.4             0.0             1.0            17.0<br>1              23.0             0.0             1.0            16.0<br>2              23.0             0.0             2.0            17.0<br>3              23.0             0.0             1.0            17.0<br>4              15.8             0.0             1.0            17.0  </p>
<h4 id="çœ‹æ‰€æœ‰çš„å˜é‡å€¼"><a href="#çœ‹æ‰€æœ‰çš„å˜é‡å€¼" class="headerlink" title="çœ‹æ‰€æœ‰çš„å˜é‡å€¼"></a>çœ‹æ‰€æœ‰çš„å˜é‡å€¼</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> df.columns:</div><div class="line">    print(df[i].value_counts())</div></pre></td></tr></table></figure>
<p>Name: Date, dtype: int64<br>19:01:00    1<br>17:27:00    1<br>18:24:00    1<br>           ..</p>
<p>Name: Time, Length: 99, dtype: int64<br>4.230    2<br>2.912    2<br>4.218    2<br>6.072    1<br>5.412    1<br>           ..</p>
<p>Name: Global_active_power, Length: 96, dtype: int64<br>0.000    33<br>0.090     7<br>0.054     4<br>0.144     3<br>           ..</p>
<p>Name: Global_reactive_power, dtype: int64<br>235.84    3<br>234.20    2<br>235.68    2<br>233.74    2<br>           ..</p>
<p>Name: Voltage, Length: 90, dtype: int64<br>12.4    7<br>13.8    5<br>15.8    5<br>           ..<br>Name: Global_intensity, dtype: int64<br>0.0    99<br>Name: Sub_metering_1, dtype: int64<br>1.0     50<br>0.0     26<br>2.0      8</p>
<p>Name: Sub_metering_2, dtype: int64<br>17.0    77<br>16.0    18<br>18.0     4</p>
<p>Name: Sub_metering_3, dtype: int64</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#ç©ºå€¼å¤„ç†</span></div><div class="line">new_df= df.replace(<span class="string">'?'</span>,np.nan)</div><div class="line"></div><div class="line">datas = new_df.dropna(how=<span class="string">'any'</span>)</div><div class="line"></div><div class="line"><span class="comment">#å®šä¹‰æ—¶é—´æ ¼å¼åŒ–</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">datae_format</span><span class="params">(dt)</span>:</span></div><div class="line">    t = time.strptime(<span class="string">' '</span>.join(dt),<span class="string">'%d/%m/%Y %H:%M:%S'</span>)</div><div class="line">    <span class="keyword">return</span> (t.tm_year,t.tm_mon,t.tm_mday,t.tm_hour,t.tm_min,t.tm_sec)</div><div class="line"></div><div class="line"><span class="comment">##åˆ†æåŠŸç‡å’Œæ—¶é—´çš„çº¿æ€§å…³ç³»ã€‚å°†æ—¶é—´è½¬æ¢ä¸ºè¿ç»­çš„</span></div><div class="line"></div><div class="line">X = datas[names[<span class="number">0</span>:<span class="number">2</span>]]</div><div class="line">X = X.apply(<span class="keyword">lambda</span> x :pd.Series(datae_format(x)),axis=<span class="number">1</span>)</div><div class="line">Y = datas[names[<span class="number">2</span>]]</div><div class="line"></div><div class="line"></div><div class="line">print(X.head(<span class="number">5</span>))</div><div class="line">print(Y.head(<span class="number">5</span>))</div></pre></td></tr></table></figure>
<pre><code>0   1   2   3   4  5
</code></pre><p>0  2006  12  16  17  24  0<br>1  2006  12  16  17  25  0<br>2  2006  12  16  17  26  0<br>3  2006  12  16  17  27  0<br>4  2006  12  16  17  28  0<br>0    4.216<br>1    5.360<br>2    5.374<br>3    5.388<br>4    3.666<br>Name: Global_active_power, dtype: float64</p>
<h6 id="å‡½æ•°è®²è§£"><a href="#å‡½æ•°è®²è§£" class="headerlink" title="å‡½æ•°è®²è§£"></a>å‡½æ•°è®²è§£</h6><p>sklearn.model_selection.train_test_splitéšæœºåˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†<br>ä¸€èˆ¬å½¢å¼ï¼š<br>train_test_splitæ˜¯äº¤å‰éªŒè¯ä¸­å¸¸ç”¨çš„å‡½æ•°ï¼ŒåŠŸèƒ½æ˜¯ä»æ ·æœ¬ä¸­éšæœºçš„æŒ‰æ¯”ä¾‹é€‰å–train dataå’Œtestdataï¼Œå½¢å¼ä¸ºï¼š<br>X_train,X_test, y_train, y_test =<br>cross_validation.train_test_split(train_data,train_target,test_size=0.4, random_state=0)<br>å‚æ•°è§£é‡Šï¼š<br>train_dataï¼šæ‰€è¦åˆ’åˆ†çš„æ ·æœ¬ç‰¹å¾é›†<br>train_targetï¼šæ‰€è¦åˆ’åˆ†çš„æ ·æœ¬ç»“æœ<br>test_sizeï¼šæ ·æœ¬å æ¯”ï¼Œå¦‚æœæ˜¯æ•´æ•°çš„è¯å°±æ˜¯æ ·æœ¬çš„æ•°é‡<br>random_stateï¼šæ˜¯éšæœºæ•°çš„ç§å­ã€‚<br>éšæœºæ•°ç§å­ï¼šå…¶å®å°±æ˜¯è¯¥ç»„éšæœºæ•°çš„ç¼–å·ï¼Œåœ¨éœ€è¦é‡å¤è¯•éªŒçš„æ—¶å€™ï¼Œä¿è¯å¾—åˆ°ä¸€ç»„ä¸€æ ·çš„éšæœºæ•°ã€‚æ¯”å¦‚ä½ æ¯æ¬¡éƒ½å¡«1ï¼Œå…¶ä»–å‚æ•°ä¸€æ ·çš„æƒ…å†µä¸‹ä½ å¾—åˆ°çš„éšæœºæ•°ç»„æ˜¯ä¸€æ ·çš„ã€‚ä½†å¡«0æˆ–ä¸å¡«ï¼Œæ¯æ¬¡éƒ½ä¼šä¸ä¸€æ ·ã€‚<br>éšæœºæ•°çš„äº§ç”Ÿå–å†³äºç§å­ï¼Œéšæœºæ•°å’Œç§å­ä¹‹é—´çš„å…³ç³»éµä»ä»¥ä¸‹ä¸¤ä¸ªè§„åˆ™ï¼š<br>ç§å­ä¸åŒï¼Œäº§ç”Ÿä¸åŒçš„éšæœºæ•°ï¼›ç§å­ç›¸åŒï¼Œå³ä½¿å®ä¾‹ä¸åŒä¹Ÿäº§ç”Ÿç›¸åŒçš„éšæœºæ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">X_train,X_test,Y_train,Y_test = train_test_split( X, Y, test_size=<span class="number">0.2</span>, random_state=<span class="number">42</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">## æ•°æ®æ ‡å‡†æ¢è¡Œ</span></div><div class="line">ss = StandardScaler()</div><div class="line">X_train = ss.fit_transform(X_train)</div><div class="line">X_test = ss.fit_transform(X_test)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">##è®­ç»ƒæ•°æ®</span></div><div class="line">lr = LinearRegression()</div><div class="line">lr.fit(X_train,Y_train)</div><div class="line"></div><div class="line"><span class="comment">##é¢„æµ‹Yå€¼</span></div><div class="line">y_predict = lr.predict(X_test)</div><div class="line"></div><div class="line">print(<span class="string">"å‡†ç¡®ç‡:"</span>,lr.score(X_test,Y_test))</div></pre></td></tr></table></figure>
<p>æ ·æœ¬æ•°æ®100æ¡ï¼š<br>å‡†ç¡®ç‡: 0.0226499044921<br>æ ·æœ¬æ•°æ®1000æ¡ï¼š<br>0.103073016594</p>
<p>æ¨¡å‹ä¿å­˜åŠåŠ è½½ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn.externals <span class="keyword">import</span> joblib</div><div class="line"><span class="comment">## æ¨¡å‹ä¿å­˜ï¼š</span></div><div class="line">joblib.dump(ss,<span class="string">"data_ss.model"</span>)</div><div class="line">joblib.dump(lr,<span class="string">"data_lr.model"</span>)</div><div class="line"></div><div class="line"><span class="comment">## åŠ è½½æ¨¡å‹</span></div><div class="line">joblib,load(<span class="string">"data_ss.model"</span>)</div><div class="line">joblib,load(<span class="string">"data_lr.model"</span>)</div></pre></td></tr></table></figure></p>
<p>plotæ–‡æ¡£ï¼š<br><a href="https://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot" target="_blank" rel="external">https://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## è§£å†³ä¸­æ–‡é—®é¢˜</span></div><div class="line">mpl.rcParams[<span class="string">'font.sans-serif'</span>] = [<span class="string">u'SimHei'</span>];</div><div class="line">mpl.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="keyword">False</span></div><div class="line"></div><div class="line">t=np.arange(len(X_test))</div><div class="line">plt.figure(facecolor=<span class="string">'w'</span>)</div><div class="line">plt.plot(t,Y_test,<span class="string">'r--'</span>,linewidth=<span class="number">2</span>,label=<span class="string">u'çœŸå®å€¼'</span>)</div><div class="line">plt.plot(t,y_predict,<span class="string">'g--'</span>,linewidth=<span class="number">2</span>,label=<span class="string">u'é¢„æµ‹å€¼'</span>)</div><div class="line">plt.legend(loc =<span class="string">'lower right'</span>)</div><div class="line">plt.title(<span class="string">u'çº¿æ€§å›å½’æ—¶é—´ä¸ç”µå‹çš„å…³ç³»'</span>,fontsize=<span class="number">20</span> )</div><div class="line">plt.grid(b=<span class="keyword">True</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>100æ¡æ•°æ®ï¼š<br><img src="http://oh6ybr0jg.bkt.clouddn.com/linear_regression_100.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>1000æ¡æ•°æ®ï¼š<br><img src="http://oh6ybr0jg.bkt.clouddn.com/linear_regression_1000.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<h3 id="linearå¤šé¡¹å¼"><a href="#linearå¤šé¡¹å¼" class="headerlink" title="linearå¤šé¡¹å¼"></a>linearå¤šé¡¹å¼</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline</div><div class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> PolynomialFeatures</div><div class="line"><span class="keyword">from</span> sklearn.grid_search <span class="keyword">import</span> GridSearchCV</div><div class="line">models = [Pipeline([(<span class="string">'Poly'</span>,PolynomialFeatures()),(<span class="string">'Linear'</span>,LinearRegression())])]</div><div class="line">model = models[<span class="number">0</span>]</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">##è·å–Xï¼ŒYå˜é‡ï¼Œå¹¶å°†æ—¶é—´å˜é‡è½¬æ¢ä¸ºæ•°å€¼å‹è¿ç»­çš„</span></div><div class="line">X = datas[names[<span class="number">0</span>:<span class="number">2</span>]]</div><div class="line">X = X.apply(<span class="keyword">lambda</span> x :pd.Series(datae_format(x)),axis=<span class="number">1</span>)</div><div class="line">Y = datas[names[<span class="number">4</span>]]</div><div class="line"></div><div class="line"><span class="comment">## å¯¹æ•°æ®é›†è¿›è¡Œåˆ’åˆ†</span></div><div class="line">X_train,X_test,Y_train,Y_test = train_test_split( X, Y, test_size=<span class="number">0.2</span>, random_state=<span class="number">0</span>)</div><div class="line"></div><div class="line"><span class="comment">## æ•°æ®æ ‡å‡†åŒ–</span></div><div class="line">ss = StandardScaler()</div><div class="line">X_train = ss.fit_transform(X_train)</div><div class="line">X_test = ss.fit_transform(X_test)</div><div class="line"></div><div class="line"><span class="comment">## æ¨¡å‹è®­ç»ƒ</span></div><div class="line">t=np.arange(len(X_test))</div><div class="line">N =<span class="number">5</span></div><div class="line">d_pool= np.arange(<span class="number">1</span>,N,<span class="number">1</span>)</div><div class="line">m=d_pool.size</div><div class="line">clrs = []  <span class="comment"># é¢œè‰²</span></div><div class="line"><span class="keyword">for</span> c <span class="keyword">in</span> np.linspace(<span class="number">16711680</span>, <span class="number">255</span>, m,dtype=<span class="string">'int64'</span>):</div><div class="line">    clrs.append(<span class="string">'#%06x'</span> % c)</div><div class="line">line_width = <span class="number">3</span></div><div class="line"></div><div class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">6</span>),facecolor=<span class="string">'w'</span>)</div><div class="line"><span class="keyword">for</span> i,d <span class="keyword">in</span> enumerate(d_pool):</div><div class="line">    plt.subplot(N<span class="number">-1</span>,<span class="number">1</span>,i+<span class="number">1</span>)</div><div class="line">    plt.plot(t,Y_test,<span class="string">'r--'</span>,label=<span class="string">u'çœŸå®å€¼'</span>,ms=<span class="number">10</span>,zorder=N)</div><div class="line">    model.set_params(Poly__degree=d) <span class="comment"># è®¾ç½®å¤šé¡¹å¼çš„é˜¶</span></div><div class="line">    model.fit(X_train,Y_train)</div><div class="line">    lin = model.get_params(<span class="string">'Linear'</span>)[<span class="string">'Linear'</span>]</div><div class="line">    output =<span class="string">u'%dé˜¶ï¼Œç³»æ•°ä¸ºï¼š'</span>%d</div><div class="line">    print( output,lin.coef_.ravel())</div><div class="line"></div><div class="line">    y_hat = model.predict(X_test)</div><div class="line">    s = model.score(X_test,Y_test)</div><div class="line"></div><div class="line">    z=N<span class="number">-1</span> <span class="keyword">if</span> (d==<span class="number">2</span>) <span class="keyword">else</span> <span class="number">0</span></div><div class="line">    label=<span class="string">u'%dé˜¶,å‡†ç¡®ç‡=%.3f'</span>%(d,s)</div><div class="line"></div><div class="line"></div><div class="line">    plt.plot(t,y_hat,color=clrs[i],lw=line_width,alpha = <span class="number">0.75</span>,label=label,zorder=z)</div><div class="line">    plt.legend(loc = <span class="string">'upper left'</span>)</div><div class="line">    plt.grid(<span class="keyword">True</span>)</div><div class="line">    plt.ylabel(<span class="string">u'%dé˜¶ç»“æœ'</span>%d,fontsize=<span class="number">12</span>)</div><div class="line"></div><div class="line"><span class="comment"># é¢„æµ‹å€¼å’ŒçœŸå®å€¼ç”»å›¾æ¯”è¾ƒ</span></div><div class="line">plt.legend(loc = <span class="string">'lower right'</span>)</div><div class="line">plt.suptitle(<span class="string">u'çº¿æ€§å›å½’æ—¶é—´ä¸ç”µå‹ä¹‹é—´å¤šé¡¹å¼å…³ç³»'</span>)</div><div class="line">plt.grid(b=<span class="keyword">True</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<p>1é˜¶ï¼Œç³»æ•°ä¸ºï¼š [  0.00000000e+00   5.55111512e-17   0.00000000e+00   0.00000000e+00<br>  -4.22939297e-01  -4.34494704e-01   0.00000000e+00]<br>2é˜¶ï¼Œç³»æ•°ä¸ºï¼š [  2.47983335e-17   1.11022302e-16  -2.22044605e-16  -1.11022302e-16<br>  -5.05820937e-01  -3.46571423e-01   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00  -8.58357173e-01  -7.57689882e-01<br>   0.00000000e+00  -1.60364055e-01   0.00000000e+00   0.00000000e+00]<br>3é˜¶ï¼Œç³»æ•°ä¸ºï¼š [ -1.69309011e-15  -2.99760217e-15   3.33066907e-16   5.55111512e-16<br>  -4.41970713e-02  -3.57278153e-01   0.00000000e+00   2.22044605e-16<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   3.43644538e-01   4.86208530e-01<br>   0.00000000e+00   3.26242425e-02   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   0.00000000e+00   0.00000000e+00<br>   0.00000000e+00   0.00000000e+00   4.48140740e-01   6.37890832e-01<br>   0.00000000e+00  -7.45035081e-01   0.00000000e+00   0.00000000e+00<br>  -5.02511111e-01   0.00000000e+00   0.00000000e+00   0.00000000e+00]<br>4é˜¶ï¼Œç³»æ•°ä¸ºï¼š [  2.22002972e-013  -8.01497757e-013   5.37209166e-014  -4.53519167e-013<br>   7.19933381e-003   2.05441337e-001   3.86510268e-013  -5.94066463e-013<br>   6.66133815e-015   6.66133815e-016  -1.88737914e-015   6.27276009e-015<br>  -5.30131494e-015  -1.01585407e-014   3.35287353e-014   8.21565038e-015<br>  -2.55351296e-015  -2.22044605e-016  -6.31088724e-030   3.02922588e-028<br>   1.00974196e-028  -5.04870979e-029  -4.89052469e-002   3.28220946e-001<br>   0.00000000e+000   6.15440583e-003   0.00000000e+000   0.00000000e+000<br>   1.26217745e-029   0.00000000e+000  -5.60519386e-044  -8.40779079e-045<br>  -7.00649232e-045  -2.24207754e-044  -5.60519386e-045   2.80259693e-045<br>   1.40129846e-045   0.00000000e+000   0.00000000e+000   4.97841222e-060<br>   1.55575382e-061  -1.24460306e-060  -2.48920611e-060   0.00000000e+000<br>  -3.11150764e-061  -1.16681536e-061  -3.11150764e-061  -4.66726146e-061<br>   2.21085915e-075  -5.52714788e-076  -1.38178697e-076   2.76357394e-076<br>  -1.38178697e-076  -3.45446742e-077   0.00000000e+000   1.34940134e-079<br>   0.00000000e+000   1.91761463e-093   1.49813643e-095  -5.99254573e-095<br>   4.49440930e-095   1.12360233e-095   0.00000000e+000   7.49068217e-096<br>  -2.34083818e-097   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000  -1.66326556e-111   4.15816391e-112<br>  -2.07908195e-112   0.00000000e+000  -6.13741990e-002  -8.70197287e-001<br>   8.39734513e-140  -1.48604949e+000   0.00000000e+000   0.00000000e+000<br>  -4.67097255e-001   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000   0.00000000e+000  -2.42848401e-001<br>  -9.28403263e-001   0.00000000e+000  -8.91115491e-001   0.00000000e+000<br>   0.00000000e+000   1.33924630e-001   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   2.81909059e-001   0.00000000e+000   0.00000000e+000<br>   0.00000000e+000   0.00000000e+000]</p>
<p>   <img src="http://oh6ybr0jg.bkt.clouddn.com/linear_regression_polynomial.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æ¦‚å¿µæ¢³ç†ï¼š&quot;&gt;&lt;a href=&quot;#æ¦‚å¿µæ¢³ç†ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚å¿µæ¢³ç†ï¼š&quot;&gt;&lt;/a&gt;æ¦‚å¿µæ¢³ç†ï¼š&lt;/h2&gt;&lt;p&gt;æ•°å­¦æœŸæœ›ï¼š&lt;br&gt;åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­ï¼Œæ•°å­¦æœŸæœ›(mean)ï¼ˆæˆ–å‡å€¼ï¼Œäº¦ç®€ç§°æœŸæœ›ï¼‰æ˜¯è¯•éªŒä¸­æ¯æ¬¡å¯èƒ½ç»“æœçš„æ¦‚ç‡ä¹˜ä»¥å…¶ç»“æœçš„æ€»å’Œï¼Œæ˜¯æœ€åŸºæœ¬çš„æ•°å­¦ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒåæ˜ éšæœºå˜é‡å¹³å‡å–å€¼çš„å¤§å°&lt;/p&gt;
&lt;p&gt;æ–¹å·®ï¼š&lt;br&gt;ï¼ˆvariance)æ˜¯åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡æ–¹å·®è¡¡é‡éšæœºå˜é‡æˆ–ä¸€ç»„æ•°æ®æ—¶ç¦»æ•£ç¨‹åº¦çš„åº¦é‡ã€‚æ¦‚ç‡è®ºä¸­æ–¹å·®ç”¨æ¥åº¦é‡éšæœºå˜é‡å’Œå…¶æ•°å­¦æœŸæœ›ï¼ˆå³å‡å€¼ï¼‰ä¹‹é—´çš„åç¦»ç¨‹åº¦ã€‚ç»Ÿè®¡ä¸­çš„æ–¹å·®ï¼ˆæ ·æœ¬æ–¹å·®ï¼‰æ˜¯æ¯ä¸ªæ ·æœ¬å€¼ä¸å…¨ä½“æ ·æœ¬å€¼çš„å¹³å‡æ•°ä¹‹å·®çš„å¹³æ–¹å€¼çš„å¹³å‡æ•°ã€‚åœ¨è®¸å¤šå®é™…é—®é¢˜ä¸­ï¼Œç ”ç©¶æ–¹å·®å³åç¦»ç¨‹åº¦æœ‰ç€é‡è¦æ„ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š&lt;br&gt;åœ¨æ•°å­¦ä¸­ï¼Œè¿ç»­å‹éšæœºå˜é‡çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆåœ¨ä¸è‡³äºæ··æ·†æ—¶å¯ä»¥ç®€ç§°ä¸ºå¯†åº¦å‡½æ•°ï¼‰æ˜¯ä¸€ä¸ªæè¿°è¿™ä¸ªéšæœºå˜é‡çš„è¾“å‡ºå€¼ï¼Œåœ¨æŸä¸ªç¡®å®šçš„å–å€¼ç‚¹é™„è¿‘çš„å¯èƒ½æ€§çš„å‡½æ•°ã€‚è€Œéšæœºå˜é‡çš„å–å€¼è½åœ¨æŸä¸ªåŒºåŸŸä¹‹å†…çš„æ¦‚ç‡åˆ™ä¸ºæ¦‚ç‡å¯†åº¦å‡½æ•°åœ¨è¿™ä¸ªåŒºåŸŸä¸Šçš„ç§¯åˆ†ã€‚å½“æ¦‚ç‡å¯†åº¦å‡½æ•°å­˜åœ¨çš„æ—¶å€™ï¼Œç´¯ç§¯åˆ†å¸ƒå‡½æ•°æ˜¯æ¦‚ç‡å¯†åº¦å‡½æ•°çš„ç§¯åˆ†ã€‚æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸€èˆ¬ä»¥å°å†™æ ‡è®°&lt;br&gt;æ­£æ€åˆ†å¸ƒæ˜¯é‡è¦çš„æ¦‚ç‡åˆ†å¸ƒã€‚å®ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯ï¼š&lt;br&gt;&lt;img src=&quot;http://oh6ybr0jg.bkt.clouddn.com/gailvmidu.jpg&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;&gt;&lt;br&gt;éšç€å‚æ•°Î¼å’ŒÏƒå˜åŒ–ï¼Œæ¦‚ç‡åˆ†å¸ƒä¹Ÿäº§ç”Ÿå˜åŒ–ã€‚&lt;br&gt;æœŸæœ›ï¼šÎ¼&lt;br&gt;æ–¹å·®ï¼šÏƒ^2&lt;br&gt;ä¸­ä½æ•°ï¼šÎ¼&lt;br&gt;ä¼—44o6fdeswq    DFGI-æ•°ï¼šÎ¼&lt;br&gt;ååº¦ï¼š0&lt;br&gt;å³°åº¦ï¼š3&lt;br&gt;\]&lt;br&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>scikit-learn pca</title>
    <link href="http://yoursite.com/2018/03/03/scikit-learn%20pca/"/>
    <id>http://yoursite.com/2018/03/03/scikit-learn pca/</id>
    <published>2018-03-03T03:06:30.000Z</published>
    <updated>2018-12-21T08:14:17.397Z</updated>
    
    <content type="html"><![CDATA[<p>from sklearn import datasets</p>
<p>digits = datasets.load_digits()<br>x = digits.data<br>y = digits.target</p>
<p>from sklearn.model_selection import  train_test_split<br>x_train,x_test,y_train,y_test = train_test_split(x,y,random_state=666)</p>
<p>print(x_train.shape)</p>
<p>#(1347, 64)<br>from sklearn.neighbors import KNeighborsClassifier<br>import time<br>start = time.clock()<br>knn_clf = KNeighborsClassifier()</p>
<p>knn_clf.fit(x_train,y_train)<br>end = time.clock()</p>
<p>print(end-start)</p>
<p>#0.009107513739889835<br>score = knn_clf.score(x_test,y_test)</p>
<p>print(score)</p>
<p>#0.986666666667</p>
<p>from sklearn.decomposition import  PCA</p>
<p>pca = PCA(n_components=2)<br>pca.fit(x_train)<br>X_train_reduction = pca.transform(x_train)<br>X_test_reduction = pca.transform(x_test)</p>
<p>start2 = time.clock()<br>knn_clf = KNeighborsClassifier()<br>knn_clf.fit(X_train_reduction,y_train)<br>end2 = time.clock()</p>
<p>print(end2-start2)</p>
<p>#0.0019209365663966915<br>score = knn_clf.score(X_test_reduction,y_test)<br>print(score)</p>
<p>#0.606666666667</p>
<p>print(pca.explained<em>variance</em>)</p>
<p>pca = PCA(n_components=x_train.shape[1])</p>
<p>pca3 = PCA(0.95)<br>pca3.fit(x_train)<br>print(pca3.n<em>components</em>)</p>
<p>#28</p>
<p>start3 = time.clock()<br>knn_clf3 = KNeighborsClassifier()<br>X_train_reduction = pca3.transform(x_train)<br>X_test_reduction = pca3.transform(x_test)<br>knn_clf3.fit(X_train_reduction,y_train)<br>end3 = time.clock()</p>
<p>print(end3-start3)</p>
<p>#0.006395458395239972<br>score = knn_clf3.score(X_test_reduction,y_test)<br>print(score)</p>
<p>#0.98</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;from sklearn import datasets&lt;/p&gt;
&lt;p&gt;digits = datasets.load_digits()&lt;br&gt;x = digits.data&lt;br&gt;y = digits.target&lt;/p&gt;
&lt;p&gt;from sklearn.model_sel
    
    </summary>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>scikit-learn KNN</title>
    <link href="http://yoursite.com/2018/03/02/scikit-learn%20KNN/"/>
    <id>http://yoursite.com/2018/03/02/scikit-learn KNN/</id>
    <published>2018-03-02T02:06:30.000Z</published>
    <updated>2018-12-21T08:14:37.220Z</updated>
    
    <content type="html"><![CDATA[<p>åœ°å€ï¼š<br><a href="http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html#sklearn.neighbors.KNeighborsClassifier" target="_blank" rel="external">http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html#sklearn.neighbors.KNeighborsClassifier</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</div><div class="line"></div><div class="line">X = [[<span class="number">0</span>], [<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]</div><div class="line">y = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>]</div><div class="line">neigh = KNeighborsClassifier(n_neighbors=<span class="number">3</span>)</div><div class="line">neigh.fit(X, y)</div><div class="line"></div><div class="line">print(neigh.predict([[<span class="number">1.1</span>]]))</div><div class="line"><span class="comment"># [0]</span></div><div class="line">print(neigh.predict_proba([[<span class="number">0.9</span>]]))</div><div class="line"><span class="comment">#[[ 0.66666667  0.33333333]]</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>æ‰‹å†™æ•°å­—ç»ƒä¹ ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</div><div class="line"></div><div class="line">digits = datasets.load_digits()</div><div class="line">x= digits.data</div><div class="line">y= digits.target</div><div class="line">print(x.shape)</div><div class="line"><span class="comment">#(1797, 64)</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span>  train_test_split</div><div class="line">x_train,x_test,y_train,y_test = train_test_split(x,y,test_size=<span class="number">0.2</span>,random_state=<span class="number">666</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</div><div class="line"></div><div class="line">knn_clf = KNeighborsClassifier(n_neighbors=<span class="number">3</span>)</div><div class="line">knn_clf.fit(x_train,y_train)</div><div class="line">score= knn_clf.score(x_test,y_test)</div><div class="line">print(score)</div><div class="line"><span class="comment">#0.988888888889</span></div></pre></td></tr></table></figure>
<p>æŸ¥æ‰¾æœ€ä½³è¶…å‚æ•°<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">beat_score=<span class="number">0</span></div><div class="line">break_k =<span class="number">-1</span></div><div class="line"><span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>):</div><div class="line">    knn_clf2 = KNeighborsClassifier(n_neighbors=k)</div><div class="line">    knn_clf2.fit(x_train,y_train)</div><div class="line">    score= knn_clf2.score(x_test,y_test)</div><div class="line">    <span class="keyword">if</span>(score &gt;beat_score):</div><div class="line">        break_k =k</div><div class="line">        beat_score = score</div><div class="line"></div><div class="line">print(<span class="string">"beat_score"</span>,beat_score)</div><div class="line">print(<span class="string">"break_k"</span>,break_k)</div></pre></td></tr></table></figure></p>
<p>beat_score 0.991666666667<br>break_k 4</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">beat_score=<span class="number">0</span></div><div class="line">break_k =<span class="number">-1</span></div><div class="line">beat_method=<span class="string">''</span></div><div class="line"><span class="keyword">for</span> method <span class="keyword">in</span> [<span class="string">'uniform'</span>,<span class="string">'distance'</span>]:</div><div class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>):</div><div class="line">        knn_clf2 = KNeighborsClassifier(n_neighbors=k,weights=method)</div><div class="line">        knn_clf2.fit(x_train,y_train)</div><div class="line">        score= knn_clf2.score(x_test,y_test)</div><div class="line">        <span class="keyword">if</span>(score &gt;beat_score):</div><div class="line">            beat_method = method</div><div class="line">            break_k =k</div><div class="line">            beat_score = score</div><div class="line"></div><div class="line">print(<span class="string">"beat_score"</span>,beat_score)</div><div class="line">print(<span class="string">"break_k"</span>,break_k)</div></pre></td></tr></table></figure>
<p>ç½‘æ ¼æœç´ ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> time</div><div class="line">start = time.clock()</div><div class="line">param_grid=[</div><div class="line">    &#123;</div><div class="line">        <span class="string">'weights'</span>:[<span class="string">'uniform'</span>],</div><div class="line">        <span class="string">'n_neighbors'</span>:[i  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>)]</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="string">'weights'</span>:[<span class="string">'distance'</span>],</div><div class="line">        <span class="string">'n_neighbors'</span>:[i  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>)],</div><div class="line">        <span class="string">'p'</span>:[i  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">6</span>)]</div><div class="line">    &#125;</div><div class="line">]</div><div class="line"></div><div class="line">knn_clf = KNeighborsClassifier()</div><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span>  GridSearchCV</div><div class="line">grid_search = GridSearchCV(knn_clf,param_grid)</div><div class="line">grid_search.fit(x_train,y_train)</div><div class="line">print(<span class="string">"grid_search.best_estimator_:"</span>,grid_search.best_estimator_)</div><div class="line">print(<span class="string">"grid_search.best_score_:"</span>,grid_search.best_score_)</div><div class="line">print(<span class="string">"grid_search.best_params_:"</span>,grid_search.best_params_)</div><div class="line"></div><div class="line">knn_clf = grid_search.best_estimator_</div><div class="line">knn_clf_score = knn_clf.score(x_test,y_test)</div><div class="line">print(knn_clf_score)</div><div class="line">end = time.clock()</div><div class="line">print(end-start)</div></pre></td></tr></table></figure></p>
<p>grid_search.best<em>estimator</em>: KNeighborsClassifier(algorithm=â€™autoâ€™, leaf_size=30, metric=â€™minkowskiâ€™,<br>           metric_params=None, n_jobs=1, n_neighbors=3, p=3,<br>           weights=â€™distanceâ€™)<br>grid_search.best<em>score</em>: 0.985386221294<br>grid_search.best<em>params</em>: {â€˜n_neighborsâ€™: 3, â€˜pâ€™: 3, â€˜weightsâ€™: â€˜distanceâ€™}<br>0.983333333333<br>296.18877317471</p>
<p>å¢åŠ å¹¶è¡ŒåŒ–å¤„ç†ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grid_search = GridSearchCV(knn_clf,param_grid,n_jobs=<span class="number">2</span>,verbose=<span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<p>é€Ÿåº¦å˜ä¸ºï¼š156.67693082041933</p>
<p>æœ€å€¼å½’ä¸€åŒ–ï¼š<br>é€‚ç”¨äºåˆ†å¸ƒæœ‰æ˜æ˜¾è¾¹ç•Œçš„æƒ…å†µï¼Œå—outlierå½±å“è¾ƒå¤§<br>å‡å€¼æ–¹å·®å½’ä¸€åŒ–ï¼š<br>é€‚ç”¨äºåˆ†å¸ƒæ²¡æœ‰æ˜æ˜¾è¾¹ç•Œçš„æƒ…å†µï¼Œæœ‰å¯èƒ½å­˜åœ¨æç«¯æ•°å€¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ°å€ï¼š&lt;br&gt;&lt;a href=&quot;http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html#sklearn.neighbors.KNeighborsClassifier&quot;&gt;http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html#sklearn.neighbors.KNeighborsClassifier&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; sklearn.neighbors &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; KNeighborsClassifier&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;X = [[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;y = [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;neigh = KNeighborsClassifier(n_neighbors=&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;neigh.fit(X, y)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;print(neigh.predict([[&lt;span class=&quot;number&quot;&gt;1.1&lt;/span&gt;]]))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# [0]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;print(neigh.predict_proba([[&lt;span class=&quot;number&quot;&gt;0.9&lt;/span&gt;]]))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#[[ 0.66666667  0.33333333]]&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>scikit-learn regression</title>
    <link href="http://yoursite.com/2018/03/01/scikit-learn%20regression/"/>
    <id>http://yoursite.com/2018/03/01/scikit-learn regression/</id>
    <published>2018-03-01T03:06:30.000Z</published>
    <updated>2018-12-21T08:14:24.851Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</div><div class="line"></div><div class="line">boston = datasets.load_boston()</div><div class="line">x= boston.data</div><div class="line">y= boston.targe</div><div class="line"></div><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span>  train_test_split</div><div class="line">x_train,x_test,y_train,y_test = train_test_split(x,y,test_size=<span class="number">0.2</span>,random_state=<span class="number">666</span>)</div><div class="line"></div><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> linear_model</div><div class="line">clf = linear_model.LinearRegression()</div><div class="line"></div><div class="line">clf.fit(x_train,y_train)</div><div class="line">y_predict = clf.predict(x_test)</div><div class="line"></div><div class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</div><div class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_absolute_error</div><div class="line"></div><div class="line">MSE = mean_squared_error(y_test,y_predict)</div><div class="line">print(MSE)</div><div class="line">MAE = mean_absolute_error(y_test,y_predict)</div><div class="line">print(MAE)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/d
    
    </summary>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ -å†³ç­–æ ‘ç®—æ³•å®ä¾‹</title>
    <link href="http://yoursite.com/2018/02/18/Mathematical%20decision%20tree/"/>
    <id>http://yoursite.com/2018/02/18/Mathematical decision tree/</id>
    <published>2018-02-18T01:30:00.000Z</published>
    <updated>2018-07-25T16:10:05.738Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å†³ç­–æ ‘ï¼š"><a href="#å†³ç­–æ ‘ï¼š" class="headerlink" title="å†³ç­–æ ‘ï¼š"></a>å†³ç­–æ ‘ï¼š</h2><p>æœ‰ç›‘ç£å­¦ä¹ æ–¹æ³•<br>æ˜¯ä¸€ç§é¢„æµ‹æ¨¡å‹<br>æ˜¯åœ¨å·²çŸ¥å„ç§æƒ…å†µå‘ç”Ÿæ¦‚ç‡åŸºç¡€ä¸Šï¼Œé€šè¿‡æ„å»ºå†³ç­–æ ‘æ¥è¿›è¡Œåˆ†æçš„ä¸€ç§æ–¹æ³•</p>
<h3 id="æ ‘å½¢ç»“æ„"><a href="#æ ‘å½¢ç»“æ„" class="headerlink" title="æ ‘å½¢ç»“æ„"></a>æ ‘å½¢ç»“æ„</h3><p>ä»è·ŸèŠ‚ç‚¹å¼€å§‹ï¼Œé¢„æµ‹å¾…åˆ†ç±»é¡¹å¯¹åº”çš„ç‰¹å¾å±æ€§ï¼ŒæŒ‰ç…§å€¼é€‰æ‹©è¾“å‡ºåˆ†æ”¯ï¼Œç›´åˆ°å¶å­èŠ‚ç‚¹ï¼Œå°†å¶å­èŠ‚ç‚¹çš„å­˜æ”¾ç±»åˆ«ä½œä¸ºæ ‘çš„ç»“æœ</p>
<p>å†³ç­–æ ‘åˆ†ä¸ºä¸¤ç±»ï¼š<br>åˆ†ç±»ï¼Œå›å½’<br>å‰è€…ç”¨äºåˆ†ç±»æ ‡ç­¾å€¼ï¼Œåè€…ç”¨äºé¢„æµ‹è¿ç»­å€¼<br>å¸¸ç”¨ç®—æ³•ID3ï¼ŒC4,5ï¼ŒCART</p>
<h3 id="æ•°æ®æ ‡å‡†åŒ–ï¼š"><a href="#æ•°æ®æ ‡å‡†åŒ–ï¼š" class="headerlink" title="æ•°æ®æ ‡å‡†åŒ–ï¼š"></a>æ•°æ®æ ‡å‡†åŒ–ï¼š</h3><p>StandardScaler (åŸºäºç‰¹å¾çŸ©é˜µçš„åˆ—ï¼Œå°†å±æ€§å€¼è½¬æ¢è‡³æœä»æ­£æ€åˆ†å¸ƒ)<br>æ ‡å‡†åŒ–æ˜¯ä¾ç…§ç‰¹å¾çŸ©é˜µçš„åˆ—å¤„ç†æ•°æ®ï¼Œå…¶é€šè¿‡æ±‚z-scoreçš„æ–¹æ³•ï¼Œå°†æ ·æœ¬çš„ç‰¹å¾å€¼è½¬æ¢åˆ°åŒä¸€é‡çº²ä¸‹<br>å¸¸ç”¨ä¸åŸºäºæ­£æ€åˆ†å¸ƒçš„ç®—æ³•ï¼Œæ¯”å¦‚å›å½’<br>æ•°æ®å½’ä¸€åŒ–<br>MinMaxScaler ï¼ˆåŒºé—´ç¼©æ”¾ï¼ŒåŸºäºæœ€å¤§æœ€å°å€¼ï¼Œå°†æ•°æ®è½¬æ¢åˆ°0,1åŒºé—´ä¸Šçš„ï¼‰<br>æå‡æ¨¡å‹æ”¶æ•›é€Ÿåº¦ï¼Œæå‡æ¨¡å‹ç²¾åº¦<br>å¸¸è§ç”¨äºç¥ç»ç½‘ç»œ<br>Normalizer ï¼ˆåŸºäºçŸ©é˜µçš„è¡Œï¼Œå°†æ ·æœ¬å‘é‡è½¬æ¢ä¸ºå•ä½å‘é‡ï¼‰<br>å…¶ç›®çš„åœ¨äºæ ·æœ¬å‘é‡åœ¨ç‚¹ä¹˜è¿ç®—æˆ–å…¶ä»–æ ¸å‡½æ•°è®¡ç®—ç›¸ä¼¼æ€§æ—¶ï¼Œæ‹¥æœ‰ç»Ÿä¸€çš„æ ‡å‡†<br>å¸¸è§ç”¨äºæ–‡æœ¬åˆ†ç±»å’Œèšç±»ã€logisticå›å½’ä¸­ä¹Ÿä¼šä½¿ç”¨ï¼Œæœ‰æ•ˆé˜²æ­¢è¿‡æ‹Ÿåˆ</p>
<h3 id="ç‰¹å¾é€‰æ‹©ï¼š"><a href="#ç‰¹å¾é€‰æ‹©ï¼š" class="headerlink" title="ç‰¹å¾é€‰æ‹©ï¼š"></a>ç‰¹å¾é€‰æ‹©ï¼š</h3><p>ä»å·²æœ‰çš„ç‰¹å¾ä¸­é€‰æ‹©å‡ºå½±å“ç›®æ ‡å€¼æœ€å¤§çš„ç‰¹å¾å±æ€§</p>
<h2 id="å¸¸ç”¨æ–¹æ³•ï¼š-åˆ†ç±»ï¼šFç»Ÿè®¡é‡ã€å¡æ–¹ç³»æ•°ï¼Œäº’ä¿¡æ¯mutual-info-classif"><a href="#å¸¸ç”¨æ–¹æ³•ï¼š-åˆ†ç±»ï¼šFç»Ÿè®¡é‡ã€å¡æ–¹ç³»æ•°ï¼Œäº’ä¿¡æ¯mutual-info-classif" class="headerlink" title="å¸¸ç”¨æ–¹æ³•ï¼š{ åˆ†ç±»ï¼šFç»Ÿè®¡é‡ã€å¡æ–¹ç³»æ•°ï¼Œäº’ä¿¡æ¯mutual_info_classif"></a>å¸¸ç”¨æ–¹æ³•ï¼š{ åˆ†ç±»ï¼šFç»Ÿè®¡é‡ã€å¡æ–¹ç³»æ•°ï¼Œäº’ä¿¡æ¯mutual_info_classif</h2><pre><code>{ è¿ç»­ï¼šçš®å°”é€Šç›¸å…³ç³»æ•° Fç»Ÿè®¡é‡ äº’ä¿¡æ¯mutual_info_classif
</code></pre><h2 id="SelectKBestï¼ˆå¡æ–¹ç³»æ•°ï¼‰"><a href="#SelectKBestï¼ˆå¡æ–¹ç³»æ•°ï¼‰" class="headerlink" title="SelectKBestï¼ˆå¡æ–¹ç³»æ•°ï¼‰"></a>SelectKBestï¼ˆå¡æ–¹ç³»æ•°ï¼‰</h2>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å†³ç­–æ ‘ï¼š&quot;&gt;&lt;a href=&quot;#å†³ç­–æ ‘ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å†³ç­–æ ‘ï¼š&quot;&gt;&lt;/a&gt;å†³ç­–æ ‘ï¼š&lt;/h2&gt;&lt;p&gt;æœ‰ç›‘ç£å­¦ä¹ æ–¹æ³•&lt;br&gt;æ˜¯ä¸€ç§é¢„æµ‹æ¨¡å‹&lt;br&gt;æ˜¯åœ¨å·²çŸ¥å„ç§æƒ…å†µå‘ç”Ÿæ¦‚ç‡åŸºç¡€ä¸Šï¼Œé€šè¿‡æ„å»ºå†³ç­–æ ‘æ¥è¿›è¡Œåˆ†æçš„ä¸€ç§æ–¹æ³•&lt;/p&gt;
&lt;h
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-ç»“æ„æ¨¡å¼</title>
    <link href="http://yoursite.com/2018/02/11/Design%20pattern%20structural/"/>
    <id>http://yoursite.com/2018/02/11/Design pattern structural/</id>
    <published>2018-02-11T01:30:00.000Z</published>
    <updated>2018-07-25T16:17:19.158Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-é€‚é…å™¨"><a href="#1-é€‚é…å™¨" class="headerlink" title="1.é€‚é…å™¨"></a>1.é€‚é…å™¨</h3><p>æ•ˆæœåŠä¼˜ç¼ºç‚¹ï¼š<br>å¯¹äºç±»é€‚é…å™¨ï¼š</p>
<ol>
<li>ç”¨ä¸€ä¸ªå…·ä½“çš„Adapterç±»å¯¹Adapteeå’ŒTagetè¿›è¡ŒåŒ¹é…ã€‚ç»“æœæ˜¯å½“æˆ‘ä»¬æƒ³è¦åŒ¹é…ä¸€ä¸ªç±»ä»¥åŠæ‰€æœ‰å®ƒçš„å­ç±»æ—¶ï¼Œç±»Adapterå°†ä¸èƒ½èƒœä»»å·¥ä½œã€‚</li>
<li>ä½¿å¾—Adapterå¯ä»¥overrideï¼ˆé‡å®šä¹‰ï¼‰ Adapteeçš„éƒ¨åˆ†è¡Œä¸ºï¼Œå› ä¸ºAdapteræ˜¯Adapteeçš„ä¸€ä¸ªå­ç±»ã€‚<br>å¯¹äºå¯¹è±¡é€‚é…å™¨ï¼š</li>
<li>å…è®¸ä¸€ä¸ªAdapterä¸å¤šä¸ªAdapteeï¼Œå³Adapteeæœ¬èº«ä»¥åŠå®ƒçš„æ‰€æœ‰å­ç±»ï¼ˆå¦‚æœæœ‰å­ç±»çš„è¯ï¼‰åŒæ—¶å·¥ä½œã€‚Adapterä¹Ÿå¯ä»¥ä¸€æ¬¡ç»™æ‰€æœ‰çš„Adapteeæ·»åŠ åŠŸèƒ½ã€‚</li>
<li>ä½¿å¾—overrideï¼ˆé‡å®šä¹‰ï¼‰Adapteeçš„è¡Œä¸ºæ¯”è¾ƒå›°éš¾ã€‚å¦‚æœä¸€å®šè¦override Adapteeçš„æ–¹æ³•ï¼Œå°±åªå¥½å…ˆåšä¸€ä¸ªAdapteeçš„å­ç±»ä»¥override Adapteeçš„æ–¹æ³•ï¼Œç„¶åå†æŠŠè¿™ä¸ªå­ç±»å½“ä½œçœŸæ­£çš„Adapteeæºè¿›è¡Œé€‚é…ã€‚</li>
</ol>
<h3 id="2-æ¡¥æ¥"><a href="#2-æ¡¥æ¥" class="headerlink" title="2.æ¡¥æ¥"></a>2.æ¡¥æ¥</h3><p>ç»§æ‰¿æ˜¯ä¸€ç§å¼ºè€¦åˆçš„ç»“æœï¼Œçˆ¶ç±»å˜ï¼Œå­ç±»å°±å¿…é¡»è¦å˜ã€‚å¯ä»¥ä½¿ç”¨ç»„åˆ/ç»§æ‰¿æ¥è§£è€¦åˆã€‚å°†æŠ½è±¡å’Œä»–çš„å®ç°åˆ†ç¦»<br><img src="https://images.cnblogs.com/cnblogs_com/houleixx/Snap1.jpg" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<h3 id="3-ç»„åˆ"><a href="#3-ç»„åˆ" class="headerlink" title="3.ç»„åˆ"></a>3.ç»„åˆ</h3><p>å°†å¯¹è±¡ç»„åˆæˆå±æ€§ç»“æ„ä»¥è¡¨ç¤ºâ€˜éƒ¨åˆ†-æ•´ä½“â€™çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p>
<p>ç»„åˆæ¨¡å¼æè¿°äº†å¦‚ä½•ä½¿ç”¨é€’å½’çš„ç»„åˆï¼Œä½¿å®¢æˆ·ä¸ç”¨åŒºåˆ†è¿™äº›ç±»</p>
<h3 id="4-è£…é…å™¨"><a href="#4-è£…é…å™¨" class="headerlink" title="4.è£…é…å™¨"></a>4.è£…é…å™¨</h3><h3 id="5-å¤–è§‚"><a href="#5-å¤–è§‚" class="headerlink" title="5.å¤–è§‚"></a>5.å¤–è§‚</h3><h3 id="6-äº«å…ƒæ¨¡å¼"><a href="#6-äº«å…ƒæ¨¡å¼" class="headerlink" title="6.äº«å…ƒæ¨¡å¼"></a>6.äº«å…ƒæ¨¡å¼</h3><h3 id="7-ä»£ç†æ¨¡å¼"><a href="#7-ä»£ç†æ¨¡å¼" class="headerlink" title="7.ä»£ç†æ¨¡å¼"></a>7.ä»£ç†æ¨¡å¼</h3><p>Copy-on-writedaiä»£ç†ï¼šå³å†™å³å¤åˆ¶â€œå¿«ç…§â€è™šæ‹Ÿä»£ç†çš„ä¸€ç§ï¼ŒæŠŠå¤åˆ¶æ‹–å»¶åˆ°åªæœ‰å®¢æˆ·ç«¯éœ€è¦æ—¶ï¼Œæ‰çœŸæ­£æ‰§è¡Œ<br>ä¿æŠ¤ä»£ç†ï¼šå…è®¸åœ¨è®¿é—®å¯¹è±¡æ—¶é™„åŠ ç®¡ç†ä»»åŠ¡</p>
<p>1.ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼ï¼šä¾‹å¦‚æˆ‘ä»¬æ‰¾æˆ¿å­æ‰¾ä¸­ä»‹<br>2.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä»£ç†ï¼šæˆ‘ä»¬ä¸éœ€è¦è‡ªå·±æ‰¾æˆ¿å­</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-é€‚é…å™¨&quot;&gt;&lt;a href=&quot;#1-é€‚é…å™¨&quot; class=&quot;headerlink&quot; title=&quot;1.é€‚é…å™¨&quot;&gt;&lt;/a&gt;1.é€‚é…å™¨&lt;/h3&gt;&lt;p&gt;æ•ˆæœåŠä¼˜ç¼ºç‚¹ï¼š&lt;br&gt;å¯¹äºç±»é€‚é…å™¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨ä¸€ä¸ªå…·ä½“çš„Adapterç±»å¯¹Adapteeå’ŒTag
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-è¡Œä¸ºæ¨¡å¼</title>
    <link href="http://yoursite.com/2018/02/10/Design%20pattern%20behavior/"/>
    <id>http://yoursite.com/2018/02/10/Design pattern behavior/</id>
    <published>2018-02-10T01:30:00.000Z</published>
    <updated>2018-03-30T15:45:16.730Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è´£ä»»é“¾æ¨¡å¼"><a href="#è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼"></a>è´£ä»»é“¾æ¨¡å¼</h3><h4 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h4><p>å‘½ä»¤Command<br>    â€”â€”å£°æ˜æ‰§è¡Œæ“ä½œçš„æ¥å£ã€‚<br>å…·ä½“å‘½ä»¤ConcreteCommand<br>    â€”â€”å®šä¹‰æ¥æ”¶å¯¹è±¡å’ŒåŠ¨ä½œä¹‹é—´çš„ç»‘å®šå…³ç³»ã€‚<br>    â€”â€”é€šè¿‡å¼•èµ·æ¥æ”¶è€…çš„ç›¸åº”åŠ¨ä½œæ¥å®ç°æ‰§è¡Œã€‚<br>å®¢æˆ·Client<br>    â€”â€”äº§ç”Ÿä¸€ä¸ªConcreteCommandå¯¹è±¡ï¼Œå¹¶è®¾ç½®æ¥æ”¶è€…ã€‚<br>å¼•å‘è€…Invoker<br>    â€”â€”è¦æ±‚å‘½ä»¤æ‰§è¡Œè¯·æ±‚ã€‚<br>æ¥æ”¶è€…Receiver<br>    â€”â€”çŸ¥é“å¦‚ä½•æ‰§è¡Œä¸è¯·æ±‚ç›¸è”ç³»çš„æ“ä½œã€‚</p>
<a id="more"></a>
<h3 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h3><h3 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h3><p>å‡†å¤‡ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰ä¸€ä¸ªç®—æ³•çš„å¤§ä½“æ¡†æ¶<br>å°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•ä»¥åŠå…·ä½“æ„é€ å­çš„å½¢å¼å®ç°<br>å‰©ä½™çš„é€»è¾‘é€šè¿‡å£°æ˜ä¸€äº›æŠ½è±¡æ–¹æ³•æ¥æè¿°<br>è¿™äº›æŠ½è±¡æ–¹æ³•è¦æ±‚å­ç±»å®ç°ï¼Œ<br>ä¸åŒçš„å­ç±»å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼Œä»è€Œå¯¹å‰©ä½™çš„é€»è¾‘æœ‰ä¸åŒçš„å®ç°ã€‚<br>å­ç±»ä¸æ”¹å˜ç®—æ³•çš„ç»“æ„è€Œé‡å®šä¹‰ç®—æ³•</p>
<h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h3><p>åŒä¸€åº”ç”¨å¯¹è±¡ä¸åŒå±•ç¤ºå½¢å¼ï¼Œå¦‚ä¸€ç»„æ•°æ®æ˜ å°„ä¸ºè¡¨æ ¼å’ŒæŸ±çŠ¶å›¾ã€‚ç”¨æˆ·æ›´æ”¹è¡¨æ ¼æ•°æ®ï¼ŒæŸ±çŠ¶å›¾è¦åŒæ­¥ä¿®æ”¹</p>
<p>å…³é”®å¯¹è±¡ï¼š<br>æŠ½è±¡ä¸»é¢˜Subject<br>æä¾›ä¸€ä¸ªè¿æ¥è§‚å¯Ÿè€…å¯¹è±¡å’Œè§£é™¤è¿æ¥çš„æ¥å£ã€‚<br>çŸ¥é“å®ƒçš„è§‚å¯Ÿè€…ã€‚å¯æœ‰ä»»æ„æ•°ç›®çš„è§‚å¯Ÿè€…å¯¹è±¡è§‚å¯Ÿä¸€ä¸ªä¸»é¢˜ã€‚<br>å¯ä»¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ï¼Œ<br>å…·ä½“ä¸»é¢˜ConcreteSubjectï¼š<br>é€šå¸¸ç”¨ä¸€ä¸ªå…·ä½“å­ç±»å®ç°ã€‚<br>è´Ÿè´£å®ç°å¯¹è§‚å¯Ÿè€…å¼•ç”¨çš„èšé›†çš„ç®¡ç†åŠ›æ³¨ã€‚<br>å°†æœ‰å…³çŠ¶æ€å­˜å…¥ConcreteObserverå¯¹è±¡ã€‚<br>åœ¨å…·ä½“ä¸»é¢˜å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶å‘å®ƒçš„è§‚å¯Ÿè€…å‘é€é€šçŸ¥ã€‚</p>
<p>æŠ½è±¡è§‚å¯Ÿè€…Observer ï¼š<br>ä¸€èˆ¬ç”¨ä¸€ä¸ªæŠ½è±¡ç±»æˆ–è€…ä¸€ä¸ªæ¥å£å®ç°ï¼Œ<br>ä¸ºæ‰€æœ‰çš„å…·ä½“è§‚å¯Ÿè€…å®šä¹‰ä¸€ä¸ªæ›´æ–°æ¥å£<br>æ›´æ–°æ¥å£åŒ…å«çš„æ–¹æ³•å«æ›´æ–°æ–¹æ³•ã€‚<br>å…·ä½“è§‚å¯Ÿè€…ConcreteObserver<br>é€šå¸¸ç”¨ä¸€ä¸ªå…·ä½“å­ç±»å®ç°ï¼Œ<br>ä¿å­˜ä¸€ä¸ªæŒ‡å‘ConcreteSubjectå¯¹è±¡çš„å¼•ç”¨ã€‚<br>å­˜å‚¨è¦ä¸ä¸»é¢˜ä¸€è‡´çš„çŠ¶æ€ã€‚<br>å®ç°æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²æ‰€è¦æ±‚çš„æ›´æ–°æ¥å£ï¼Œä»¥ä¾¿ä½¿æœ¬èº«çš„çŠ¶æ€ä¸ä¸»é¢˜çš„çŠ¶æ€ç›¸åè°ƒã€‚</p>
<h3 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h3><h3 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h3><h3 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h3><h3 id="è§£é‡Šå™¨æ¨¡å¼"><a href="#è§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼"></a>è§£é‡Šå™¨æ¨¡å¼</h3>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;è´£ä»»é“¾æ¨¡å¼&quot;&gt;&lt;a href=&quot;#è´£ä»»é“¾æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è´£ä»»é“¾æ¨¡å¼&quot;&gt;&lt;/a&gt;è´£ä»»é“¾æ¨¡å¼&lt;/h3&gt;&lt;h4 id=&quot;å‘½ä»¤æ¨¡å¼&quot;&gt;&lt;a href=&quot;#å‘½ä»¤æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;å‘½ä»¤æ¨¡å¼&quot;&gt;&lt;/a&gt;å‘½ä»¤æ¨¡å¼&lt;/h4&gt;&lt;p&gt;å‘½ä»¤Command&lt;br&gt;    â€”â€”å£°æ˜æ‰§è¡Œæ“ä½œçš„æ¥å£ã€‚&lt;br&gt;å…·ä½“å‘½ä»¤ConcreteCommand&lt;br&gt;    â€”â€”å®šä¹‰æ¥æ”¶å¯¹è±¡å’ŒåŠ¨ä½œä¹‹é—´çš„ç»‘å®šå…³ç³»ã€‚&lt;br&gt;    â€”â€”é€šè¿‡å¼•èµ·æ¥æ”¶è€…çš„ç›¸åº”åŠ¨ä½œæ¥å®ç°æ‰§è¡Œã€‚&lt;br&gt;å®¢æˆ·Client&lt;br&gt;    â€”â€”äº§ç”Ÿä¸€ä¸ªConcreteCommandå¯¹è±¡ï¼Œå¹¶è®¾ç½®æ¥æ”¶è€…ã€‚&lt;br&gt;å¼•å‘è€…Invoker&lt;br&gt;    â€”â€”è¦æ±‚å‘½ä»¤æ‰§è¡Œè¯·æ±‚ã€‚&lt;br&gt;æ¥æ”¶è€…Receiver&lt;br&gt;    â€”â€”çŸ¥é“å¦‚ä½•æ‰§è¡Œä¸è¯·æ±‚ç›¸è”ç³»çš„æ“ä½œã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>2018å­¦ä¹ è®¡åˆ’</title>
    <link href="http://yoursite.com/2018/02/07/2018%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/"/>
    <id>http://yoursite.com/2018/02/07/2018å­¦ä¹ è®¡åˆ’/</id>
    <published>2018-02-07T00:00:00.000Z</published>
    <updated>2018-12-21T08:12:32.620Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¤§æ•°æ®åŠæœºå™¨å­¦ä¹ å­¦ä¹ è®¡åˆ’"><a href="#å¤§æ•°æ®åŠæœºå™¨å­¦ä¹ å­¦ä¹ è®¡åˆ’" class="headerlink" title="å¤§æ•°æ®åŠæœºå™¨å­¦ä¹ å­¦ä¹ è®¡åˆ’"></a>å¤§æ•°æ®åŠæœºå™¨å­¦ä¹ å­¦ä¹ è®¡åˆ’</h2><ol>
<li><p>ç¼–ç¨‹åŸºç¡€ï¼šPython<br><a href="https://cn.udacity.com/course/programming-foundations-with-python--ud036" target="_blank" rel="external">https://cn.udacity.com/course/programming-foundations-with-python--ud036</a></p>
</li>
<li><p>è®¡ç®—æœºç§‘å­¦å¯¼è®º  72å°æ—¶<br><a href="https://cn.udacity.com/course/intro-to-computer-science--cs101" target="_blank" rel="external">https://cn.udacity.com/course/intro-to-computer-science--cs101</a></p>
</li>
<li>æ¨è®ºç»Ÿè®¡å­¦  48å°æ—¶<br><a href="https://cn.udacity.com/course/intro-to-inferential-statistics--ud201" target="_blank" rel="external">https://cn.udacity.com/course/intro-to-inferential-statistics--ud201</a></li>
<li>æè¿°ç»Ÿè®¡å­¦  48å°æ—¶<br><a href="https://cn.udacity.com/course/intro-to-inferential-statistics--ud201" target="_blank" rel="external">https://cn.udacity.com/course/intro-to-inferential-statistics--ud201</a></li>
<li>æœºå™¨å­¦ä¹   240å°æ—¶<br><a href="https://cn.udacity.com/course/machine-learning--ud262" target="_blank" rel="external">https://cn.udacity.com/course/machine-learning--ud262</a></li>
<li>ç»Ÿè®¡å­¦å…¥é—¨<br><a href="https://cn.udacity.com/course/intro-to-statistics--st101" target="_blank" rel="external">https://cn.udacity.com/course/intro-to-statistics--st101</a></li>
<li>åŸºç¡€çº¿æ€§ä»£æ•°<br><a href="https://cn.udacity.com/course/linear-algebra-refresher-course--ud953" target="_blank" rel="external">https://cn.udacity.com/course/linear-algebra-refresher-course--ud953</a></li>
<li><p>æœºå™¨å­¦ä¹ <br><a href="https://cn.udacity.com/course/machine-learning-engineer-nanodegree--nd009" target="_blank" rel="external">https://cn.udacity.com/course/machine-learning-engineer-nanodegree--nd009</a></p>
</li>
<li><p>Apache Storm è¿›è¡Œå®æ—¶åˆ†æ  48å°æ—¶<br><a href="https://cn.udacity.com/course/real-time-analytics-with-apache-storm--ud381" target="_blank" rel="external">https://cn.udacity.com/course/real-time-analytics-with-apache-storm--ud381</a></p>
</li>
<li><p>Bashè„šæœ¬  40+å°æ—¶</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¤§æ•°æ®åŠæœºå™¨å­¦ä¹ å­¦ä¹ è®¡åˆ’&quot;&gt;&lt;a href=&quot;#å¤§æ•°æ®åŠæœºå™¨å­¦ä¹ å­¦ä¹ è®¡åˆ’&quot; class=&quot;headerlink&quot; title=&quot;å¤§æ•°æ®åŠæœºå™¨å­¦ä¹ å­¦ä¹ è®¡åˆ’&quot;&gt;&lt;/a&gt;å¤§æ•°æ®åŠæœºå™¨å­¦ä¹ å­¦ä¹ è®¡åˆ’&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;ç¼–ç¨‹åŸºç¡€ï¼šPython&lt;br&gt;&lt;a hre
    
    </summary>
    
      <category term="å­¦ä¹ è®¡åˆ’" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/"/>
    
    
      <category term="å­¦ä¹ " scheme="http://yoursite.com/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ -æ”¯æŒå‘é‡æœº</title>
    <link href="http://yoursite.com/2018/02/05/Mathematical%20Support%20Vector%20Machine/"/>
    <id>http://yoursite.com/2018/02/05/Mathematical Support Vector Machine/</id>
    <published>2018-02-05T01:30:00.000Z</published>
    <updated>2018-12-21T08:13:30.038Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ”¯æŒå‘é‡æœºï¼ˆSupport-Vector-Machineï¼ŒSVMï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼š"><a href="#æ”¯æŒå‘é‡æœºï¼ˆSupport-Vector-Machineï¼ŒSVMï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼š" class="headerlink" title="æ”¯æŒå‘é‡æœºï¼ˆSupport Vector Machineï¼ŒSVMï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼š"></a>æ”¯æŒå‘é‡æœºï¼ˆSupport Vector Machineï¼ŒSVMï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼š</h3><h5 id="ç‚¹åˆ°è¶…å¹³é¢çš„è·ç¦»"><a href="#ç‚¹åˆ°è¶…å¹³é¢çš„è·ç¦»" class="headerlink" title="ç‚¹åˆ°è¶…å¹³é¢çš„è·ç¦»"></a>ç‚¹åˆ°è¶…å¹³é¢çš„è·ç¦»</h5><p>åœ¨åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œä¸ºäº†è·å–ç¨³å¥çš„çº¿æ€§åˆ†ç±»å™¨ï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•æ˜¯ï¼Œæ‰¾å‡ºä¸€æ¡åˆ†å‰²çº¿ä½¿å¾—ä¸¤ä¾§æ ·æœ¬ä¸è¯¥åˆ†å‰²çº¿çš„å¹³å‡è·ç¦»è¶³å¤Ÿçš„è¿œã€‚åœ¨æ¬§å¼ç©ºé—´ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªç‚¹ğ’™åˆ°ç›´çº¿ï¼ˆæˆ–è€…é«˜ç»´ç©ºé—´ä¸­çš„è¶…å¹³é¢ï¼‰ğ’˜^ğ‘‡ ğ’™+ğ‘=0çš„è·ç¦»å…¬å¼æ˜¯ï¼š<br>            ğ‘Ÿ(ğ‘¥)=  (|ğ’˜^ğ‘‡ ğ’™+ğ‘|)/(||ğ’˜||)<br>åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œå¦‚æœè¿™æ ·çš„åˆ†å‰²çº¿æˆ–è€…åˆ†å‰²å¹³é¢èƒ½å¤Ÿå‡†ç¡®åœ°å°†æ ·æœ¬åˆ†å¼€ï¼Œå¯¹äºæ ·æœ¬{ğ’™<em>ğ‘–,ğ‘¦</em>ğ‘–}âˆˆğ·, ğ‘¦<em>ğ‘–=Â±1 è€Œè¨€ï¼Œè‹¥ğ‘¦</em>ğ‘–=1ï¼Œåˆ™æœ‰ğ’˜^ğ‘‡ ğ’™<em>ğ’Š+ğ‘â‰¥1ï¼Œåä¹‹è‹¥ğ‘¦</em>ğ‘–=-1ï¼Œåˆ™æœ‰ğ’˜^ğ‘‡ ğ’™_ğ’Š+ğ‘â‰¤âˆ’1.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;æ”¯æŒå‘é‡æœºï¼ˆSupport-Vector-Machineï¼ŒSVMï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼š&quot;&gt;&lt;a href=&quot;#æ”¯æŒå‘é‡æœºï¼ˆSupport-Vector-Machineï¼ŒSVMï¼‰çš„åŸºæœ¬æ¦‚å¿µï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ”¯æŒå‘é‡æœºï¼ˆSupport 
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼</title>
    <link href="http://yoursite.com/2018/01/27/Design%20pattern%20factory/"/>
    <id>http://yoursite.com/2018/01/27/Design pattern factory/</id>
    <published>2018-01-27T01:30:00.000Z</published>
    <updated>2018-02-08T16:00:47.673Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ›å»ºå‡ ä¸ªå¥—çš®è‚¤ï¼Œæ‰€æœ‰çš„UIæ§ä»¶ å¦‚æŒ‰é’®ï¼Œæ»šåŠ¨æ¡ï¼Œçª—å£ éƒ½è¦åˆ›å»ºå‡ºæ¥ã€‚ç°åœ¨éœ€è¦çº¢è‰²ä¸»é¢˜ï¼Œé»‘è‰²ä¸»é¢˜ï¼Œå’Œè“è‰²ä¸»é¢˜3å¥—çš®è‚¤ã€‚</p>
<p>æ¥å£ç±»ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Button</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ScrollBar</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Window</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SkinFactory</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> ScrollBar <span class="title">createScrollBar</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> Button <span class="title">createButton</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> Window <span class="title">createWindow</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>çº¢è‰²çš®è‚¤å·¥å‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedSkinFactory</span> <span class="keyword">implements</span> <span class="title">SkinFactory</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> ScrollBar <span class="title">createScrollBar</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RedScrollBar();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Button <span class="title">createButton</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RedButton();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Window <span class="title">createWindow</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RedWindow();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedScrollBar</span> <span class="keyword">implements</span> <span class="title">ScrollBar</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"åˆ›å»ºçº¢è‰²æ»šåŠ¨æ¡ã€‚"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedButton</span> <span class="keyword">implements</span> <span class="title">Button</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"åˆ›å»ºçº¢è‰²æŒ‰é’®"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedWindow</span> <span class="keyword">implements</span> <span class="title">Window</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"åˆ›å»ºçº¢è‰²çª—å£ã€‚"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å®ç°ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SkinClient</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        SkinFactory BlackSkinFactory = <span class="keyword">new</span> BlackSkinFactory();</div><div class="line">        BlackSkinFactory.createButton().display();</div><div class="line">        BlackSkinFactory.createScrollBar().display();</div><div class="line">        BlackSkinFactory.createWindow().display();</div><div class="line"></div><div class="line">        SkinFactory RedSkinFactory = <span class="keyword">new</span> RedSkinFactory();</div><div class="line">        RedSkinFactory.createButton().display();</div><div class="line">        RedSkinFactory.createScrollBar().display();</div><div class="line">        RedSkinFactory.createWindow().display();</div><div class="line"></div><div class="line">        SkinFactory BlueSkinFactory = <span class="keyword">new</span> BlueSkinFactory();</div><div class="line">        BlueSkinFactory.createButton().display();</div><div class="line">        BlueSkinFactory.createScrollBar().display();</div><div class="line">        BlueSkinFactory.createWindow().display();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>shè¾“å‡ºç»“æœ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">åˆ›å»ºé»‘è‰²æŒ‰é’®</div><div class="line">åˆ›å»ºé»‘è‰²æ»šåŠ¨æ¡ã€‚</div><div class="line">åˆ›å»ºé»‘è‰²çª—å£ã€‚</div><div class="line">åˆ›å»ºçº¢è‰²æŒ‰é’®</div><div class="line">åˆ›å»ºçº¢è‰²æ»šåŠ¨æ¡ã€‚</div><div class="line">åˆ›å»ºçº¢è‰²çª—å£ã€‚</div><div class="line">åˆ›å»ºè“è‰²æŒ‰é’®</div><div class="line">åˆ›å»ºè“è‰²æ»šåŠ¨æ¡ã€‚</div><div class="line">åˆ›å»ºè“è‰²çª—å£ã€‚</div></pre></td></tr></table></figure></p>
<p>å…¶ä»–é¢œè‰²åŒä¸Š<br>ä»£ç ç»“æ„æˆªå›¾ï¼š<br><img src="http://oh6ybr0jg.bkt.clouddn.com/daimajiegoutu-gongchang.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"><br>ç»“æœæˆªå›¾ï¼š<br><img src="http://oh6ybr0jg.bkt.clouddn.com/jieguojietu-gongchang1.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆ›å»ºå‡ ä¸ªå¥—çš®è‚¤ï¼Œæ‰€æœ‰çš„UIæ§ä»¶ å¦‚æŒ‰é’®ï¼Œæ»šåŠ¨æ¡ï¼Œçª—å£ éƒ½è¦åˆ›å»ºå‡ºæ¥ã€‚ç°åœ¨éœ€è¦çº¢è‰²ä¸»é¢˜ï¼Œé»‘è‰²ä¸»é¢˜ï¼Œå’Œè“è‰²ä¸»é¢˜3å¥—çš®è‚¤ã€‚&lt;/p&gt;
&lt;p&gt;æ¥å£ç±»ï¼š&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Button&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ScrollBar&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Window&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SkinFactory&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; ScrollBar &lt;span class=&quot;title&quot;&gt;createScrollBar&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Button &lt;span class=&quot;title&quot;&gt;createButton&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Window &lt;span class=&quot;title&quot;&gt;createWindow&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ç›®å½•</title>
    <link href="http://yoursite.com/2018/01/27/Design%20pattern%20catalog/"/>
    <id>http://yoursite.com/2018/01/27/Design pattern catalog/</id>
    <published>2018-01-27T01:30:00.000Z</published>
    <updated>2018-02-06T14:27:35.863Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åˆ›å»ºæ€§æ¨¡å¼ï¼š"><a href="#åˆ›å»ºæ€§æ¨¡å¼ï¼š" class="headerlink" title="åˆ›å»ºæ€§æ¨¡å¼ï¼š"></a>åˆ›å»ºæ€§æ¨¡å¼ï¼š</h3><p>1.ç±»çš„åˆ›å»ºæ¨¡å¼â€”â€”ä½¿ç”¨ç»§æ‰¿å…³ç³»ï¼ŒæŠŠç±»çš„åˆ›å»ºå»¶è¿Ÿåˆ°å­ç±»<br>2.å¯¹è±¡çš„åˆ›å»ºæ¨¡å¼â€”â€”æŠŠå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åŠ¨æ€åœ°å§”æ´¾ç»™å¦ä¸€ä¸ªå¯¹è±¡<br>    å°è£…è¦åˆ›å»ºçš„å…·ä½“ç±»ï¼ˆç±»çš„å®ä¾‹ï¼‰çš„ä¿¡æ¯<br>    éšè—è¿™äº›ç±»ï¼ˆç±»çš„å®ä¾‹ï¼‰è¢«åˆ›å»ºå’Œç»„åˆçš„è¿‡ç¨‹</p>
<p>åŒ…å«<br>æŠ½è±¡å·¥å‚ã€å»ºé€ è€…ã€å·¥å‚æ–¹å¼ã€åŸå‹ã€å•ä¾‹</p>
<h3 id="ç»“æ„æ€§æ¨¡å¼ï¼š"><a href="#ç»“æ„æ€§æ¨¡å¼ï¼š" class="headerlink" title="ç»“æ„æ€§æ¨¡å¼ï¼š"></a>ç»“æ„æ€§æ¨¡å¼ï¼š</h3><p>è€ƒè™‘å¦‚ä½•ç»„åˆç±»å’Œå¯¹è±¡æ„æˆè¾ƒå¤§çš„ç»“æ„ã€‚<br>1.ç»“æ„æ€§ç±»æ¨¡å¼ï¼šä½¿ç”¨ç»§æ‰¿æ¥ç»„åˆæ¥å£æˆ–å®ç°<br>2.ç»“æ„æ€§å¯¹è±¡æ¨¡å¼ï¼šå¯¹è±¡åˆæˆå®ç°æ–°åŠŸèƒ½ã€‚<br><a id="more"></a><br>åŒ…å«ï¼š<br>é€‚é…å™¨ã€æ¡¥æ¥ã€ç»„åˆã€è£…é¥°ç€ã€å¤–è§‚ã€è½»é‡ã€ä»£ç†</p>
<h3 id="è¡Œä¸ºæ¨¡å¼ï¼š"><a href="#è¡Œä¸ºæ¨¡å¼ï¼š" class="headerlink" title="è¡Œä¸ºæ¨¡å¼ï¼š"></a>è¡Œä¸ºæ¨¡å¼ï¼š</h3><p>ä¸»è¦è§£å†³ç®—æ³•å’Œå¯¹è±¡ä¹‹é—´çš„è´£ä»»åˆ†é…é—®é¢˜ã€‚<br>å¯¹è±¡æˆ–ç±»çš„æ¨¡å¼<br>å®ƒä»¬ä¹‹é—´çš„é€šä¿¡æ¨¡å¼ã€‚<br>åŒ…å«ï¼š<br>è´£ä»»é“¾ã€å‘½ä»¤ã€è§£é‡Šå™¨ã€è¿­ä»£ã€ä¸­ä»‹è€…ã€å¤‡å¿˜å½•ã€è§‚å¯Ÿè€…ã€çŠ¶æ€ã€ç­–ç•¥ã€æ¨¡æ¿æ–¹æ³•ã€è§‚å¯Ÿè€…</p>
<p>å·¥å‚æ–¹æ³•ä¸»è¦é’ˆå¯¹ä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„<br>æŠ½è±¡å·¥å‚æ¨¡å¼éœ€è¦é¢å¯¹å¤šä¸ªäº§å“ç­‰çº§ç»“æ„</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;åˆ›å»ºæ€§æ¨¡å¼ï¼š&quot;&gt;&lt;a href=&quot;#åˆ›å»ºæ€§æ¨¡å¼ï¼š&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºæ€§æ¨¡å¼ï¼š&quot;&gt;&lt;/a&gt;åˆ›å»ºæ€§æ¨¡å¼ï¼š&lt;/h3&gt;&lt;p&gt;1.ç±»çš„åˆ›å»ºæ¨¡å¼â€”â€”ä½¿ç”¨ç»§æ‰¿å…³ç³»ï¼ŒæŠŠç±»çš„åˆ›å»ºå»¶è¿Ÿåˆ°å­ç±»&lt;br&gt;2.å¯¹è±¡çš„åˆ›å»ºæ¨¡å¼â€”â€”æŠŠå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åŠ¨æ€åœ°å§”æ´¾ç»™å¦ä¸€ä¸ªå¯¹è±¡&lt;br&gt;    å°è£…è¦åˆ›å»ºçš„å…·ä½“ç±»ï¼ˆç±»çš„å®ä¾‹ï¼‰çš„ä¿¡æ¯&lt;br&gt;    éšè—è¿™äº›ç±»ï¼ˆç±»çš„å®ä¾‹ï¼‰è¢«åˆ›å»ºå’Œç»„åˆçš„è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;åŒ…å«&lt;br&gt;æŠ½è±¡å·¥å‚ã€å»ºé€ è€…ã€å·¥å‚æ–¹å¼ã€åŸå‹ã€å•ä¾‹&lt;/p&gt;
&lt;h3 id=&quot;ç»“æ„æ€§æ¨¡å¼ï¼š&quot;&gt;&lt;a href=&quot;#ç»“æ„æ€§æ¨¡å¼ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç»“æ„æ€§æ¨¡å¼ï¼š&quot;&gt;&lt;/a&gt;ç»“æ„æ€§æ¨¡å¼ï¼š&lt;/h3&gt;&lt;p&gt;è€ƒè™‘å¦‚ä½•ç»„åˆç±»å’Œå¯¹è±¡æ„æˆè¾ƒå¤§çš„ç»“æ„ã€‚&lt;br&gt;1.ç»“æ„æ€§ç±»æ¨¡å¼ï¼šä½¿ç”¨ç»§æ‰¿æ¥ç»„åˆæ¥å£æˆ–å®ç°&lt;br&gt;2.ç»“æ„æ€§å¯¹è±¡æ¨¡å¼ï¼šå¯¹è±¡åˆæˆå®ç°æ–°åŠŸèƒ½ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>kNNå®ç°æ‰‹å†™æ•°å­—è¯†åˆ«</title>
    <link href="http://yoursite.com/2018/01/25/kNN%E5%AE%9E%E7%8E%B0%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB/"/>
    <id>http://yoursite.com/2018/01/25/kNNå®ç°æ‰‹å†™æ•°å­—è¯†åˆ«/</id>
    <published>2018-01-25T10:42:30.000Z</published>
    <updated>2018-12-21T08:21:57.435Z</updated>
    
    <content type="html"><![CDATA[<p>éœ€æ±‚<br>åˆ©ç”¨ä¸€ä¸ªæ‰‹å†™æ•°å­—â€œå…ˆéªŒæ•°æ®â€é›†ï¼Œä½¿ç”¨knnç®—æ³•æ¥å®ç°å¯¹æ‰‹å†™æ•°å­—çš„è‡ªåŠ¨è¯†åˆ«ï¼›<br>å…ˆéªŒæ•°æ®ï¼ˆè®­ç»ƒæ•°æ®ï¼‰é›†ï¼š<br>    æ•°æ®ç»´åº¦æ¯”è¾ƒå¤§ï¼Œæ ·æœ¬æ•°æ¯”è¾ƒå¤šã€‚<br>    æ•°æ®é›†åŒ…æ‹¬æ•°å­—0-9çš„æ‰‹å†™ä½“ã€‚<br>    æ¯ä¸ªæ•°å­—å¤§çº¦æœ‰200ä¸ªæ ·æœ¬ã€‚<br>    æ¯ä¸ªæ ·æœ¬ä¿æŒåœ¨ä¸€ä¸ªtxtæ–‡ä»¶ä¸­ã€‚<br>    æ‰‹å†™ä½“å›¾åƒæœ¬èº«çš„å¤§å°æ˜¯32x32çš„äºŒå€¼å›¾ï¼Œè½¬æ¢åˆ°txtæ–‡ä»¶ä¿å­˜åï¼Œå†…å®¹ä¹Ÿæ˜¯32x32ä¸ªæ•°å­—ï¼Œ0æˆ–è€…1ï¼Œå¦‚ä¸‹ï¼š<br><a id="more"></a><br><img src="http://oh6ybr0jg.bkt.clouddn.com/%E6%95%B0%E5%AD%97012.png" alt="æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°"></p>
<p>é¦–å…ˆå‡†å¤‡æµ‹è¯•æ–‡ä»¶:<br>1934ä¸ªè®­ç»ƒæ•°æ®<br>946ä¸ªæµ‹è¯•æ•°æ®</p>
<p>åˆ†æï¼š<br>1ã€æ‰‹å†™ä½“å› ä¸ºæ¯ä¸ªäººï¼Œç”šè‡³æ¯æ¬¡å†™çš„å­—éƒ½ä¸ä¼šå®Œå…¨ç²¾ç¡®ä¸€è‡´ï¼Œæ‰€ä»¥ï¼Œè¯†åˆ«æ‰‹å†™ä½“çš„å…³é”®æ˜¯â€œç›¸ä¼¼åº¦â€<br>2ã€æ—¢ç„¶æ˜¯è¦æ±‚æ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œé‚£ä¹ˆï¼Œé¦–å…ˆéœ€è¦å°†æ ·æœ¬è¿›è¡ŒæŠ½è±¡ï¼Œå°†æ¯ä¸ªæ ·æœ¬å˜æˆä¸€ç³»åˆ—ç‰¹å¾æ•°æ®ï¼ˆå³ç‰¹å¾å‘é‡ï¼‰<br>3ã€æ‰‹å†™ä½“åœ¨ç›´è§‚ä¸Šå°±æ˜¯ä¸€ä¸ªä¸ªçš„å›¾ç‰‡ï¼Œè€Œå›¾ç‰‡æ˜¯ç”±ä¸Šè¿°å›¾ç¤ºä¸­çš„åƒç´ ç‚¹æ¥æè¿°çš„ï¼Œæ ·æœ¬çš„ç›¸ä¼¼åº¦å…¶å®å°±æ˜¯åƒç´ çš„ä½ç½®å’Œé¢œè‰²ä¹‹é—´çš„ç»„åˆçš„ç›¸ä¼¼åº¦<br>4ã€å› æ­¤ï¼Œå°†å›¾ç‰‡çš„åƒç´ æŒ‰ç…§å›ºå®šé¡ºåºè¯»å–åˆ°ä¸€ä¸ªä¸ªçš„å‘é‡ä¸­ï¼Œå³å¯å¾ˆå¥½åœ°è¡¨ç¤ºæ‰‹å†™ä½“æ ·æœ¬<br>5ã€æŠ½è±¡å‡ºäº†æ ·æœ¬å‘é‡ï¼ŒåŠç›¸ä¼¼åº¦è®¡ç®—æ¨¡å‹ï¼Œå³å¯åº”ç”¨KNNæ¥å®ç°</p>
<p>ä»£ç ï¼š<br>1)    ä¸€ä¸ªç”¨æ¥ç”Ÿæˆå°†æ¯ä¸ªæ ·æœ¬çš„txtæ–‡ä»¶è½¬æ¢ä¸ºå¯¹åº”çš„ä¸€ä¸ªå‘é‡ï¼Œ<br>2)    ä¸€ä¸ªç”¨æ¥åŠ è½½æ•´ä¸ªæ•°æ®é›†ï¼Œ<br>3)    ä¸€ä¸ªå®ç°kNNåˆ†ç±»ç®—æ³•ã€‚<br>4)    æœ€åå°±æ˜¯å®ç°åŠ è½½ã€æµ‹è¯•çš„å‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#########################################</span></div><div class="line"><span class="comment"># kNN: k Nearest Neighbors</span></div><div class="line"></div><div class="line"><span class="comment"># å‚æ•°:        inX: vector to compare to existing dataset (1xN)</span></div><div class="line"><span class="comment">#             dataSet: size m data set of known vectors (NxM)</span></div><div class="line"><span class="comment">#             labels: data set labels (1xM vector)</span></div><div class="line"><span class="comment">#             k: number of neighbors to use for comparison </span></div><div class="line">            </div><div class="line"><span class="comment"># è¾“å‡º:     å¤šæ•°ç±»</span></div><div class="line"><span class="comment">#########################################</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</div><div class="line"><span class="keyword">import</span> operator</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># KNNåˆ†ç±»æ ¸å¿ƒæ–¹æ³•</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">kNNClassify</span><span class="params">(newInput, dataSet, labels, k)</span>:</span></div><div class="line">	numSamples = dataSet.shape[<span class="number">0</span>]  <span class="comment"># shape[0]ä»£è¡¨è¡Œæ•°</span></div><div class="line"></div><div class="line">	<span class="comment">## step 1: è®¡ç®—æ¬§å¼è·ç¦»</span></div><div class="line">	<span class="comment"># tile(A, reps): å°†Aé‡å¤repsæ¬¡æ¥æ„é€ ä¸€ä¸ªçŸ©é˜µ</span></div><div class="line">	<span class="comment"># the following copy numSamples rows for dataSet</span></div><div class="line">	diff = tile(newInput, (numSamples, <span class="number">1</span>)) - dataSet  <span class="comment"># Subtract element-wise</span></div><div class="line">	squaredDiff = diff ** <span class="number">2</span> <span class="comment"># squared for the subtract</span></div><div class="line">	squaredDist = sum(squaredDiff, axis = <span class="number">1</span>)  <span class="comment"># sum is performed by row</span></div><div class="line">	distance = squaredDist ** <span class="number">0.5</span></div><div class="line"></div><div class="line">	<span class="comment">## step 2: å¯¹è·ç¦»æ’åº</span></div><div class="line">	<span class="comment"># argsort()è¿”å›æ’åºåçš„ç´¢å¼•</span></div><div class="line">	sortedDistIndices = argsort(distance)</div><div class="line"></div><div class="line">	classCount = &#123;&#125;  <span class="comment"># å®šä¹‰ä¸€ä¸ªç©ºçš„å­—å…¸</span></div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> xrange(k):</div><div class="line">		<span class="comment">## step 3: é€‰æ‹©kä¸ªæœ€å°è·ç¦»</span></div><div class="line">		voteLabel = labels[sortedDistIndices[i]]</div><div class="line"></div><div class="line">		<span class="comment">## step 4: è®¡ç®—ç±»åˆ«çš„å‡ºç°æ¬¡æ•°</span></div><div class="line">		<span class="comment"># when the key voteLabel is not in dictionary classCount, get()</span></div><div class="line">		<span class="comment"># will return 0</span></div><div class="line">		classCount[voteLabel] = classCount.get(voteLabel, <span class="number">0</span>) + <span class="number">1</span></div><div class="line"></div><div class="line">	<span class="comment">## step 5: è¿”å›å‡ºç°æ¬¡æ•°æœ€å¤šçš„ç±»åˆ«ä½œä¸ºåˆ†ç±»ç»“æœ</span></div><div class="line">	maxCount = <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> key, value <span class="keyword">in</span> classCount.items():</div><div class="line">		<span class="keyword">if</span> value &gt; maxCount:</div><div class="line">			maxCount = value</div><div class="line">			maxIndex = key</div><div class="line"></div><div class="line">	<span class="keyword">return</span> maxIndex	</div><div class="line"></div><div class="line"><span class="comment"># å°†å›¾ç‰‡è½¬æ¢ä¸ºå‘é‡</span></div><div class="line"><span class="function"><span class="keyword">def</span>  <span class="title">img2vector</span><span class="params">(filename)</span>:</span></div><div class="line"> 	rows = <span class="number">32</span></div><div class="line"> 	cols = <span class="number">32</span></div><div class="line"> 	imgVector = zeros((<span class="number">1</span>, rows * cols)) </div><div class="line"> 	fileIn = open(filename)</div><div class="line"> 	<span class="keyword">for</span> row <span class="keyword">in</span> xrange(rows):</div><div class="line"> 		lineStr = fileIn.readline()</div><div class="line"> 		<span class="keyword">for</span> col <span class="keyword">in</span> xrange(cols):</div><div class="line"> 			imgVector[<span class="number">0</span>, row * <span class="number">32</span> + col] = int(lineStr[col])</div><div class="line"></div><div class="line"> 	<span class="keyword">return</span> imgVector</div><div class="line"></div><div class="line"><span class="comment"># åŠ è½½æ•°æ®é›†</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">loadDataSet</span><span class="params">()</span>:</span></div><div class="line">	<span class="comment">## step 1: è¯»å–è®­ç»ƒæ•°æ®é›†</span></div><div class="line">	<span class="keyword">print</span> <span class="string">"---Getting training set..."</span></div><div class="line">	dataSetDir = <span class="string">'E:/Python/ml/knn/'</span></div><div class="line">	trainingFileList = os.listdir(dataSetDir + <span class="string">'trainingDigits'</span>)  <span class="comment"># åŠ è½½æµ‹è¯•æ•°æ®</span></div><div class="line">	numSamples = len(trainingFileList)</div><div class="line"></div><div class="line">	train_x = zeros((numSamples, <span class="number">1024</span>))</div><div class="line">	train_y = []</div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> xrange(numSamples):</div><div class="line">		filename = trainingFileList[i]</div><div class="line"></div><div class="line">		<span class="comment"># get train_x</span></div><div class="line">		train_x[i, :] = img2vector(dataSetDir + <span class="string">'trainingDigits/%s'</span> % filename) </div><div class="line"></div><div class="line">		<span class="comment"># get label from file name such as "1_18.txt"</span></div><div class="line">		label = int(filename.split(<span class="string">'_'</span>)[<span class="number">0</span>]) <span class="comment"># return 1</span></div><div class="line">		train_y.append(label)</div><div class="line"></div><div class="line">	<span class="comment">## step 2:è¯»å–æµ‹è¯•æ•°æ®é›†</span></div><div class="line">	<span class="keyword">print</span> <span class="string">"---Getting testing set..."</span></div><div class="line">	testingFileList = os.listdir(dataSetDir + <span class="string">'testDigits'</span>) <span class="comment"># load the testing set</span></div><div class="line">	numSamples = len(testingFileList)</div><div class="line">	test_x = zeros((numSamples, <span class="number">1024</span>))</div><div class="line">	test_y = []</div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> xrange(numSamples):</div><div class="line">		filename = testingFileList[i]</div><div class="line"></div><div class="line">		<span class="comment"># get train_x</span></div><div class="line">		test_x[i, :] = img2vector(dataSetDir + <span class="string">'testDigits/%s'</span> % filename) </div><div class="line"></div><div class="line">		<span class="comment"># get label from file name such as "1_18.txt"</span></div><div class="line">		label = int(filename.split(<span class="string">'_'</span>)[<span class="number">0</span>]) <span class="comment"># return 1</span></div><div class="line">		test_y.append(label)</div><div class="line"></div><div class="line">	<span class="keyword">return</span> train_x, train_y, test_x, test_y</div><div class="line"></div><div class="line"><span class="comment"># æ‰‹å†™è¯†åˆ«ä¸»æµç¨‹</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">testHandWritingClass</span><span class="params">()</span>:</span></div><div class="line">	<span class="comment">## step 1: åŠ è½½æ•°æ®</span></div><div class="line">	<span class="keyword">print</span> <span class="string">"step 1: load data..."</span></div><div class="line">	train_x, train_y, test_x, test_y = loadDataSet()</div><div class="line"></div><div class="line">	<span class="comment">## step 2: æ¨¡å‹è®­ç»ƒ.</span></div><div class="line">	<span class="keyword">print</span> <span class="string">"step 2: training..."</span></div><div class="line">	<span class="keyword">pass</span></div><div class="line"></div><div class="line">	<span class="comment">## step 3: æµ‹è¯•</span></div><div class="line">	<span class="keyword">print</span> <span class="string">"step 3: testing..."</span></div><div class="line">	numTestSamples = test_x.shape[<span class="number">0</span>]</div><div class="line">	matchCount = <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> xrange(numTestSamples):</div><div class="line">		predict = kNNClassify(test_x[i], train_x, train_y, <span class="number">3</span>)</div><div class="line">		<span class="keyword">if</span> predict == test_y[i]:</div><div class="line">			matchCount += <span class="number">1</span></div><div class="line">	accuracy = float(matchCount) / numTestSamples</div><div class="line"></div><div class="line">	<span class="comment">## step 4: è¾“å‡ºç»“æœ</span></div><div class="line">	<span class="keyword">print</span> <span class="string">"step 4: show the result..."</span></div><div class="line">	<span class="keyword">print</span> <span class="string">'The classify accuracy is: %.2f%%'</span> % (accuracy * <span class="number">100</span>)</div></pre></td></tr></table></figure>
<p>æµ‹è¯•<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> kNN</div><div class="line">kNN.testHandWritingClass()</div></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tep <span class="number">1</span>: load data...</div><div class="line">---Getting training set...</div><div class="line">---Getting testing set...</div><div class="line">step <span class="number">2</span>: training...</div><div class="line">step <span class="number">3</span>: testing...</div><div class="line">step <span class="number">4</span>: show the result...</div><div class="line">The classify accuracy <span class="keyword">is</span>: <span class="number">98.84</span>%</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éœ€æ±‚&lt;br&gt;åˆ©ç”¨ä¸€ä¸ªæ‰‹å†™æ•°å­—â€œå…ˆéªŒæ•°æ®â€é›†ï¼Œä½¿ç”¨knnç®—æ³•æ¥å®ç°å¯¹æ‰‹å†™æ•°å­—çš„è‡ªåŠ¨è¯†åˆ«ï¼›&lt;br&gt;å…ˆéªŒæ•°æ®ï¼ˆè®­ç»ƒæ•°æ®ï¼‰é›†ï¼š&lt;br&gt;    æ•°æ®ç»´åº¦æ¯”è¾ƒå¤§ï¼Œæ ·æœ¬æ•°æ¯”è¾ƒå¤šã€‚&lt;br&gt;    æ•°æ®é›†åŒ…æ‹¬æ•°å­—0-9çš„æ‰‹å†™ä½“ã€‚&lt;br&gt;    æ¯ä¸ªæ•°å­—å¤§çº¦æœ‰200ä¸ªæ ·æœ¬ã€‚&lt;br&gt;    æ¯ä¸ªæ ·æœ¬ä¿æŒåœ¨ä¸€ä¸ªtxtæ–‡ä»¶ä¸­ã€‚&lt;br&gt;    æ‰‹å†™ä½“å›¾åƒæœ¬èº«çš„å¤§å°æ˜¯32x32çš„äºŒå€¼å›¾ï¼Œè½¬æ¢åˆ°txtæ–‡ä»¶ä¿å­˜åï¼Œå†…å®¹ä¹Ÿæ˜¯32x32ä¸ªæ•°å­—ï¼Œ0æˆ–è€…1ï¼Œå¦‚ä¸‹ï¼š&lt;br&gt;
    
    </summary>
    
      <category term="python" scheme="http://yoursite.com/categories/python/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
</feed>
