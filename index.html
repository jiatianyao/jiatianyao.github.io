<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="人生在勤 勤则不匮">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="人生在勤 勤则不匮">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description" content="人生在勤 勤则不匮">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> Hexo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?7429985a9690d626019a4aae76bf7702";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hexo</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/21/KNN算法/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/21/KNN算法/" itemprop="url">
                  机器学习之KNN算法推演
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-21T21:06:30+08:00">
                2017-01-21
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/21/KNN算法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/21/KNN算法/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="从训练集中找到和新数据最接近的k条记录，然后根据多数类来决定新数据类别。"><a href="#从训练集中找到和新数据最接近的k条记录，然后根据多数类来决定新数据类别。" class="headerlink" title="从训练集中找到和新数据最接近的k条记录，然后根据多数类来决定新数据类别。"></a>从训练集中找到和新数据最接近的k条记录，然后根据多数类来决定新数据类别。</h4><h5 id="算法涉及3个主要因素："><a href="#算法涉及3个主要因素：" class="headerlink" title="算法涉及3个主要因素："></a>算法涉及3个主要因素：</h5><p>1)    训练数据集<br>2)    距离或相似度的计算衡量<br>3)    k的大小<br><img src="http://g.hiphotos.baidu.com/baike/s=220/sign=d940d431070828386c0ddb168899a964/bf096b63f6246b60f20ccd5aebf81a4c510fa29a.jpg" alt="此处输入图片的描述"><br>绿色圆要被决定赋予哪个类，是红色三角形还是蓝色四方形？如果K=3，由于红色三角形所占比例为2/3，绿色圆将被赋予红色三角形那个类，如果K=5，由于蓝色四方形比例为3/5，因此绿色圆被赋予蓝色四方形类。</p>
<h2 id="KNN分类算法Python实战"><a href="#KNN分类算法Python实战" class="headerlink" title="KNN分类算法Python实战"></a>KNN分类算法Python实战</h2><p>有以下先验数据，使用knn算法对未知类别数据分类<br>属性1    属性2    类别</p>
<table>
<thead>
<tr>
<th>x轴</th>
<th style="text-align:center">y轴</th>
<th style="text-align:right">类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.0</td>
<td style="text-align:center">0.9</td>
<td style="text-align:right">A</td>
</tr>
<tr>
<td>1.0</td>
<td style="text-align:center">1.0</td>
<td style="text-align:right">A</td>
</tr>
<tr>
<td>0.0</td>
<td style="text-align:center">0.1</td>
<td style="text-align:right">B</td>
</tr>
<tr>
<td>0.1</td>
<td style="text-align:center">0.2</td>
<td style="text-align:right">B</td>
</tr>
</tbody>
</table>
<p>未知类别数据<br>| x轴   | y轴    | 类型  |<br>| —– |:——:| —–:|<br>| 1.2 | 1.0 | ?|<br>| 0.1 | 0.3 | ?|</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#########################################</span></div><div class="line"><span class="comment"># kNN: k Nearest Neighbors</span></div><div class="line"></div><div class="line"><span class="comment"># 输入:      newInput:  (1xN)的待分类向量</span></div><div class="line"><span class="comment">#             dataSet:   (NxM)的训练数据集</span></div><div class="line"><span class="comment">#             labels: 	训练数据集的类别标签向量</span></div><div class="line"><span class="comment">#             k: 		近邻数 </span></div><div class="line">            </div><div class="line"><span class="comment"># 输出:     可能性最大的分类标签</span></div><div class="line"><span class="comment">#########################################</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</div><div class="line"><span class="keyword">import</span> operator</div><div class="line"></div><div class="line"><span class="comment">#创建一个数据集，包含2个类别共4个样本</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">createDataSet</span><span class="params">()</span>:</span></div><div class="line">	<span class="comment"># 生成一个矩阵，每行表示一个样本</span></div><div class="line">	group = array([[<span class="number">1.0</span>, <span class="number">0.9</span>], [<span class="number">1.0</span>, <span class="number">1.0</span>], [<span class="number">0.1</span>, <span class="number">0.2</span>], [<span class="number">0.0</span>, <span class="number">0.1</span>]])</div><div class="line">	<span class="comment"># 4个样本分别所属的类别</span></div><div class="line">	labels = [<span class="string">'A'</span>, <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'B'</span>]</div><div class="line">	<span class="keyword">return</span> group, labels</div><div class="line"></div><div class="line"><span class="comment"># KNN分类算法函数定义</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">kNNClassify</span><span class="params">(newInput, dataSet, labels, k)</span>:</span></div><div class="line">	numSamples = dataSet.shape[<span class="number">0</span>]   <span class="comment"># shape[0]表示行数</span></div><div class="line"></div><div class="line">	<span class="comment">## step 1: 计算距离</span></div><div class="line">	<span class="comment"># tile(A, reps): 构造一个矩阵，通过A重复reps次得到(tile(A, （repsX，repsY）)此处在行的方向重复repsX次，在Y的方向重复repsY次)</span></div><div class="line">	<span class="comment"># the following copy numSamples rows for dataSet</span></div><div class="line">	diff = tile(newInput, (numSamples, <span class="number">1</span>)) - dataSet  <span class="comment"># 按元素求差值</span></div><div class="line">	squaredDiff = diff ** <span class="number">2</span>  <span class="comment">#将差值平方</span></div><div class="line">	squaredDist = sum(squaredDiff, axis = <span class="number">1</span>)   <span class="comment"># 按行累加</span></div><div class="line">	distance = squaredDist ** <span class="number">0.5</span>  <span class="comment">#将差值平方和求开方，即得距离</span></div><div class="line"></div><div class="line">	<span class="comment">## step 2: 对距离排序</span></div><div class="line">	<span class="comment">## 此处排序需要注意样本标签的顺序。排序后存的是角标号。后续直接从排序后的标签序列找下标是排序内容的数据</span></div><div class="line">	<span class="comment"># argsort() 返回排序后的索引值</span></div><div class="line">	sortedDistIndices = argsort(distance)  <span class="comment">#或distance.argsort()</span></div><div class="line">	classCount = &#123;&#125; <span class="comment"># define a dictionary (can be append element)</span></div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> xrange(k):</div><div class="line">		<span class="comment">## step 3: 选择k个最近邻</span></div><div class="line">		voteLabel = labels[sortedDistIndices[i]]</div><div class="line"></div><div class="line">		<span class="comment">## step 4: 计算k个最近邻中各类别出现的次数</span></div><div class="line">		<span class="comment"># when the key voteLabel is not in dictionary classCount, get()</span></div><div class="line">		<span class="comment"># will return 0</span></div><div class="line">		classCount[voteLabel] = classCount.get(voteLabel, <span class="number">0</span>) + <span class="number">1</span></div><div class="line"></div><div class="line">	<span class="comment">## step 5: 返回出现次数最多的类别标签</span></div><div class="line">	maxCount = <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> key, value <span class="keyword">in</span> classCount.items():</div><div class="line">		<span class="keyword">if</span> value &gt; maxCount:</div><div class="line">			maxCount = value</div><div class="line">			maxIndex = key</div><div class="line"></div><div class="line">	<span class="keyword">return</span> maxIndex	</div><div class="line">	</div><div class="line">	<span class="comment">##step 5 可以改成：</span></div><div class="line">	<span class="comment"># sortedClassCount = sorted(classCount.iteritems(),key=operator.itemgetter(1),reverse=True)</span></div><div class="line">	<span class="comment">#return sortedClassCount[0][0]</span></div></pre></td></tr></table></figure>
<p>然后调用算法进行测试：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> kNN</div><div class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> * </div><div class="line"><span class="comment">#生成数据集和类别标签</span></div><div class="line">dataSet, labels = kNN.createDataSet()</div><div class="line"><span class="comment">#定义一个未知类别的数据</span></div><div class="line">testX = array([<span class="number">1.2</span>, <span class="number">1.0</span>])</div><div class="line">k = <span class="number">3</span></div><div class="line"><span class="comment">#调用分类函数对未知数据分类</span></div><div class="line">outputLabel = kNN.kNNClassify(testX, dataSet, labels, <span class="number">3</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">"Your input is:"</span>, testX, <span class="string">"and classified to class: "</span>, outputLabel</div><div class="line"></div><div class="line">testX = array([<span class="number">0.1</span>, <span class="number">0.3</span>])</div><div class="line">outputLabel = kNN.kNNClassify(testX, dataSet, labels, <span class="number">3</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">"Your input is:"</span>, testX, <span class="string">"and classified to class: "</span>, outputLabel</div></pre></td></tr></table></figure></p>
<p>这时候会输出<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Your input <span class="keyword">is</span>: [ <span class="number">1.2</span>  <span class="number">1.0</span>] <span class="keyword">and</span> classified to <span class="class"><span class="keyword">class</span>:</span>  A</div><div class="line">Your input <span class="keyword">is</span>: [ <span class="number">0.1</span>  <span class="number">0.3</span>] <span class="keyword">and</span> classified to <span class="class"><span class="keyword">class</span>:</span>  B</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/18/Apache Kylin/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/18/Apache Kylin/" itemprop="url">
                  Apache Kylin
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-18T08:02:30+08:00">
                2017-01-18
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/18/Apache Kylin/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/18/Apache Kylin/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Apache Kylin™ is an open source Distributed Analytics Engine designed to provide SQL interface and multi-dimensional analysis (OLAP) on Hadoop supporting extremely large datasets, original contributed from eBay Inc.</p>
<p>Apache Kylin™ lets you query massive data set at sub-second latency in 3 steps.</p>
<pre><code>Identify a Star Schema on Hadoop.
Build Cube from the identified tables.
Query with ANSI-SQL and get results in sub-second, via ODBC, JDBC or RESTful API.
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/16/Apache Beam/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/16/Apache Beam/" itemprop="url">
                  Apache Beam
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-16T23:02:30+08:00">
                2017-01-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/16/Apache Beam/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/16/Apache Beam/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Apache Beam<br>Apache Beam provides an advanced unified programming model, allowing you to implement batch and streaming data processing jobs that can run on any execution engine.</p>
<p>Apache Beam提供了一个先进的统一编程模型，可以实现批量和流数据处理工作，可以运行在任何执行引擎。<br>Apache Beam is:</p>
<ul>
<li>UNIFIED - Use a single programming model for both batch and streaming use cases.</li>
<li>PORTABLE - Execute pipelines on multiple execution environments, including Apache Apex, Apache Flink, Apache Spark, and Google Cloud Dataflow.</li>
<li>EXTENSIBLE - Write and share new SDKs, IO connectors, and transformation libraries.<br> 统一的 - 对批处理和流媒体用例使用单一编程模型。<br> 轻便的(可移植) - 便携式管道上执行多个执行环境，包括Apache的先端，ApacheFlink，Apache Spark，和谷歌云数据流。<br> 可扩展的 - 写和分享新的软件开发工具包，IO连接器，和动态库。</li>
</ul>
<p>Get Started</p>
<p>To use Beam for your data processing tasks, start by reading the Beam Overview and performing the steps in the Quickstart. Then dive into the Documentation section for in-depth concepts and reference materials for the Beam model, SDKs, and runners.<br>使用Beam为你的数据处理任务，开始通过阅读Beam概述和示例执行以下步骤。然后潜入文档部分进行深入的概念和Beam模型，SDKs，和执行。</p>
<p>Contribute</p>
<p>Beam is an Apache Software Foundation project, available under the Apache v2 license. Beam is an open source community and contributions are greatly appreciated! If you’d like to contribute, please see the Contribute section.<br>Beam 是Apache软件基金会的项目，Apache v2许可下可用。Beam是一个开源社区和贡献非常感谢！如果你想贡献，请参阅投稿部分。</p>
<p>Apache Beam Overview</p>
<p>Apache Beam is an open source, unified programming model that you can use to create a data processing pipeline. You start by building a program that defines the pipeline using one of the open source Beam SDKs. The pipeline is then executed by one of Beam’s supported distributed processing back-ends, which include Apache Apex, Apache Flink, Apache Spark, and Google Cloud Dataflow.<br>Apache的Beam是一个开源的、统一的编程模型，可以用来创建一个数据处理管道。你开始建立一个程序，定义了管道使用一个开源的Beam的SDK。管道是通过一Beam的支持分布式处理后端执行，包括Apache的先端，Apache Flink，Apache的Spark，和谷歌云数据流。 </p>
<p>Beam is particularly useful for Embarrassingly Parallel data processing tasks, in which the problem can be decomposed into many smaller bundles of data that can be processed independently and in parallel. You can also use Beam for Extract, Transform, and Load (ETL) tasks and pure data integration. These tasks are useful for moving data between different storage media and data sources, transforming data into a more desirable format, or loading data onto a new system.<br>Beam的高度并行的数据处理任务是特别有用的，其中的问题可以被分解成许多较小的许多数据，可以独立和并行处理。你也可以使用Beam变换，提取，和加载（ETL）任务和纯数据集成。这些任务用于在不同的存储介质和数据源之间移动数据，将数据转换成更理想的格式，或者将数据加载到新系统上。 </p>
<p>Apache Beam SDKs</p>
<p>The Beam SDKs provide a unified programming model that can represent and transform data sets of any size, whether the input is a finite data set from a batch data source, or an infinite data set from a streaming data source. The Beam SDKs use the same classes to represent both bounded and unbounded data, and the same transforms to operate on that data. You use the Beam SDK of your choice to build a program that defines your data processing pipeline.<br>Beam的SDK提供了一个统一的编程模型，可以表示和变换任意大小的数据集，输入是否是一个有限的数据集从一个批处理的数据源，或无限的数据集从一个流的数据源。Beam的SDK使用同一类的代表有界和无界的数据，和相同的变换，对这些数据的操作。你用你选择的Beam SDK构建的程序定义数据处理管道。 </p>
<p>Beam currently supports the following language-specific SDKs:<br>Language     SDK Status<br>Java     Active Development<br>Python     Coming Soon<br>Other     TBD</p>
<p>Apache Beam Pipeline Runners</p>
<p>The Beam Pipeline Runners translate the data processing pipeline you define with your Beam program into the API compatible with the distributed processing back-end of your choice. When you run your Beam program, you’ll need to specify the appropriate runner for the back-end where you want to execute your pipeline.<br>Beam流管道翻译您定义的数据处理管道与您的Beam程序到API与您选择的分布式处理后端兼容。当你运行你的Beam束计划时，你需要指定你想要执行你的管道的后端的合适的执行.。</p>
<p>Beam currently supports Runners that work with the following distributed processing back-ends:<br>Beam目前支持运行与下列分布式处理后端<br>Runner     Status<br>Apache Apex     In Development<br>Apache Flink     In Development<br>Apache Spark     In Development<br>Google Cloud Dataflow     In Development</p>
<p>Quickstart  来一段hello World吧<br>环境准备：<br>JDK1.7+。Maven</p>
<p>maven命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ mvn archetype:generate \</div><div class="line">      -DarchetypeRepository=https://repository.apache.org/content/groups/snapshots \</div><div class="line">      -DarchetypeGroupId=org.apache.beam \</div><div class="line">      -DarchetypeArtifactId=beam-sdks-java-maven-archetypes-examples \</div><div class="line">      -DarchetypeVersion=LATEST \</div><div class="line">      -DgroupId=org.example \</div><div class="line">      -DartifactId=word-count-beam \</div><div class="line">      -Dversion=<span class="string">"0.1"</span> \</div><div class="line">      -Dpackage=org.apache.beam.examples \</div><div class="line">      -DinteractiveMode=<span class="literal">false</span></div></pre></td></tr></table></figure></p>
<p>查看文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 Beam]<span class="comment">#  ls</span></div><div class="line">word-count-beam</div><div class="line">[root@zhm1 Beam]<span class="comment"># cd word-count-beam/</span></div><div class="line">[root@zhm1 word-count-beam]<span class="comment"># ls src/main/java/org/apache/beam/examples/</span></div><div class="line">common  DebuggingWordCount.java  MinimalWordCount.java  WindowedWordCount.java  WordCount.java</div></pre></td></tr></table></figure></p>
<p>运行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mvn compile <span class="built_in">exec</span>:java -Dexec.mainClass=org.apache.beam.examples.WordCount \</div><div class="line">&gt; -Dexec.args=<span class="string">"--inputFile=pom.xml --output=counts"</span> -Pdirect-runner</div></pre></td></tr></table></figure></p>
<p>结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 word-count-beam]<span class="comment"># ll -lh counts*</span></div><div class="line">-rw-r--r--. 1 root root 618 1月  19 14:02 counts-00000-of-00005</div><div class="line">-rw-r--r--. 1 root root 596 1月  19 14:02 counts-00001-of-00005</div><div class="line">-rw-r--r--. 1 root root 585 1月  19 14:02 counts-00002-of-00005</div><div class="line">-rw-r--r--. 1 root root 581 1月  19 14:02 counts-00003-of-00005</div><div class="line">-rw-r--r--. 1 root root 593 1月  19 14:02 counts-00004-of-00005</div><div class="line"></div><div class="line">[root@zhm1 word-count-beam]<span class="comment"># cat counts-00000-of-00005</span></div><div class="line">work: 1</div><div class="line">IS: 1</div><div class="line">versions: 1</div><div class="line">direct: 3</div><div class="line">specified: 1</div><div class="line">incubating: 1</div><div class="line">more: 1</div><div class="line">snapshots: 4</div><div class="line">submission: 1</div><div class="line">...</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    Minimal WordCount demonstrates the basic principles involved <span class="keyword">in</span> building a pipeline.</div><div class="line">    WordCount introduces some of the more common best practices <span class="keyword">in</span> creating re-usable and maintainable pipelines.</div><div class="line">    Debugging WordCount introduces logging and debugging practices.</div><div class="line">    Windowed WordCount demonstrates how you can use Beam’s programming model to handle both bounded and unbounded datasets.</div><div class="line"></div><div class="line">```java</div><div class="line">从Minimal WordCount分析代码：</div><div class="line"></div><div class="line">/*</div><div class="line"> * Licensed to the Apache Software Foundation (ASF) under one</div><div class="line"> * or more contributor license agreements.  See the NOTICE file</div><div class="line"> * distributed with this work <span class="keyword">for</span> additional information</div><div class="line"> * regarding copyright ownership.  The ASF licenses this file</div><div class="line"> * to you under the Apache License, Version 2.0 (the</div><div class="line"> * <span class="string">"License"</span>); you may not use this file except <span class="keyword">in</span> compliance</div><div class="line"> * with the License.  You may obtain a copy of the License at</div><div class="line"> *</div><div class="line"> *     http://www.apache.org/licenses/LICENSE-2.0</div><div class="line"> *</div><div class="line"> * Unless required by applicable law or agreed to <span class="keyword">in</span> writing, software</div><div class="line"> * distributed under the License is distributed on an <span class="string">"AS IS"</span> BASIS,</div><div class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div class="line"> * See the License <span class="keyword">for</span> the specific language governing permissions and</div><div class="line"> * limitations under the License.</div><div class="line"> */</div><div class="line">package org.apache.beam.examples;</div><div class="line"></div><div class="line">import org.apache.beam.sdk.Pipeline;</div><div class="line">import org.apache.beam.sdk.io.TextIO;</div><div class="line">import org.apache.beam.sdk.options.PipelineOptions;</div><div class="line">import org.apache.beam.sdk.options.PipelineOptionsFactory;</div><div class="line">import org.apache.beam.sdk.transforms.Count;</div><div class="line">import org.apache.beam.sdk.transforms.DoFn;</div><div class="line">import org.apache.beam.sdk.transforms.MapElements;</div><div class="line">import org.apache.beam.sdk.transforms.ParDo;</div><div class="line">import org.apache.beam.sdk.transforms.SimpleFunction;</div><div class="line">import org.apache.beam.sdk.values.KV;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * An example that counts words <span class="keyword">in</span> Shakespeare.</div><div class="line"> *</div><div class="line"> * &lt;p&gt;This class, &#123;@link MinimalWordCount&#125;, is the first <span class="keyword">in</span> a series of four successively more</div><div class="line"> * detailed <span class="string">'word count'</span> examples. Here, <span class="keyword">for</span> simplicity, we don<span class="string">'t show any error-checking or</span></div><div class="line"> * argument processing, and focus on construction of the pipeline, which chains together the</div><div class="line"> * application of core transforms.</div><div class="line"> *</div><div class="line"> * &lt;p&gt;Next, see the &#123;@link WordCount&#125; pipeline, then the &#123;@link DebuggingWordCount&#125;, and finally the</div><div class="line"> * &#123;@link WindowedWordCount&#125; pipeline, for more detailed examples that introduce additional</div><div class="line"> * concepts.</div><div class="line"> *</div><div class="line"> * &lt;p&gt;Concepts:</div><div class="line"> *</div><div class="line"> * &lt;pre&gt;</div><div class="line"> *   1. Reading data from text files</div><div class="line"> *   2. Specifying 'inline<span class="string">' transforms</span></div><div class="line"> *   3. Counting items in a PCollection</div><div class="line"> *   4. Writing data to text files</div><div class="line"> * &lt;/pre&gt;</div><div class="line"> *</div><div class="line"> * &lt;p&gt;No arguments are required to run this pipeline. It will be executed with the DirectRunner. You</div><div class="line"> * can see the results in the output files in your current working directory, with names like</div><div class="line"> * "wordcounts-00001-of-00005. When running on a distributed service, you would use an appropriate</div><div class="line"> * file service.</div><div class="line"> */</div><div class="line">public class MinimalWordCount &#123;</div><div class="line"></div><div class="line">  public static void main(String[] args) &#123;</div><div class="line">    // Create a PipelineOptions object. This object lets us set various execution</div><div class="line">    // options for our pipeline, such as the runner you wish to use. This example</div><div class="line">    // will run with the DirectRunner by default, based on the class path configured</div><div class="line">    // in its dependencies.</div><div class="line">    PipelineOptions options = PipelineOptionsFactory.create();</div><div class="line">    //默认是options.setRunner(DirectRunner.class);</div><div class="line">    // Create the Pipeline object with the options we defined above.</div><div class="line">    Pipeline p = Pipeline.create(options);</div><div class="line"></div><div class="line">    // Apply the pipeline's transforms.</div><div class="line"></div><div class="line">    // Concept <span class="comment">#1: Apply a root transform to the pipeline; in this case, TextIO.Read to read a set</span></div><div class="line">    // of input text files. TextIO.Read returns a PCollection <span class="built_in">where</span> each element is one line from</div><div class="line">    // the input text (a <span class="built_in">set</span> of Shakespeare<span class="string">'s texts).</span></div><div class="line"></div><div class="line">    // This example reads a public data set consisting of the complete works of Shakespeare.</div><div class="line">    </div><div class="line">    </div><div class="line">    p.apply(TextIO.Read.from("gs://apache-beam-samples/shakespeare/*"))</div><div class="line">     // 读取本地文件，构建第一个PTransfor</div><div class="line"></div><div class="line">     // Concept #2: Apply a ParDo transform to our PCollection of text lines. This ParDo invokes a</div><div class="line">     // DoFn (defined in-line) on each element that tokenizes the text line into individual words.</div><div class="line">     // The ParDo returns a PCollection&lt;String&gt;, where each element is an individual word in</div><div class="line">     // Shakespeare's collected texts.</div><div class="line">     .apply(<span class="string">"ExtractWords"</span>, ParDo.of(new DoFn&lt;String, String&gt;() &#123;</div><div class="line">                       @ProcessElement</div><div class="line">                       public void processElement(ProcessContext c) &#123;</div><div class="line">                         <span class="keyword">for</span> (String word : c.element().split(<span class="string">"[^a-zA-Z']+"</span>)) &#123;</div><div class="line">                           <span class="keyword">if</span> (!word.isEmpty()) &#123;</div><div class="line">                             c.output(word);</div><div class="line">                           &#125;</div><div class="line">                         &#125;</div><div class="line">                       &#125;</div><div class="line">                     &#125;))</div><div class="line"></div><div class="line">     // Concept <span class="comment">#3: Apply the Count transform to our PCollection of individual words. The Count</span></div><div class="line">     // transform returns a new PCollection of key/value pairs, <span class="built_in">where</span> each key represents a unique</div><div class="line">     // word <span class="keyword">in</span> the text. The associated value is the occurrence count <span class="keyword">for</span> that word.</div><div class="line">     .apply(Count.&lt;String&gt;perElement())</div><div class="line"></div><div class="line">     // Apply a MapElements transform that formats our PCollection of word counts into a printable</div><div class="line">     // string, suitable <span class="keyword">for</span> writing to an output file.</div><div class="line">     .apply(<span class="string">"FormatResults"</span>, MapElements.via(new SimpleFunction&lt;KV&lt;String, Long&gt;, String&gt;() &#123;</div><div class="line">                       @Override</div><div class="line">                       public String apply(KV&lt;String, Long&gt; input) &#123;</div><div class="line">                         <span class="built_in">return</span> input.getKey() + <span class="string">": "</span> + input.getValue();</div><div class="line">                       &#125;</div><div class="line">                     &#125;))</div><div class="line"></div><div class="line">     // Concept <span class="comment">#4: Apply a write transform, TextIO.Write, at the end of the pipeline.</span></div><div class="line">     // TextIO.Write writes the contents of a PCollection (<span class="keyword">in</span> this <span class="keyword">case</span>, our PCollection of</div><div class="line">     // formatted strings) to a series of text files.</div><div class="line">     //</div><div class="line">     // By default, it will write to a <span class="built_in">set</span> of files with names like wordcount-00001-of-00005</div><div class="line">     .apply(TextIO.Write.to(<span class="string">"wordcounts"</span>));</div><div class="line"></div><div class="line">    // Run the pipeline.</div><div class="line">    p.run().waitUntilFinish();</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="创建管道"><a href="#创建管道" class="headerlink" title="创建管道"></a>创建管道</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PipelineOptions options = PipelineOptionsFactory.create();</div></pre></td></tr></table></figure>
<p> 下一步是使用我们刚才构建的选项创建一个Pipeline对象。Pipeline对象构建要执行的变换图，与特定流水线相关联。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Pipeline p = Pipeline.create(options);</div></pre></td></tr></table></figure></p>
<p> 应用管道变换<br> Minimal的WordCount流水线包含几个变换，以将数据读入流水线，操纵或以其他方式transform数据，并写出结果。每个transform表示管道中的操作。</p>
<p>每个transform采用某种输入（数据或其他），并产生一些输出数据。输入和输出数据是由SDK类表示PCollection。PCollection是一个特殊的类，由Beam SDK提供，您可以使用它来表示几乎任何大小的数据集，包括无限数据集。</p>
<p><img src="https://beam.apache.org/images/wordcount-pipeline.png" alt="此处输入图片的描述"></p>
<p>Minimal WordCount流水线包含五个transform</p>
<p>1.一个文本文件Read transform应用于流水线对象本身，并产生PCollection作为输出。输出PCollection中的每个元素表示输入文件中的一行文本。此示例恰好使用存储在可公开访问的Google Cloud Storage存储桶（“gs：//”）中的输入数据。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p.apply(TextIO.Read.from(<span class="string">"gs://apache-beam-samples/shakespeare/*"</span>))</div></pre></td></tr></table></figure></p>
<p>2.一个ParDo transform它调用DoFn了tokenizes文本行成单个的单词每个元素（在线作为一个匿名类中定义）。对于此transform的输入是PCollection由先前生成的文本的行TextIO.Read变换。的ParDo变换输出一个新的PCollection，其中每个元素表示的文本的单词。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.apply(<span class="string">"ExtractWords"</span>, ParDo.of(<span class="keyword">new</span> DoFn&lt;String, String&gt;() &#123;</div><div class="line">            <span class="meta">@ProcessElement</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processElement</span><span class="params">(ProcessContext c)</span> </span>&#123;</div><div class="line">                <span class="keyword">for</span> (String word : c.element().split(<span class="string">"[^a-zA-Z']+"</span>)) &#123;</div><div class="line">                    <span class="keyword">if</span> (!word.isEmpty()) &#123;</div><div class="line">                        c.output(word);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;))</div></pre></td></tr></table></figure></p>
<p>3.该SDK提供的Count transform是一个通用的transform，它接受一个PCollection任何类型的，和返回PCollection键/值对。每个键表示输入集合中的唯一元素，每个值表示键在输入集合中出现的次数。</p>
<p>这条管线，用于将输入Count的是PCollection由以前产生个别单词ParDo，并输出为一个PCollection，其中每个键代表一个唯一字中的文本和相关值是出现计数每个键/值对。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.apply(Count.&lt;String&gt;perElement())</div></pre></td></tr></table></figure></p>
<p>4.下一个transform将唯一字和出现计数的每个键/值对格式化为适于写入输出文件的可打印字符串。</p>
<p>MapElements是一个更高层次的复合转换，它封装了一个简单的ParDo; 为输入中的每个元件PCollection，MapElements适用于产生恰好一个输出元件的功能。在这个例子中，MapElements调用SimpleFunction（在线作为匿名类中定义），该确实的格式。作为输入，MapElements取PCollection所产生的键/值对的Count，并产生一个新PCollection的可打印字符串。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.apply(<span class="string">"FormatResults"</span>, MapElements.via(<span class="keyword">new</span> SimpleFunction&lt;KV&lt;String, Long&gt;, String&gt;() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">apply</span><span class="params">(KV&lt;String, Long&gt; input)</span> </span>&#123;</div><div class="line">                <span class="keyword">return</span> input.getKey() + <span class="string">": "</span> + input.getValue();</div><div class="line">            &#125;</div><div class="line">        &#125;))</div></pre></td></tr></table></figure></p>
<p>5.一个文本文件Write。此transform需要的最终PCollection格式字符串作为输入和每个元素写入到输出文本文件。输入中的每个元素PCollection表示在所产生的输出文件的文本的一个行。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.apply(TextIO.Write.to(<span class="string">"wordcounts"</span>));</div></pre></td></tr></table></figure></p>
<p>注意，该Write变换产生类型的琐碎结果值PDone，在这种情况下被忽略</p>
<h2 id="运行管道"><a href="#运行管道" class="headerlink" title="运行管道"></a>运行管道</h2><p>通过调用运行管线run的方法，它会将您的管道由您在创建您的管道中指定的管道运行程序执行。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p.run().waitUntilFinish();</div></pre></td></tr></table></figure></p>
<p>注意，该run方法是异步的。对于阻止执行，而不是，运行管线追加waitUntilFinish方法。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/12/机器学习-概念/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/12/机器学习-概念/" itemprop="url">
                  机器学习-概念
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-12T23:55:30+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/12/机器学习-概念/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/12/机器学习-概念/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>监督学习：<br>我们向系统输入我们所称的“已标记样本”<br>已标记样本指我们给系统一些信息，让它用于理解我们向它输入的数据。<br>例如我们创建一个系统来识别我的脸，我们将给他一些我的面部照片，一些别人的面部照片，我们会告诉系统 这些照片是David的，那些照片是别人的。随时间推移，它会利用这些信息提升它的理解程度。<br>”监督“表示你有很多样本，你了解这些样本的正确答案</p>
<p>非监督学习<br>比如在医疗保健方面，如果我们已经了解某种疾病，监督学习可用以帮助系统，识别哪些人有患该病的风险，而非监督学习实际上可以根据常见症状的模式帮助我们发现甚至我们还不知道的疾病。</p>
<p>聚类：<br>K-MEANS</p>
<p>朴素贝叶斯：<br>推导过程和用法：<br><a href="http://scikit-learn.org/stable/modules/naive_bayes.html" target="_blank" rel="external">http://scikit-learn.org/stable/modules/naive_bayes.html</a><br><img src="http://scikit-learn.org/stable/_images/math/47537fc301bbf8971084f2ecbaa76658ad088235.png" alt="此处输入图片的描述"><br><img src="http://scikit-learn.org/stable/_images/math/4a2f8ee56238deb56e9e970a749bbe26d96465f7.png" alt="此处输入图片的描述"><br><img src="http://scikit-learn.org/stable/_images/math/7d90ebd2dc0cc2e1136a22625a489c3326d30ec7.png" alt="此处输入图片的描述"><br><img src="http://scikit-learn.org/stable/_images/math/201f076a3330f2928c26978c4eac59cc8ba4a440.png" alt="此处输入图片的描述"></p>
<p>还有高斯朴素贝叶斯<br><img src="http://scikit-learn.org/stable/_images/math/ed0c1181c1696f72e1be266187e4694919047d9e.png" alt="此处输入图片的描述"></p>
<p>python有一个库叫sklearn</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/11/机器学习-预测泰坦尼克号乘客生还率/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/11/机器学习-预测泰坦尼克号乘客生还率/" itemprop="url">
                  机器学习-预测泰坦尼克号乘客生还率
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-11T16:02:30+08:00">
                2017-01-11
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/11/机器学习-预测泰坦尼克号乘客生还率/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/11/机器学习-预测泰坦尼克号乘客生还率/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="机器学习"><a href="#机器学习" class="headerlink" title="机器学习"></a>机器学习</h1><h2 id="项目-0-预测泰坦尼克号乘客生还率"><a href="#项目-0-预测泰坦尼克号乘客生还率" class="headerlink" title="项目 0: 预测泰坦尼克号乘客生还率"></a>项目 0: 预测泰坦尼克号乘客生还率</h2><p>1912年，泰坦尼克号在第一次航行中就与冰山相撞沉没，导致了大部分乘客和船员身亡。在这个入门项目中，我们将探索部分泰坦尼克号旅客名单，来确定哪些特征可以最好地预测一个人是否会生还。为了完成这个项目，你将需要实现几个基于条件的预测并回答下面的问题。我们将根据代码的完成度和对问题的解答来对你提交的项目的进行评估。 </p>
<h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>当我们开始处理泰坦尼克号乘客数据时，会先导入我们需要的功能模块以及将数据加载到 <code>pandas</code> DataFrame。运行下面区域中的代码加载数据，并使用 <code>.head()</code> 函数显示前几项乘客数据。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line"><span class="comment"># RMS Titanic data visualization code </span></div><div class="line"><span class="comment"># 数据可视化代码</span></div><div class="line"><span class="keyword">from</span> titanic_visualizations <span class="keyword">import</span> survival_stats</div><div class="line"><span class="keyword">from</span> IPython.display <span class="keyword">import</span> display</div><div class="line">%matplotlib inline</div><div class="line"></div><div class="line"><span class="comment"># Load the dataset </span></div><div class="line"><span class="comment"># 加载数据集</span></div><div class="line">in_file = <span class="string">'titanic_data.csv'</span></div><div class="line">full_data = pd.read_csv(in_file)</div><div class="line"></div><div class="line"><span class="comment"># Print the first few entries of the RMS Titanic data </span></div><div class="line"><span class="comment"># 显示数据列表中的前几项乘客数据</span></div><div class="line">display(full_data.head())</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>序号</th>
<th>PassengerId</th>
<th>Survived</th>
<th>Pclass</th>
<th>Name</th>
<th>Sex</th>
<th>Age</th>
<th>SibSp</th>
<th>Parch</th>
<th>Ticket</th>
<th>Fare</th>
<th>Cabin</th>
<th>Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
<td>3</td>
<td>Braund, Mr. Owen Harris</td>
<td>male</td>
<td>22.0</td>
<td>1</td>
<td>0</td>
<td>A/5 21171</td>
<td>7.2500</td>
<td>NaN</td>
<td>S</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>Cumings, Mrs. John Bradley (Florence Briggs Th…</td>
<td>female</td>
<td>38.0</td>
<td>1</td>
<td>0</td>
<td>PC 17599</td>
<td>71.2833</td>
<td>C85</td>
<td>C</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>Heikkinen, Miss. Laina</td>
<td>female</td>
<td>26.0</td>
<td>0</td>
<td>0</td>
<td>STON/O2. 3101282</td>
<td>7.9250</td>
<td>NaN</td>
<td>S</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>1</td>
<td>1</td>
<td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
<td>female</td>
<td>35.0</td>
<td>1</td>
<td>0</td>
<td>113803</td>
<td>53.1000</td>
<td>C123</td>
<td>S</td>
</tr>
<tr>
<td>4</td>
<td>5</td>
<td>0</td>
<td>3</td>
<td>Allen, Mr. William Henry</td>
<td>male</td>
<td>35.0</td>
<td>0</td>
<td>0</td>
<td>373450</td>
<td>8.0500</td>
<td>NaN</td>
<td>S</td>
</tr>
</tbody>
</table>
<p>从泰坦尼克号的数据样本中，我们可以看到船上每位旅客的特征</p>
<ul>
<li><strong>Survived</strong>：是否存活（0代表否，1代表是）</li>
<li><strong>Pclass</strong>：社会阶级（1代表上层阶级，2代表中层阶级，3代表底层阶级）</li>
<li><strong>Name</strong>：船上乘客的名字</li>
<li><strong>Sex</strong>：船上乘客的性别</li>
<li><strong>Age</strong>:船上乘客的年龄（可能存在 <code>NaN</code>）</li>
<li><strong>SibSp</strong>：乘客在船上的兄弟姐妹和配偶的数量</li>
<li><strong>Parch</strong>：乘客在船上的父母以及小孩的数量</li>
<li><strong>Ticket</strong>：乘客船票的编号</li>
<li><strong>Fare</strong>：乘客为船票支付的费用</li>
<li><strong>Cabin</strong>：乘客所在船舱的编号（可能存在 <code>NaN</code>）</li>
<li><strong>Embarked</strong>：乘客上船的港口（C 代表从 Cherbourg 登船，Q 代表从 Queenstown 登船，S 代表从 Southampton 登船）</li>
</ul>
<p>因为我们感兴趣的是每个乘客或船员是否在事故中活了下来。可以将 <strong>Survived</strong> 这一特征从这个数据集移除，并且用一个单独的变量 <code>outcomes</code> 来存储。它也做为我们要预测的目标。</p>
<p>运行该代码，从数据集中移除 <strong>Survived</strong> 这个特征，并将它存储在变量 <code>outcomes</code> 中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Store the 'Survived' feature in a new variable and remove it from the dataset </span></div><div class="line"><span class="comment"># 从数据集中移除 'Survived' 这个特征，并将它存储在一个新的变量中。</span></div><div class="line">outcomes = full_data[<span class="string">'Survived'</span>]</div><div class="line">data = full_data.drop(<span class="string">'Survived'</span>, axis = <span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment"># Show the new dataset with 'Survived' removed</span></div><div class="line"><span class="comment"># 显示已移除 'Survived' 特征的数据集</span></div><div class="line">display(data.head())</div><div class="line"></div><div class="line">display(outcomes[<span class="number">1</span>])</div><div class="line"></div><div class="line">display(data.loc[<span class="number">1</span>])</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th>PassengerId</th>
<th>Pclass</th>
<th>Name</th>
<th>Sex</th>
<th>Age</th>
<th>SibSp</th>
<th>Parch</th>
<th>Ticket</th>
<th>Fare</th>
<th>Cabin</th>
<th>Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td>1</td>
<td>3</td>
<td>Braund, Mr. Owen Harris</td>
<td>male</td>
<td>22.0</td>
<td>1</td>
<td>0</td>
<td>A/5 21171</td>
<td>7.2500</td>
<td>NaN</td>
<td>S</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td>2</td>
<td>1</td>
<td>Cumings, Mrs. John Bradley (Florence Briggs Th…</td>
<td>female</td>
<td>38.0</td>
<td>1</td>
<td>0</td>
<td>PC 17599</td>
<td>71.2833</td>
<td>C85</td>
<td>C</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td>3</td>
<td>3</td>
<td>Heikkinen, Miss. Laina</td>
<td>female</td>
<td>26.0</td>
<td>0</td>
<td>0</td>
<td>STON/O2. 3101282</td>
<td>7.9250</td>
<td>NaN</td>
<td>S</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td>4</td>
<td>1</td>
<td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
<td>female</td>
<td>35.0</td>
<td>1</td>
<td>0</td>
<td>113803</td>
<td>53.1000</td>
<td>C123</td>
<td>S</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td>5</td>
<td>3</td>
<td>Allen, Mr. William Henry</td>
<td>male</td>
<td>35.0</td>
<td>0</td>
<td>0</td>
<td>373450</td>
<td>8.0500</td>
<td>NaN</td>
<td>S</td>
</tr>
</tbody>
</table>
<p> 1</p>
<pre><code>PassengerId                                                    2
Pclass                                                         1
Name           Cumings, Mrs. John Bradley (Florence Briggs Th...
Sex                                                       female
Age                                                           38
SibSp                                                          1
Parch                                                          0
Ticket                                                  PC 17599
Fare                                                     71.2833
Cabin                                                        C85
Embarked                                                       C
Name: 1, dtype: object
</code></pre><p>这个例子展示了如何将泰坦尼克号的 <strong>Survived</strong> 数据从 DataFrame 移除。注意到 <code>data</code>（乘客数据）和 <code>outcomes</code> （是否存活）现在已经匹配好。这意味着对于任何乘客的 <code>data.loc[i]</code> 都有对应的存活的结果 <code>outcome[i]</code>。</p>
<p>为了验证我们预测的结果，我们需要一个标准来给我们的预测打分。因为我们最感兴趣的是我们预测的<strong>准确率</strong>，既正确预测乘客存活的比例。运行下面的代码来创建我们的 <code>accuracy_score</code> 函数以对前五名乘客的预测来做测试。</p>
<p><strong>思考题</strong>：从第六个乘客算起，如果我们预测他们全部都存活，你觉得我们预测的准确率是多少？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">accuracy_score</span><span class="params">(truth, pred)</span>:</span></div><div class="line">    <span class="string">""" Returns accuracy score for input truth and predictions. """</span></div><div class="line">    </div><div class="line">    <span class="comment"># Ensure that the number of predictions matches number of outcomes</span></div><div class="line">    <span class="comment"># 确保预测的数量与结果的数量一致</span></div><div class="line">    <span class="keyword">if</span> len(truth) == len(pred): </div><div class="line"><span class="comment">#         print "kaish1"</span></div><div class="line"><span class="comment">#         print truth</span></div><div class="line"><span class="comment">#         print "kaish2"</span></div><div class="line"><span class="comment">#         print pred</span></div><div class="line"><span class="comment">#         print "end"</span></div><div class="line">        <span class="comment"># Calculate and return the accuracy as a percent</span></div><div class="line">        <span class="comment"># 计算预测准确率（百分比）</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"Predictions have an accuracy of &#123;:.2f&#125;%."</span>.format((truth == pred).mean()*<span class="number">100</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">"Number of predictions does not match number of outcomes!"</span></div><div class="line">    </div><div class="line"><span class="comment"># Test the 'accuracy_score' function</span></div><div class="line"><span class="comment"># 测试 'accuracy_score' 函数</span></div><div class="line"><span class="comment"># print np.ones(5, dtype = int)</span></div><div class="line"><span class="comment"># print outcomes[:5]</span></div><div class="line">predictions = pd.Series(np.ones(<span class="number">5</span>, dtype = int))</div><div class="line"><span class="comment"># print accuracy_score(outcomes[:5], predictions)</span></div></pre></td></tr></table></figure>
<blockquote>
<p><strong>提示</strong>：如果你保存 iPython Notebook，代码运行的输出也将被保存。但是，一旦你重新打开项目，你的工作区将会被重置。请确保每次都从上次离开的地方运行代码来重新生成变量和函数。</p>
</blockquote>
<h1 id="预测"><a href="#预测" class="headerlink" title="预测"></a>预测</h1><p>如果我们要预测泰坦尼克号上的乘客是否存活，但是我们又对他们一无所知，那么最好的预测就是船上的人无一幸免。这是因为，我们可以假定当船沉没的时候大多数乘客都遇难了。下面的 <code>predictions_0</code> 函数就预测船上的乘客全部遇难。  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">predictions_0</span><span class="params">(data)</span>:</span></div><div class="line">    <span class="string">""" Model with no features. Always predicts a passenger did not survive. """</span></div><div class="line"></div><div class="line">    predictions = []</div><div class="line">    <span class="keyword">for</span> _, passenger <span class="keyword">in</span> data.iterrows():</div><div class="line">        </div><div class="line">        <span class="comment"># Predict the survival of 'passenger'</span></div><div class="line">        <span class="comment"># 预测 'passenger' 的生还率</span></div><div class="line">        predictions.append(<span class="number">0</span>)</div><div class="line">    </div><div class="line">    <span class="comment"># Return our predictions</span></div><div class="line">    <span class="comment"># 返回预测结果</span></div><div class="line">    <span class="keyword">return</span> pd.Series(predictions)</div><div class="line"></div><div class="line"><span class="comment"># Make the predictions</span></div><div class="line"><span class="comment"># 进行预测</span></div><div class="line">predictions = predictions_0(data)</div></pre></td></tr></table></figure>
<h3 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h3><p>对比真实的泰坦尼克号的数据，如果我们做一个所有乘客都没有存活的预测，你认为这个预测的准确率能达到多少？</p>
<p><strong>提示</strong>：运行下面的代码来查看预测的准确率。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> accuracy_score(outcomes, predictions)</div></pre></td></tr></table></figure>
<pre><code>Predictions have an accuracy of 61.62%.
</code></pre><p><strong>回答:</strong> <em>请用上面出现的预测结果来替换掉这里的文字</em> 61.62%</p>
<hr>
<p>我们可以使用 <code>survival_stats</code> 函数来看看 <strong>Sex</strong> 这一特征对乘客的存活率有多大影响。这个函数定义在名为 <code>titanic_visualizations.py</code> 的 Python 脚本文件中，我们的项目提供了这个文件。传递给函数的前两个参数分别是泰坦尼克号的乘客数据和乘客的 生还结果。第三个参数表明我们会依据哪个特征来绘制图形。</p>
<p>运行下面的代码绘制出依据乘客性别计算存活率的柱形图。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">survival_stats(data, outcomes, <span class="string">'Sex'</span>)</div></pre></td></tr></table></figure>
<p><img src="http://oh6ybr0jg.bkt.clouddn.com/output_14_0.png" alt="此处输入图片的描述"></p>
<p>观察泰坦尼克号上乘客存活的数据统计，我们可以发现大部分男性乘客在船沉没的时候都遇难了。相反的，大部分女性乘客都在事故中<strong>生还</strong>。让我们在先前推断的基础上继续创建：如果乘客是男性，那么我们就预测他们遇难；如果乘客是女性，那么我们预测他们在事故中活了下来。</p>
<p>将下面的代码补充完整，让函数可以进行正确预测。  </p>
<p><strong>提示</strong>：您可以用访问 dictionary（字典）的方法来访问船上乘客的每个特征对应的值。例如， <code>passenger[&#39;Sex&#39;]</code> 返回乘客的性别。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">predictions_1</span><span class="params">(data)</span>:</span></div><div class="line">    <span class="string">""" Model with one feature: </span></div><div class="line">            - Predict a passenger survived if they are female. """</div><div class="line">    </div><div class="line">    predictions = []</div><div class="line">    <span class="keyword">for</span> _, passenger <span class="keyword">in</span> data.iterrows():</div><div class="line">        </div><div class="line">        <span class="comment"># Remove the 'pass' statement below </span></div><div class="line">        <span class="comment"># 移除下方的 'pass' 声明</span></div><div class="line">        <span class="comment"># and write your prediction conditions here</span></div><div class="line">        <span class="comment"># 输入你自己的预测条件</span></div><div class="line">        <span class="comment">#  print passenger['Sex']</span></div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(passenger[<span class="string">'Sex'</span>] == <span class="string">"male"</span>) :</div><div class="line">            predictions.append(<span class="number">0</span>)</div><div class="line">        <span class="keyword">else</span> :</div><div class="line">            predictions.append(<span class="number">1</span>)</div><div class="line">    </div><div class="line">    <span class="comment"># Return our predictions</span></div><div class="line">    <span class="comment"># 返回预测结果</span></div><div class="line">    <span class="keyword">return</span> pd.Series(predictions)</div><div class="line"></div><div class="line"><span class="comment"># Make the predictions</span></div><div class="line"><span class="comment"># 进行预测</span></div><div class="line">predictions = predictions_1(data)</div><div class="line"></div><div class="line"><span class="comment"># print predictions</span></div></pre></td></tr></table></figure>
<h3 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h3><p>当我们预测船上女性乘客全部存活，而剩下的人全部遇难，那么我们预测的准确率会达到多少？</p>
<p><strong>提示</strong>：运行下面的代码来查看我们预测的准确率。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#print predictions</span></div><div class="line"><span class="keyword">print</span> accuracy_score(outcomes, predictions)</div></pre></td></tr></table></figure>
<pre><code>Predictions have an accuracy of 78.68%.
</code></pre><p><strong>回答</strong>: <em>用上面出现的预测结果来替换掉这里的文字</em> 78.68%.</p>
<hr>
<p>仅仅使用乘客性别（Sex）这一特征，我们预测的准确性就有了明显的提高。现在再看一下使用额外的特征能否更进一步提升我们的预测准确度。例如，综合考虑所有在泰坦尼克号上的男性乘客：我们是否找到这些乘客中的一个子集，他们的存活概率较高。让我们再次使用 <code>survival_stats</code> 函数来看看每位男性乘客的年龄（Age）。这一次，我们将使用第四个参数来限定柱形图中只有男性乘客。</p>
<p>运行下面这段代码，把男性基于年龄的生存结果绘制出来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">survival_stats(data, outcomes, <span class="string">'Age'</span>, [<span class="string">"Sex == 'male'"</span>])</div></pre></td></tr></table></figure>
<p><img src="http://oh6ybr0jg.bkt.clouddn.com/output_21_0.png" alt="此处输入图片的描述"></p>
<p>仔细观察泰坦尼克号存活的数据统计，在船沉没的时候，大部分小于10岁的男孩都活着，而大多数10岁以上的男性都随着船的沉没而<strong>遇难</strong>。让我们继续在先前预测的基础上构建：如果乘客是女性，那么我们就预测她们全部存活；如果乘客是男性并且小于10岁，我们也会预测他们全部存活；所有其它我们就预测他们都没有幸存。  </p>
<p>将下面缺失的代码补充完整，让我们的函数可以实现预测。<br><strong>提示</strong>: 您可以用之前 <code>predictions_1</code> 的代码作为开始来修改代码，实现新的预测函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">predictions_2</span><span class="params">(data)</span>:</span></div><div class="line">    <span class="string">""" Model with two features: </span></div><div class="line">            - Predict a passenger survived if they are female.</div><div class="line">            - Predict a passenger survived if they are male and younger than 10. """</div><div class="line">    </div><div class="line">    predictions = []</div><div class="line">    <span class="keyword">for</span> _, passenger <span class="keyword">in</span> data.iterrows():</div><div class="line">        </div><div class="line">        <span class="comment"># Remove the 'pass' statement below </span></div><div class="line">        <span class="comment"># 移除下方的 'pass' 声明</span></div><div class="line">        <span class="comment"># and write your prediction conditions here</span></div><div class="line">        <span class="comment"># 输入你自己的预测条件</span></div><div class="line">        <span class="keyword">if</span>(passenger[<span class="string">'Sex'</span>] == <span class="string">"male"</span>) :</div><div class="line">           </div><div class="line">            <span class="keyword">if</span>(passenger[<span class="string">'Age'</span>] &lt; <span class="number">10</span>) :</div><div class="line">                predictions.append(<span class="number">1</span>)</div><div class="line">            <span class="keyword">else</span> :</div><div class="line">                predictions.append(<span class="number">0</span>)</div><div class="line">        <span class="keyword">else</span> :</div><div class="line">             predictions.append(<span class="number">1</span>)</div><div class="line">            </div><div class="line">    </div><div class="line">    <span class="comment"># Return our predictions</span></div><div class="line">    <span class="comment"># 返回预测结果</span></div><div class="line">    <span class="keyword">return</span> pd.Series(predictions)</div><div class="line"></div><div class="line"><span class="comment"># Make the predictions</span></div><div class="line"><span class="comment"># 进行预测</span></div><div class="line">predictions = predictions_2(data)</div><div class="line"></div><div class="line"><span class="comment"># print predictions</span></div></pre></td></tr></table></figure>
<h3 id="问题3"><a href="#问题3" class="headerlink" title="问题3"></a>问题3</h3><p>当预测所有女性以及小于10岁的男性都存活的时候，预测的准确率会达到多少？</p>
<p><strong>提示：</strong>运行下面的代码来查看预测的准确率。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> accuracy_score(outcomes, predictions)</div></pre></td></tr></table></figure>
<pre><code>Predictions have an accuracy of 79.35%.
</code></pre><p><strong>回答</strong>: <em>用上面出现的预测结果来替换掉这里的文字</em>   79.35%</p>
<hr>
<p>添加年龄（Age）特征与性别（Sex）的结合比单独使用性别（Sex）也提高了不少准确度。现在该你来做预测了：找到一系列的特征和条件来对数据进行划分，使得预测结果提高到80%以上。这可能需要多个特性和多个层次的条件语句才会成功。你可以在不同的条件下多次使用相同的特征。<strong>Pclass</strong>，<strong>Sex</strong>，<strong>Age</strong>，<strong>SibSp</strong> 和 <strong>Parch</strong> 是建议尝试使用的特征。   </p>
<p>使用 <code>survival_stats</code> 函数来观测泰坦尼克号上乘客存活的数据统计。<br><strong>提示:</strong> 要使用多个过滤条件，把每一个条件放在一个列表里作为最后一个参数传递进去。例如: <code>[&quot;Sex == &#39;male&#39;&quot;, &quot;Age &lt; 18&quot;]</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">survival_stats(data, outcomes, <span class="string">'Embarked'</span>, [<span class="string">"Sex == 'female'"</span>,<span class="string">"Pclass == 3"</span>])</div></pre></td></tr></table></figure>
<p><img src="http://oh6ybr0jg.bkt.clouddn.com/output_28_0.png" alt="此处输入图片的描述"></p>
<p>当查看和研究了图形化的泰坦尼克号上乘客的数据统计后，请补全下面这段代码中缺失的部分，使得函数可以返回你的预测。<br>在到达最终的预测模型前请确保记录你尝试过的各种特征和条件。<br><strong>提示:</strong> 您可以用之前 <code>predictions_2</code> 的代码作为开始来修改代码，实现新的预测函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">predictions_3</span><span class="params">(data)</span>:</span></div><div class="line">    <span class="string">""" Model with multiple features. Makes a prediction with an accuracy of at least 80%. """</span></div><div class="line">    </div><div class="line">    predictions = []</div><div class="line">    <span class="keyword">for</span> _, passenger <span class="keyword">in</span> data.iterrows():</div><div class="line">        </div><div class="line">        <span class="comment"># Remove the 'pass' statement below </span></div><div class="line">        <span class="comment"># and write your prediction conditions here</span></div><div class="line">        <span class="keyword">if</span>(passenger[<span class="string">'Sex'</span>] == <span class="string">"male"</span>) :</div><div class="line">           </div><div class="line">            <span class="keyword">if</span>(passenger[<span class="string">'Age'</span>] &lt; <span class="number">18</span>) :</div><div class="line">                <span class="keyword">if</span>(passenger[<span class="string">'Pclass'</span>] &lt; <span class="number">3</span> ) :</div><div class="line">                     predictions.append(<span class="number">1</span>)</div><div class="line">                <span class="keyword">else</span> :</div><div class="line">                     predictions.append(<span class="number">0</span>)</div><div class="line">            <span class="keyword">else</span> :</div><div class="line">                </div><div class="line">                    predictions.append(<span class="number">0</span>)      </div><div class="line">               </div><div class="line"><span class="comment">#                 print passenger['Pclass']</span></div><div class="line"><span class="comment">#                if(passenger['Pclass'] &gt; 1 ) :</span></div><div class="line"><span class="comment">#                     predictions.append(0)</span></div><div class="line"><span class="comment">#                else :</span></div><div class="line"><span class="comment">#                     predictions.append(1)</span></div><div class="line">        <span class="keyword">else</span> :</div><div class="line">            </div><div class="line">             <span class="keyword">if</span>(passenger[<span class="string">'Pclass'</span>] == <span class="number">3</span> ) :</div><div class="line">                    <span class="keyword">if</span>(passenger[<span class="string">'Embarked'</span>] == <span class="string">'S'</span> ) :</div><div class="line">                        predictions.append(<span class="number">0</span>)</div><div class="line">                    <span class="keyword">else</span> :</div><div class="line">                        predictions.append(<span class="number">1</span>)</div><div class="line">             <span class="keyword">else</span> :</div><div class="line">                    predictions.append(<span class="number">1</span>)</div><div class="line">    </div><div class="line">    <span class="comment"># Return our predictions</span></div><div class="line">    <span class="keyword">return</span> pd.Series(predictions)</div><div class="line"></div><div class="line"><span class="comment"># Make the predictions</span></div><div class="line">predictions = predictions_3(data)</div></pre></td></tr></table></figure>
<h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>请描述你实现80%准确度的预测模型所经历的步骤。您观察过哪些特征？某些特性是否比其他特征更有帮助？你用了什么条件来预测生还结果？你最终的预测的准确率是多少？<br><strong>提示:</strong>运行下面的代码来查看你的预测准确度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> accuracy_score(outcomes, predictions)</div></pre></td></tr></table></figure>
<pre><code>Predictions have an accuracy of 82.38%.
</code></pre><p><strong>回答</strong>: <em>用上面问题的答案来替换掉这里的文字</em></p>
<h1 id="结论-1"><a href="#结论-1" class="headerlink" title="结论"></a>结论</h1><p>经过了数次对数据的探索和分类，你创建了一个预测泰坦尼克号乘客存活率的有用的算法。在这个项目中你手动地实现了一个简单的机器学习模型——决策树（decision tree）。决策树每次按照一个特征把数据分割成越来越小的群组（被称为 <em>nodes</em>）。每次数据的一个子集被分出来，如果分割结果的子集中的数据比之前更同质（包含近似的标签），我们的预测也就更加准确。电脑来帮助我们做这件事会比手动做更彻底，更精确。<a href="http://www.r2d3.us/visual-intro-to-machine-learning-part-1/" target="_blank" rel="external">这个链接</a>提供了另一个使用决策树做机器学习入门的例子。  </p>
<p>决策树是许多<strong>监督学习</strong>算法中的一种。在监督学习中，我们关心的是使用数据的特征并根据数据的结果标签进行预测或建模。也就是说，每一组数据都有一个真正的结果值，不论是像泰坦尼克号生存数据集一样的标签，或者是连续的房价预测。</p>
<h3 id="问题5"><a href="#问题5" class="headerlink" title="问题5"></a>问题5</h3><p>想象一个真实世界中应用监督学习的场景，你期望预测的结果是什么？举出两个在这个场景中能够帮助你进行预测的数据集中的特征。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/10/算法推演/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/10/算法推演/" itemprop="url">
                  算法推演
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-10T21:13:30+08:00">
                2017-01-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/10/算法推演/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/10/算法推演/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oh6ybr0jg.bkt.clouddn.com/%E6%8E%A8%E6%BC%94%E5%9B%BE.png" alt="此处输入图片的描述"></p>
<h2 id="条件概率"><a href="#条件概率" class="headerlink" title="条件概率"></a>条件概率</h2><p>事件A在另外一个事件B已经发生条件下的发生概率。条件概率表示为P（A|B），读作“在B条件下A的概率”。</p>
<p>设A，B 是两个事件，且A不是不可能事件，则称<img src="http://oh6ybr0jg.bkt.clouddn.com/%E7%AE%97%E6%B3%95-%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87.jpg" alt="此处输入图片的描述"><br>为在事件A发生的条件下，事件B发生的条件概率。一般地，<img src="http://oh6ybr0jg.bkt.clouddn.com/%E7%AE%97%E6%B3%95-%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%872.jpg" alt="此处输入图片的描述"><br>，且它满足以下三条件：<br>（1）非负性；（2）规范性；（3）可列可加性。</p>
<p>如上图<br>求：红球来自A的概率<br>P（A|红） =  P（A红）/P（红）</p>
<h2 id="全概率公式"><a href="#全概率公式" class="headerlink" title="全概率公式"></a>全概率公式</h2><p>全概率公式为概率论中的重要公式，它将对一复杂事件A的概率求解问题转化为了在不同情况下发生的简单事件的概率的求和问题。</p>
<p>公式表示若事件A1，A2，…，An构成一个完备事件组且都有正概率，则对任意一个事件B都有公式成立。</p>
<p><img src="http://oh6ybr0jg.bkt.clouddn.com/%E5%85%A8%E6%A6%82%E7%8E%87%E5%85%AC%E5%BC%8F.png" alt="此处输入图片的描述"></p>
<p>如上图<br>求：红球的概率<br>P（红） =  P（A红）+P（B红）</p>
<h2 id="贝叶斯定理"><a href="#贝叶斯定理" class="headerlink" title="贝叶斯定理"></a>贝叶斯定理</h2><p>贝叶斯定理是关于随机事件A和B的条件概率（或边缘概率）的一则定理。<br>其中P(A|B)是在B发生的情况下A发生的可能性。</p>
<p><img src="http://oh6ybr0jg.bkt.clouddn.com/%E8%B4%9D%E5%8F%B6%E6%96%AF%E6%8E%A8%E6%BC%94.png" alt="此处输入图片的描述"></p>
<h2 id="欧几里得定理"><a href="#欧几里得定理" class="headerlink" title="欧几里得定理"></a>欧几里得定理</h2><p>二维空间的公式<br>0ρ = sqrt( (x1-x2)^2+(y1-y2)^2 )　|x| = √( x2 + y2 )<br>三维空间的公式<br>0ρ = √( (x1-x2)^2+(y1-y2)^2+(z1-z2)^2 )　|x| = √( x2 + y2 + z2 )<br>n维空间的公式<br>n维欧氏空间是一个点集,它的每个点 X 或向量 x 可以表示为 (x<a href="http://oh6ybr0jg.bkt.clouddn.com/%E6%8E%A8%E6%BC%94%E5%9B%BE.png" target="_blank" rel="external">1</a>，x<a href="http://oh6ybr0jg.bkt.clouddn.com/%E7%AE%97%E6%B3%95-%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87.jpg" target="_blank" rel="external">2</a>，…，x[n]) ，其中 x<a href="i = 1，2，…，n">i</a> 是实数，称为 X 的第i个坐标。<br>两个点 A = (a<a href="http://oh6ybr0jg.bkt.clouddn.com/%E6%8E%A8%E6%BC%94%E5%9B%BE.png" target="_blank" rel="external">1</a>，a<a href="http://oh6ybr0jg.bkt.clouddn.com/%E7%AE%97%E6%B3%95-%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87.jpg" target="_blank" rel="external">2</a>，…，a[n]) 和 B = (b<a href="http://oh6ybr0jg.bkt.clouddn.com/%E6%8E%A8%E6%BC%94%E5%9B%BE.png" target="_blank" rel="external">1</a>，b<a href="http://oh6ybr0jg.bkt.clouddn.com/%E7%AE%97%E6%B3%95-%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87.jpg" target="_blank" rel="external">2</a>，…，b[n]) 之间的距离 ρ(A，B) 定义为下面的公式：<br>ρ(A，B) =√ [ ∑( a[i] - b[i] )^2 ] (i = 1，2，…，n)<br>向量 x = (x<a href="http://oh6ybr0jg.bkt.clouddn.com/%E6%8E%A8%E6%BC%94%E5%9B%BE.png" target="_blank" rel="external">1</a>，x<a href="http://oh6ybr0jg.bkt.clouddn.com/%E7%AE%97%E6%B3%95-%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87.jpg" target="_blank" rel="external">2</a>，…，x[n]) 的自然长度 |x| 定义为下面的公式：<br>|x| = √( x<a href="http://oh6ybr0jg.bkt.clouddn.com/%E6%8E%A8%E6%BC%94%E5%9B%BE.png" target="_blank" rel="external">1</a>^2 + x<a href="http://oh6ybr0jg.bkt.clouddn.com/%E7%AE%97%E6%B3%95-%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87.jpg" target="_blank" rel="external">2</a>^2 + … + x[n]^2 )</p>
<h2 id="线性方程"><a href="#线性方程" class="headerlink" title="线性方程"></a>线性方程</h2><p>线性方程也称一次方程。指未知数都是一次的方程。其一般的形式是ax+by+…+cz+d=0。线性方程的本质是等式两边乘以任何相同的非零数，方程的本质都不受影响。<br>ax + by = c<br>机器学习里面用逼近论来算</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-python " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/10/python 初探/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/10/python 初探/" itemprop="url">
                  python 初探
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-10T07:33:30+08:00">
                2017-01-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/10/python 初探/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/10/python 初探/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Python是一种解释型语言，不用编译<br>Python是交互式语言<br>Python是面向对象的语言</p>
<p>从简单的文字处理到爬虫游戏</p>
<p>python有2个分支，一个是2.x 一个是3.x语法会不同<br>例如print 1 在3.x版本是一个函数要写成print(1)</p>
<p>和java不同的是有以下两个类型<br>定义元祖类型()   元组是可读的<br>定义字典类型{}</p>
<p>初始化a={2,3}  type以下a的类型为set   </p>
<p>引用模块<br>import 包名.类名<br>from 包名.类名 import *<br>from 包名.类名 import 方法名 as 别名</p>
<p>如果想别的模块不能引用自己模块的内容可以增加<br>if <strong>name</strong>==’<strong>main</strong>‘</p>
<p>每个目录下都有<strong>init</strong>.py文件，这个是初始化模块</p>
<p>python开启多线程，可以使用内置关键字threading</p>
<p>私有变量前面加__<br>实例不能访问私有变量</p>
<p>python使用引用计数法追踪内存并回收</p>
<p>继承<br>child(parent)</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/04/算法思维/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/04/算法思维/" itemprop="url">
                  算法思维
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-04T20:36:47+08:00">
                2017-01-04
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/04/算法思维/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/04/算法思维/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>火柴棍游戏</p>
<p><img src="http://oh6ybr0jg.bkt.clouddn.com/6008.png" alt="此处输入图片的描述"></p>
<p>移动两根火柴得到的最大值是多少？</p>
<p>一般人的第一反应是：<br><img src="http://oh6ybr0jg.bkt.clouddn.com/9809.png" alt="此处输入图片的描述"></p>
<p>如果我们想到了位数越多，数字越大，就会想到：<br><img src="http://oh6ybr0jg.bkt.clouddn.com/61008.png" alt="此处输入图片的描述"></p>
<p>此时如果想到了平方计算<br><img src="http://oh6ybr0jg.bkt.clouddn.com/500~9.png" alt="此处输入图片的描述"></p>
<p>那么你需要的是继续发散四位，想到科学计数法<br><img src="http://oh6ybr0jg.bkt.clouddn.com/6e80.png" alt="此处输入图片的描述"></p>
<p>但是此时并不是最大的</p>
<p>只有当你想到了以下的数据，那么恭喜你成功了<br><img src="http://oh6ybr0jg.bkt.clouddn.com/6ee8.png" alt="此处输入图片的描述"></p>
<p>思路决定出路</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/28/spring boot solr/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/28/spring boot solr/" itemprop="url">
                  spring boot solr
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-28T23:33:30+08:00">
                2016-12-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/28/spring boot solr/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/28/spring boot solr/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>pom引入solr的jar包<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;spring-boot-starter-data-solr&lt;/artifactId&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/19/docker玩kafka集群/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="张洪铭">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Hexo" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/19/docker玩kafka集群/" itemprop="url">
                  docker版Kafka集群
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-19T12:33:30+08:00">
                2016-12-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/19/docker玩kafka集群/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/19/docker玩kafka集群/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="入手centos7"><a href="#入手centos7" class="headerlink" title="入手centos7"></a>入手centos7</h3><p>首先打开centos 官网下载<br><a href="https://www.centos.org/download/" target="_blank" rel="external">https://www.centos.org/download/</a></p>
<p>选择DVD ISO</p>
<p>找到地址并下载<br><a href="http://101.96.8.151/isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso" target="_blank" rel="external">http://101.96.8.151/isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso</a></p>
<p>安装参考：<br><a href="http://blog.csdn.net/alex_my/article/details/38142229" target="_blank" rel="external">http://blog.csdn.net/alex_my/article/details/38142229</a></p>
<h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><p>安装详情可参考官网<br><a href="https://docs.docker.com/engine/installation/linux/centos/" target="_blank" rel="external">https://docs.docker.com/engine/installation/linux/centos/</a></p>
<p>博主使用另外一种简单方式安装<br>安装docker<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install docker</div></pre></td></tr></table></figure></p>
<p>启动服务（CENTOS7之前的版本）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service docker start</div><div class="line">chkconfig docker on</div></pre></td></tr></table></figure></p>
<p>Centos之后的：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">systemctl  start docker.service</div><div class="line">systemctl  enable docker.service</div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">docker version</div><div class="line">Client:</div><div class="line"> Version:         <span class="number">1.10</span><span class="number">.3</span></div><div class="line"> API version:     <span class="number">1.22</span></div><div class="line"> Package version: docker-common<span class="number">-1.10</span><span class="number">.3</span><span class="number">-59.</span>el7.centos.x86_64</div><div class="line"> Go version:      go1<span class="number">.6</span><span class="number">.3</span></div><div class="line"> Git commit:      <span class="number">3999</span>ccb-unsupported</div><div class="line"> Built:           Thu Dec <span class="number">15</span> <span class="number">17</span>:<span class="number">24</span>:<span class="number">43</span> <span class="number">2016</span></div><div class="line"> OS/Arch:         linux/amd64</div><div class="line"></div><div class="line">Server:</div><div class="line"> Version:         <span class="number">1.10</span><span class="number">.3</span></div><div class="line"> API version:     <span class="number">1.22</span></div><div class="line"> Package version: docker-common<span class="number">-1.10</span><span class="number">.3</span><span class="number">-59.</span>el7.centos.x86_64</div><div class="line"> Go version:      go1<span class="number">.6</span><span class="number">.3</span></div><div class="line"> Git commit:      <span class="number">3999</span>ccb-unsupported</div><div class="line"> Built:           Thu Dec <span class="number">15</span> <span class="number">17</span>:<span class="number">24</span>:<span class="number">43</span> <span class="number">2016</span></div><div class="line"> OS/Arch:         linux/amd64</div></pre></td></tr></table></figure>
<h3 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h3><p>博主当时有1.7.1的版本在安装完之后启动报错<br>Cannot open self /usr/bin/docker-compose or archive /usr/bin/docker-compose.pkg</p>
<p>后改用早一点的版本1.7.0测试没有问题<br>下载和安装地址可参考：<br><a href="https://github.com/docker/compose/releases?after=docs-v1.7.1-2016-05-31" target="_blank" rel="external">https://github.com/docker/compose/releases?after=docs-v1.7.1-2016-05-31</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">curl -L https:<span class="comment">//github.com/docker/compose/releases/download/1.7.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span></div><div class="line">chmod +x /usr/local/bin/docker-compose</div><div class="line"></div><div class="line">docker-compose version</div><div class="line">docker-compose version <span class="number">1.7</span><span class="number">.0</span>, build <span class="number">0</span>d7bf73</div><div class="line">docker-py version: <span class="number">1.8</span><span class="number">.0</span></div><div class="line">CPython version: <span class="number">2.7</span><span class="number">.9</span></div><div class="line">OpenSSL version: OpenSSL <span class="number">1.0</span><span class="number">.1</span>e <span class="number">11</span> Feb <span class="number">2013</span></div></pre></td></tr></table></figure></p>
<p>编写docker文件，此处参考Jason大神的，尊重原创，转载请标注<br>kafka.Dockerfile<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">FROM centos:<span class="number">6.6</span></div><div class="line"></div><div class="line">RUN mkdir /etc/yum.repos.d/backup &amp;&amp;\</div><div class="line">	mv /etc/yum.repos.d<span class="comment">/*.repo /etc/yum.repos.d/backup/ &amp;&amp;\</span></div><div class="line">	curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</div><div class="line"></div><div class="line">RUN yum -y install vim lsof wget tar bzip2 unzip vim-enhanced passwd sudo yum-utils hostname net-tools rsync man git make automake cmake patch logrotate python-devel libpng-devel libjpeg-devel pwgen python-pip</div><div class="line"></div><div class="line">RUN mkdir /opt/java &amp;&amp;\</div><div class="line">	wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.tar.gz -P /opt/java</div><div class="line"></div><div class="line">ENV KAFKA_VERSION "0.8.2.2"</div><div class="line"></div><div class="line">RUN mkdir /opt/kafka &amp;&amp;\</div><div class="line">	wget http://apache.fayea.com/kafka/$KAFKA_VERSION/kafka_2.11-$KAFKA_VERSION.tgz -P /opt/kafka</div><div class="line"></div><div class="line">RUN tar zxvf /opt/java/jdk-8u102-linux-x64.tar.gz -C /opt/java &amp;&amp;\</div><div class="line">	JAVA_HOME=/opt/java/jdk1.8.0_102 &amp;&amp;\</div><div class="line">	sed -i "/^PATH/i export JAVA_HOME=$JAVA_HOME" /root/.bash_profile &amp;&amp;\</div><div class="line">	sed -i "s%^PATH.*$%&amp;:$JAVA_HOME/bin%g" /root/.bash_profile &amp;&amp;\</div><div class="line">	source /root/.bash_profile</div><div class="line"></div><div class="line">RUN tar zxvf /opt/kafka/kafka*.tgz -C /opt/kafka &amp;&amp;\</div><div class="line">	sed -i 's/num.partitions.*$/num.partitions=3/g' /opt/kafka/kafka_2.11-$KAFKA_VERSION/config/server.properties</div><div class="line"></div><div class="line">RUN echo "source /root/.bash_profile" &gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "cd /opt/kafka/kafka_2.11-"$KAFKA_VERSION &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	#echo "sed -i 's%zookeeper.connect=.*$%zookeeper.connect=zookeeper:2181%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""ZOOKEEPER_CONNECT"" ] &amp;&amp; sed -i 's%.*zookeeper.connect=.*$%zookeeper.connect='$""ZOOKEEPER_CONNECT'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""BROKER_ID"" ] &amp;&amp; sed -i 's%broker.id=.*$%broker.id='$""BROKER_ID'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""BROKER_PORT"" ] &amp;&amp; sed -i 's%port=.*$%port='$""BROKER_PORT'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "sed -i 's%#advertised.host.name=.*$%advertised.host.name='$""(hostname -i)'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""ADVERTISED_HOST_NAME"" ] &amp;&amp; sed -i 's%.*advertised.host.name=.*$%advertised.host.name='$""ADVERTISED_HOST_NAME'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "sed -i 's%#host.name=.*$%host.name='$""(hostname -i)'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "[ ! -z $""HOST_NAME"" ] &amp;&amp; sed -i 's%.*host.name=.*$%host.name='$""HOST_NAME'""%g'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	echo "delete.topic.enable=true" &gt;&gt; /opt/kafka/kafka_2.11-$KAFKA_VERSION/config/server.properties &amp;&amp;\</div><div class="line">	echo "bin/kafka-server-start.sh config/server.properties" &gt;&gt; /opt/kafka/start.sh &amp;&amp;\</div><div class="line">	chmod a+x /opt/kafka/start.sh</div><div class="line"></div><div class="line">RUN yum install -y nc</div><div class="line"></div><div class="line">EXPOSE 9092</div><div class="line"></div><div class="line">WORKDIR /opt/kafka/kafka_2.11-$KAFKA_VERSION</div><div class="line"></div><div class="line">ENTRYPOINT ["sh", "/opt/kafka/start.sh"]</div></pre></td></tr></table></figure></p>
<p>zookeeper.Dockerfile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">FROM centos:6.6</div><div class="line"></div><div class="line">RUN mkdir /etc/yum.repos.d/backup &amp;&amp;\</div><div class="line">	mv /etc/yum.repos.d/*.repo /etc/yum.repos.d/backup/ &amp;&amp;\</div><div class="line">	curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</div><div class="line"></div><div class="line">RUN yum -y install vim lsof wget tar bzip2 unzip vim-enhanced passwd sudo yum-utils hostname net-tools rsync man git make automake cmake patch logrotate python-devel libpng-devel libjpeg-devel pwgen python-pip</div><div class="line"></div><div class="line">RUN mkdir /opt/java &amp;&amp;\</div><div class="line">	wget --no-check-certificate --no-cookies --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.tar.gz -P /opt/java</div><div class="line"></div><div class="line">RUN tar zxvf /opt/java/jdk-8u102-linux-x64.tar.gz -C /opt/java &amp;&amp;\</div><div class="line">	JAVA_HOME=/opt/java/jdk1.8.0_102 &amp;&amp;\</div><div class="line">	sed -i &quot;/^PATH/i export JAVA_HOME=$JAVA_HOME&quot; /root/.bash_profile &amp;&amp;\</div><div class="line">	sed -i &quot;s%^PATH.*$%&amp;:$JAVA_HOME/bin%g&quot; /root/.bash_profile &amp;&amp;\</div><div class="line">	source /root/.bash_profile</div><div class="line"></div><div class="line">ENV ZOOKEEPER_VERSION &quot;3.4.6&quot;</div><div class="line"></div><div class="line">RUN mkdir /opt/zookeeper &amp;&amp;\</div><div class="line">	wget http://mirror.olnevhost.net/pub/apache/zookeeper/zookeeper-$ZOOKEEPER_VERSION/zookeeper-$ZOOKEEPER_VERSION.tar.gz -P /opt/zookeeper</div><div class="line"></div><div class="line">RUN tar zxvf /opt/zookeeper/zookeeper*.tar.gz -C /opt/zookeeper</div><div class="line"></div><div class="line">RUN echo &quot;source /root/.bash_profile&quot; &gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;cp /opt/zookeeper/zookeeper-&quot;$ZOOKEEPER_VERSION&quot;/conf/zoo_sample.cfg /opt/zookeeper/zookeeper-&quot;$ZOOKEEPER_VERSION&quot;/conf/zoo.cfg&quot; &gt;&gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;[ ! -z $&quot;&quot;ZOOKEEPER_PORT&quot;&quot; ] &amp;&amp; sed -i &apos;s%.*clientPort=.*$%clientPort=&apos;$&quot;&quot;ZOOKEEPER_PORT&apos;&quot;&quot;%g&apos;  /opt/zookeeper/zookeeper-&quot;$ZOOKEEPER_VERSION&quot;/conf/zoo.cfg&quot; &gt;&gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;[ ! -z $&quot;&quot;ZOOKEEPER_ID&quot;&quot; ] &amp;&amp; mkdir -p /tmp/zookeeper &amp;&amp; echo $&quot;&quot;ZOOKEEPER_ID &gt; /tmp/zookeeper/myid&quot; &gt;&gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;[[ ! -z $&quot;&quot;ZOOKEEPER_SERVERS&quot;&quot; ]] &amp;&amp; for server in $&quot;&quot;ZOOKEEPER_SERVERS&quot;&quot;; do echo $&quot;&quot;server&quot;&quot; &gt;&gt; /opt/zookeeper/zookeeper-&quot;$ZOOKEEPER_VERSION&quot;/conf/zoo.cfg; done&quot; &gt;&gt; /opt/zookeeper/start.sh &amp;&amp;\</div><div class="line">	echo &quot;/opt/zookeeper/zookeeper-$&quot;ZOOKEEPER_VERSION&quot;/bin/zkServer.sh start-foreground&quot; &gt;&gt; /opt/zookeeper/start.sh</div><div class="line"></div><div class="line">RUN yum install -y nc</div><div class="line"></div><div class="line">EXPOSE 2181</div><div class="line"></div><div class="line">WORKDIR /opt/zookeeper/zookeeper-$ZOOKEEPER_VERSION</div><div class="line"></div><div class="line">ENTRYPOINT [&quot;sh&quot;, &quot;/opt/zookeeper/start.sh&quot;]</div></pre></td></tr></table></figure></p>
<p>docker-compose.yml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div></pre></td><td class="code"><pre><div class="line">version: &apos;2.0&apos;</div><div class="line">services:</div><div class="line">  zookeeper0:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: zookeeper.Dockerfile</div><div class="line">    image: jason/zookeeper:3.4.6</div><div class="line">    container_name: zookeeper0</div><div class="line">    hostname: zookeeper0</div><div class="line">    ports:</div><div class="line">      - &quot;2181:2181&quot;</div><div class="line">      - &quot;2888:2888&quot;</div><div class="line">      - &quot;3888:3888&quot;</div><div class="line">    expose:</div><div class="line">      - 2181</div><div class="line">      - 2888</div><div class="line">      - 3888</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_PORT: 2181</div><div class="line">      ZOOKEEPER_ID: 0</div><div class="line">      ZOOKEEPER_SERVERS: server.0=zookeeper0:2888:3888 server.1=zookeeper1:28881:38881 server.2=zookeeper2:28882:38882</div><div class="line">  zookeeper1:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: zookeeper.Dockerfile</div><div class="line">    image: jason/zookeeper:3.4.6</div><div class="line">    container_name: zookeeper1</div><div class="line">    hostname: zookeeper1</div><div class="line">    ports:</div><div class="line">      - &quot;2182:2182&quot;</div><div class="line">      - &quot;28881:28881&quot;</div><div class="line">      - &quot;38881:38881&quot;</div><div class="line">    expose:</div><div class="line">      - 2182</div><div class="line">      - 2888</div><div class="line">      - 3888</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_PORT: 2182</div><div class="line">      ZOOKEEPER_ID: 1</div><div class="line">      ZOOKEEPER_SERVERS: server.0=zookeeper0:2888:3888 server.1=zookeeper1:28881:38881 server.2=zookeeper2:28882:38882</div><div class="line">#    depends_on:</div><div class="line">#      - zookeeper0</div><div class="line">  zookeeper2:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: zookeeper.Dockerfile</div><div class="line">    image: jason/zookeeper:3.4.6</div><div class="line">    container_name: zookeeper2</div><div class="line">    hostname: zookeeper2</div><div class="line">    ports:</div><div class="line">      - &quot;2183:2183&quot;</div><div class="line">      - &quot;28882:28882&quot;</div><div class="line">      - &quot;38882:38882&quot;</div><div class="line">    expose:</div><div class="line">      - 2183</div><div class="line">      - 2888</div><div class="line">      - 3888</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_PORT: 2183</div><div class="line">      ZOOKEEPER_ID: 2</div><div class="line">      ZOOKEEPER_SERVERS: server.0=zookeeper0:2888:3888 server.1=zookeeper1:28881:38881 server.2=zookeeper2:28882:38882</div><div class="line">#    depends_on:</div><div class="line">#        - zookeeper1</div><div class="line">  kafka0:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: kafka.Dockerfile</div><div class="line">    image: jason/kafka:0.8.2.2</div><div class="line">    container_name: kafka0</div><div class="line">    hostname: kafka0</div><div class="line">    ports:</div><div class="line">      - &quot;9092:9092&quot;</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_CONNECT: zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka</div><div class="line">      BROKER_ID: 0</div><div class="line">      BROKER_PORT: 9092</div><div class="line">      ADVERTISED_HOST_NAME: kafka0</div><div class="line">      HOST_NAME: kafka0</div><div class="line">    volumes:</div><div class="line">      - /var/run/docker.sock:/var/run/docker.sock</div><div class="line">    depends_on:</div><div class="line">        - zookeeper0</div><div class="line">        - zookeeper1</div><div class="line">        - zookeeper2</div><div class="line">    expose:</div><div class="line">      - 9092</div><div class="line">#    links:</div><div class="line">#      - zookeeper</div><div class="line">  kafka1:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: kafka.Dockerfile</div><div class="line">    image: jason/kafka:0.8.2.2</div><div class="line">    container_name: kafka1</div><div class="line">    hostname: kafka1</div><div class="line">    ports:</div><div class="line">      - &quot;9093:9093&quot;</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_CONNECT: zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka</div><div class="line">      BROKER_ID: 1</div><div class="line">      BROKER_PORT: 9093</div><div class="line">      ADVERTISED_HOST_NAME: kafka1</div><div class="line">      HOST_NAME: kafka1</div><div class="line">    volumes:</div><div class="line">      - /var/run/docker.sock:/var/run/docker.sock</div><div class="line">    depends_on:</div><div class="line">        - zookeeper0</div><div class="line">        - zookeeper1</div><div class="line">        - zookeeper2</div><div class="line">    expose:</div><div class="line">      - 9093</div><div class="line">#    links:</div><div class="line">#      - zookeeper</div><div class="line">  kafka2:</div><div class="line">    build: .</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: kafka.Dockerfile</div><div class="line">    image: jason/kafka:0.8.2.2</div><div class="line">    container_name: kafka2</div><div class="line">    hostname: kafka2</div><div class="line">    ports:</div><div class="line">      - &quot;9094:9094&quot;</div><div class="line">    environment:</div><div class="line">      ZOOKEEPER_CONNECT: zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka</div><div class="line">      BROKER_ID: 2</div><div class="line">      BROKER_PORT: 9094</div><div class="line">      ADVERTISED_HOST_NAME: kafka2</div><div class="line">      HOST_NAME: kafka2</div><div class="line">    volumes:</div><div class="line">      - /var/run/docker.sock:/var/run/docker.sock</div><div class="line">    depends_on:</div><div class="line">        - zookeeper0</div><div class="line">        - zookeeper1</div><div class="line">        - zookeeper2</div><div class="line">    expose:</div><div class="line">      - 9094</div><div class="line">#   links:</div><div class="line">#     - zookeeper</div></pre></td></tr></table></figure></p>
<p>启动docker-compose<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 docker-file]# docker-compose up -d</div></pre></td></tr></table></figure></p>
<p>如果曾经有启动的需要先停止移除在启动<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 docker-file]# docker-compose stop;docker-compose rm -f</div></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 docker-file]# docker ps</div><div class="line">CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                                                                                                      NAMES</div><div class="line">891585b4767a        jason/kafka:0.8.2.2     "sh /opt/kafka/start."   About an hour ago   Up About an hour    9092/tcp, 0.0.0.0:9093-&gt;9093/tcp                                                                           kafka1</div><div class="line">81f90ccb917a        jason/kafka:0.8.2.2     "sh /opt/kafka/start."   About an hour ago   Up About an hour    9092/tcp, 0.0.0.0:9094-&gt;9094/tcp                                                                           kafka2</div><div class="line">2edb39ed0e97        jason/kafka:0.8.2.2     "sh /opt/kafka/start."   About an hour ago   Up About an hour    0.0.0.0:9092-&gt;9092/tcp                                                                                     kafka0</div><div class="line">b21ac8fb0f72        jason/zookeeper:3.4.6   "sh /opt/zookeeper/st"   About an hour ago   Up About an hour    2181/tcp, 2888/tcp, 0.0.0.0:2183-&gt;2183/tcp, 0.0.0.0:28882-&gt;28882/tcp, 3888/tcp, 0.0.0.0:38882-&gt;38882/tcp   zookeeper2</div><div class="line">48f5ada24ff7        jason/zookeeper:3.4.6   "sh /opt/zookeeper/st"   About an hour ago   Up About an hour    0.0.0.0:2181-&gt;2181/tcp, 0.0.0.0:2888-&gt;2888/tcp, 0.0.0.0:3888-&gt;3888/tcp                                     zookeeper0</div><div class="line">d247a8ac6a30        jason/zookeeper:3.4.6   "sh /opt/zookeeper/st"   About an hour ago   Up About an hour    2181/tcp, 2888/tcp, 0.0.0.0:2182-&gt;2182/tcp, 0.0.0.0:28881-&gt;28881/tcp, 3888/tcp, 0.0.0.0:38881-&gt;38881/tcp   zookeeper1</div></pre></td></tr></table></figure>
<p>此时可以进入容器内查看：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker exec -it zookeeper0 bash</div><div class="line">source /root/.bash_profile</div><div class="line">bin/zkCli.sh -server zookeeper0:<span class="number">2181</span></div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[zk: zookeeper0:<span class="number">2182</span>(CONNECTED) <span class="number">0</span>] ls /</div><div class="line">[zookeeper, kafka]</div><div class="line">[zk: zookeeper0:<span class="number">2182</span>(CONNECTED) <span class="number">1</span>] ls /kafka</div><div class="line">[admin, consumers, controller, controller_epoch, brokers, config]</div><div class="line">[zk: zookeeper0:<span class="number">2182</span>(CONNECTED) <span class="number">2</span>] ls /kafka/brokers/ids</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line">[zk: zookeeper0:<span class="number">2182</span>(CONNECTED) <span class="number">3</span>]</div></pre></td></tr></table></figure>
<p>此处注意，因为docker-compose.yml文件里配置的kafka引用zookeeper根目录下的kafka目录，故在写zookeeper的时候要增加/kafka<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@zhm1 docker-file]# docker exec -it kafka0 bash</div><div class="line">[root@kafka0 kafka_2.11-0.8.2.2]# source /root/.bash_profile</div><div class="line">[root@kafka0 kafka_2.11-0.8.2.2]# bin/kafka-topics.sh --zookeeper zookeeper0:2181/kafka --topic topic1 --create --partitions 3 --replication-factor 1</div><div class="line">Created topic "topic1".</div><div class="line">[root@kafka0 kafka_2.11-0.8.2.2]# bin/kafka-topics.sh --zookeeper zookeeper0:2181/kafka --topic topic1 --describe                                    </div><div class="line">Topic:topic1    PartitionCount:3        ReplicationFactor:1     Configs:</div><div class="line">        Topic: topic1   Partition: 0    Leader: 1       Replicas: 1     Isr: 1</div><div class="line">        Topic: topic1   Partition: 1    Leader: 2       Replicas: 2     Isr: 2</div><div class="line">        Topic: topic1   Partition: 2    Leader: 0       Replicas: 0     Isr: 0</div></pre></td></tr></table></figure></p>
<h3 id="kafka术语"><a href="#kafka术语" class="headerlink" title="kafka术语"></a>kafka术语</h3><h4 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h4><p>Topic,是KAFKA对消息分类的依据;一条消息,必须有一个与之对应的Topic;<br>比如现在又两个Topic,分别是TopicA和TopicB,Producer向TopicA发送一个消息messageA,然后向TopicB发送一个消息messaeB;那么,订阅TopicA的Consumer就会收到消息messageA,订阅TopicB的Consumer就会收到消息messaeB;(每个Consumer可以同时订阅多个Topic,也即是说,同时订阅TopicA和TopicB的Consumer可以收到messageA和messaeB)。<br>同一个Group id的consumers在同一个Topic的同一条消息只能被一个consumer消费，实现了点对点模式，不同Group id的Consumers在同一个Topic上的同一条消息可以同时消费到，则实现了发布订阅模式。通过Consumer的Group id实现了JMS的消息模式</p>
<h4 id="Partition"><a href="#Partition" class="headerlink" title="Partition"></a>Partition</h4><p>每一个Topic可以有多个Partition,这样做是为了提高KAFKA系统的并发能力，每个Partition中按照消息发送的顺序保存着Producer发来的消息,每个消息用ID标识,代表这个消息在改Partition中的偏移量,这样,知道了ID,就可以方便的定位一个消息了;每个新提交过来的消息,被追加到Partition的尾部;如果一个Partition被写满了,就不再追加;(注意,KAFKA不保证不同Partition之间的消息有序保存)</p>
<h4 id="Leader"><a href="#Leader" class="headerlink" title="Leader"></a>Leader</h4><p>Partition中负责消息读写的节点;Leader是从Partition的节点中随机选取的。每个Partition都会在集中的其中一台服务器存在Leader。一个Topic如果有多个Partition，则会有多个Leader。</p>
<h4 id="ReplicationFactor"><a href="#ReplicationFactor" class="headerlink" title="ReplicationFactor"></a>ReplicationFactor</h4><p>一个Partition中复制数据的所有节点,包括已经挂了的;数量不会超过集群中broker的数量</p>
<h4 id="isr"><a href="#isr" class="headerlink" title="isr"></a>isr</h4><p>ReplicationFactor的子集,存活的且和Leader保持同步的节点;leade会维护一个与其基本保持同步的Replica列表，该列表成为ISR（in-sync Replica）.如果一个Follower比leader落后太多，或者超过一段时间未发起数据复制请求（kafka的数据复制是follower的pull形式），则leader将其从ISR中移除</p>
<p>balabala..那么多，来个实例玩玩吧</p>
<p>打开另外一个终端，进入kafka1启动个消费者，此处要注意消费者路径也要指定kafka<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@kafka1 kafka_2.11-0.8.2.2]# bin/kafka-console-consumer.sh --zookeeper zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka --topic topic3 --from-beginning</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@kafka0 kafka_2.11-0.8.2.2]# bin/kafka-console-producer.sh --broker-list kafka0:9092 --topic topic3</div></pre></td></tr></table></figure>
<p>输入hello world</p>
<p>另外一个终端显示<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@kafka1 kafka_2.11-0.8.2.2]# bin/kafka-console-consumer.sh --zookeeper zookeeper0:2181,zookeeper1:2182,zookeeper2:2183/kafka --topic topic3 --from-beginning</div><div class="line">hello world</div></pre></td></tr></table></figure></p>
<p>如果设置topic的时候设置log.cleanup.policy为compact，则消费的消息会被压缩</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="张洪铭" />
          <p class="site-author-name" itemprop="name">张洪铭</p>
          <p class="site-description motion-element" itemprop="description">人生在勤 勤则不匮</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">26</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张洪铭</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhm8"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
